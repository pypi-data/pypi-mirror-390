[tool.poetry]
name = "bigeye-airflow"
version = "0.2.0"
description = "Bigeye Airflow Library supports Airflow versions >=2.6.3 and offers custom operators for interacting with your bigeye workspace."
license = "Proprietary"
authors = ["Bigeye <support@bigeye.com>"]
homepage = "https://docs.bigeye.com/docs"
readme = "./README.md"

[[tool.poetry.source]]
name = "staging"
url = "https://bigeye-021451147547.d.codeartifact.us-west-2.amazonaws.com/pypi/pypi-store/"
priority = "supplemental"


[tool.poetry.dependencies]
python = "^3.11.0"
Flask-OpenID = "^1.3.0"
apache-airflow = ">=2.6.3,<=2.11"
bigeye-sdk = "^0.8.0"

[tool.poetry.group.dev.dependencies]
poethepoet = "^0.24.3"
pylint = "^2.15.2"
mypy = "^0.971"


[tool.poe.tasks]
    [tool.poe.poetry_hooks]
        pre_build = "clean"
        post_publish = "clean"

    [tool.poe.tasks.clean]
        help = "Remove generated files"
        cmd  = """
        rm -rf ./dist
        """

            [tool.poe.tasks.publish]
        help = "Publish all CLI and all dependencies"
        shell = """
        poetry publish --build --skip-existing --username $PYPI_USERNAME --password $PYPI_PASSWORD
        """

            [tool.poe.tasks.publish_staging]
        help = "Publish all CLI and all dependencies"
        shell = """
        poe clean
        poetry publish --build -r staging --skip-existing --username $CODEARTIFACT_USER --password $CODEARTIFACT_AUTH_TOKEN
        """

[build-system]
requires = ["poetry-core>=1.7.0"]
build-backend = "poetry.core.masonry.api"
