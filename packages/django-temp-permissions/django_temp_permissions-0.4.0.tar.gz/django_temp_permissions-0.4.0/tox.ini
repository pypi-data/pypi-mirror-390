[tox]
requires =
    tox>=4.2
    tox-uv
env_list =
    lint
    py313-dj52
    py3{12, 11, 10}-dj{52, 42}

[testenv]
deps =
    dj42: django==4.2.*
    dj52: django==5.2.*
set_env =
    PYTHONDONTWRITEBYTECODE = 1
commands =
    {posargs:pytest tests -rw --create-db --cov-report=xml --junit-xml=junit.xml -o junit_family=legacy -vv}
dependency_groups = dev, test, extra_admin

[testenv:lint]
deps =
    mypy
    ruff
commands =
    ruff check src
    mypy src
