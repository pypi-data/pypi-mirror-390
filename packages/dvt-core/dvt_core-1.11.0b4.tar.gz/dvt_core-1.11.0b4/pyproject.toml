[tool.setuptools]
package-dir = {"" = "."}
include-package-data = true
zip-safe = false

[tool.setuptools.packages.find]
where = ["."]
include = [
    "dvt",
    "dvt.*",
]

# this needs to match MANIFEST.in for the wheels
[tool.setuptools.package-data]
"dvt" = [
    "include/**/*.py",
    "include/**/*.sql",
    "include/**/*.yml",
    "include/**/*.html",
    "include/**/*.md",
    "include/**/.gitkeep",
    "include/**/.gitignore",
    "task/docs/**/*.html",
    "jsonschemas/**/*.json",
    "py.typed",
    # Connector catalog (no JARs - using dbt adapters)
    "connectors/catalog.yml",
    "connectors/README.md",
    "connectors/.gitignore",
]

[project]
name = "dvt-core"
version = "1.11.0b4"
description = "DVT (Data Virtualization Tool) - An all-in-one ELT solution for data transformation and virtualization, built on dbt-core foundations."
readme = "README.md"
requires-python = ">=3.10"
license = "Apache-2.0"
license-files = ["License.md"]  # License.md copied to core/ by build script even though it lives at the root by convention
keywords = ["data", "virtualization", "ELT", "transformation", "analytics"]
authors = [
    { name = "DVT Core Contributors" },
]
maintainers = [
    { name = "DVT Core Contributors" },
]
classifiers = [
    "Development Status :: 5 - Production/Stable",
    "Operating System :: Microsoft :: Windows",
    "Operating System :: MacOS :: MacOS X",
    "Operating System :: POSIX :: Linux",
    "Programming Language :: Python",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Programming Language :: Python :: 3.13",
    "Programming Language :: Python :: Implementation :: CPython",
    "Programming Language :: Python :: Implementation :: PyPy",
]
dependencies = [
    # ----
    # dvt-core uses these packages deeply, throughout the codebase, and there have been breaking changes in past patch releases (even though these are major-version-one).
    # Pin to the patch or minor version, and bump in each new minor version of dvt-core.
    "agate>=1.7.0,<1.10",
    "Jinja2>=3.1.3,<4",
    "mashumaro[msgpack]>=3.9,<3.15",
    # ----
    # dvt-core uses these packages in standard ways. Pin to the major version, and check compatibility
    # with major versions in each new minor version of dvt-core.
    "click>=8.0.2,<9.0",
    "jsonschema>=4.19.1,<5.0",
    "networkx>=2.3,<4.0",
    "protobuf>=6.0,<7.0",
    "requests<3.0.0",  # should match dbt-common
    "snowplow-tracker>=1.0.2,<2.0",
    # ----
    # These packages are major-version-0. Keep upper bounds on upcoming minor versions (which could have breaking changes)
    # and check compatibility / bump in each new minor version of dvt-core.
    "pathspec>=0.9,<0.13",
    "sqlparse>=0.5.0,<0.6.0",
    # ----
    # These are major-version-0 packages also maintained by dbt-labs.
    # Accept patches but avoid automatically updating past a set minor version range.
    "dbt-extractor>=0.5.0,<=0.6",
    "dbt-semantic-interfaces>=0.9.0,<0.10",
    # Minor versions for these are expected to be backwards-compatible
    "dbt-common>=1.27.0,<2.0",
    "dbt-adapters>=1.15.5,<2.0",
    "dbt-protos>=1.0.375,<2.0",
    "pydantic<3",
    # ----
    # DVT-specific: Compute engines for cross-database queries
    "duckdb>=0.9.0,<2.0",  # In-process analytical database
    "pyspark>=3.4.0,<4.0",  # Distributed compute engine for large-scale cross-DB joins
    "pyarrow>=14.0.0",  # Data interchange format (Arrow) for efficient data transfer
    # ----
    # Expect compatibility with all new versions of these packages, so lower bounds only.
    "packaging>20.9",
    "pytz>=2015.7",
    "pyyaml>=6.0",
    "daff>=1.3.46",
    "typing-extensions>=4.4",
]

[project.urls]
Homepage = "https://github.com/hex/dvt-core"
Repository = "https://github.com/hex/dvt-core.git"
Issues = "https://github.com/hex/dvt-core/issues"
Changelog = "https://github.com/hex/dvt-core/blob/main/CHANGELOG.md"

[project.scripts]
dvt = "dvt.cli.main:cli"

[build-system]
requires = [
    "setuptools>=61",
    "wheel",
]
build-backend = "setuptools.build_meta"
