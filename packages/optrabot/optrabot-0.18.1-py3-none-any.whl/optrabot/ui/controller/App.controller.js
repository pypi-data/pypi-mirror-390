"use strict";sap.ui.define(["./BaseController","sap/ui/Device","sap/m/MessageBox"],function(t,n,e){"use strict";function o(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}const i=o(t);const s=i.extend("com.optrabot.ui.controller.App",{onInit:function t(){this.getView().addStyleClass(this.getOwnerComponent().getContentDensityClass());if(n.resize.width<=1024){this.onSideNavButtonPress()}},getBundleText:function t(n,e){return Promise.resolve(this.getBundleTextByModel(n,this.getOwnerComponent().getModel("i18n"),e))},onShutdownPress:async function t(){console.log("Shutdown button pressed");const n=this.getOwnerComponent().getModel("global");const o=n.getProperty("/backendBaseUrl");try{const t=await fetch(`${o}/api/shutdown`,{method:"POST"});if(t.ok){const n=await t.json();console.log("Shutdown request successful",n);await this.showShutdownConfirmationPage()}else{console.error("Shutdown request failed with status:",t.status);e.error("Fehler beim Herunterfahren des OptraBots.",{title:"Shutdown Fehler"})}}catch(t){console.error("Error occurred while shutting down:",t);e.error("Ein unerwarteter Fehler ist beim Herunterfahren aufgetreten.",{title:"Unerwarteter Fehler"})}},showShutdownConfirmationPage:async function t(){const n=await this.getBundleText("shutdownPageTitle");const e=await this.getBundleText("shutdownPageDescription");const o=await this.getBundleText("shutdownPageInstruction");const i=await this.getBundleText("shutdownPageButtonText");const s=await this.getBundleText("shutdownPageButtonTooltip");document.title=`OptraBot - ${n}`;setTimeout(()=>{document.body.innerHTML=`\n\t\t\t\t<!DOCTYPE html>\n\t\t\t\t<html>\n\t\t\t\t<head>\n\t\t\t\t\t<meta charset="utf-8">\n\t\t\t\t\t<meta name="viewport" content="width=device-width, initial-scale=1.0">\n\t\t\t\t\t<title>OptraBot - ${n}</title>\n\t\t\t\t\t<link rel="icon" type="image/png" href="img/favicon.png">\n\t\t\t\t\t<link rel="stylesheet" href="https://sdk.openui5.org/1.132.1/resources/sap/ui/core/themes/sap_horizon/library.css">\n\t\t\t\t\t<style>\n\t\t\t\t\t\tbody, html {\n\t\t\t\t\t\t\tmargin: 0;\n\t\t\t\t\t\t\tpadding: 0;\n\t\t\t\t\t\t\theight: 100vh;\n\t\t\t\t\t\t\tfont-family: '72', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\n\t\t\t\t\t\t\tbackground: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t.shutdown-container {\n\t\t\t\t\t\t\tbackground: rgba(255, 255, 255, 0.98);\n\t\t\t\t\t\t\tborder-radius: 12px;\n\t\t\t\t\t\t\tpadding: 48px 40px;\n\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t\tbox-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);\n\t\t\t\t\t\t\tmax-width: 520px;\n\t\t\t\t\t\t\twidth: 90%;\n\t\t\t\t\t\t\tborder: 1px solid rgba(0, 0, 0, 0.1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t.success-icon {\n\t\t\t\t\t\t\twidth: 50px;\n\t\t\t\t\t\t\theight: 50px;\n\t\t\t\t\t\t\tmargin: 0 auto 32px;\n\t\t\t\t\t\t\tbackground: #4CAF50;\n\t\t\t\t\t\t\tborder-radius: 50%;\n\t\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\t\tfont-size: 40px;\n\t\t\t\t\t\t\tfont-weight: 300;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t.shutdown-title {\n\t\t\t\t\t\t\tfont-size: 28px;\n\t\t\t\t\t\t\tfont-weight: 400;\n\t\t\t\t\t\t\tcolor: #333;\n\t\t\t\t\t\t\tmargin-bottom: 24px;\n\t\t\t\t\t\t\tline-height: 1.2;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t.shutdown-description {\n\t\t\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\t\t\tcolor: #666;\n\t\t\t\t\t\t\tmargin-bottom: 20px;\n\t\t\t\t\t\t\tline-height: 1.6;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t.shutdown-instruction {\n\t\t\t\t\t\t\tfont-size: 16px;\n\t\t\t\t\t\t\tcolor: #333;\n\t\t\t\t\t\t\tmargin-bottom: 32px;\n\t\t\t\t\t\t\tfont-weight: 600;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t.close-button {\n\t\t\t\t\t\t\tbackground: #0854a0;\n\t\t\t\t\t\t\tcolor: white;\n\t\t\t\t\t\t\tborder: none;\n\t\t\t\t\t\t\tpadding: 12px 24px;\n\t\t\t\t\t\t\tborder-radius: 6px;\n\t\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\t\tfont-weight: 500;\n\t\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\t\ttransition: all 0.2s ease;\n\t\t\t\t\t\t\tmin-width: 200px;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t.close-button:hover {\n\t\t\t\t\t\t\tbackground: #0a5d9e;\n\t\t\t\t\t\t\tbox-shadow: 0 2px 8px rgba(8, 84, 160, 0.3);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t.close-button:active {\n\t\t\t\t\t\t\ttransform: translateY(1px);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t.close-button:focus {\n\t\t\t\t\t\t\toutline: 2px solid #0854a0;\n\t\t\t\t\t\t\toutline-offset: 2px;\n\t\t\t\t\t\t}\n\t\t\t\t\t</style>\n\t\t\t\t</head>\n\t\t\t\t<body>\n\t\t\t\t\t<div class="shutdown-container">\n\t\t\t\t\t\t<div class="success-icon">✓</div>\n\t\t\t\t\t\t<h1 class="shutdown-title">${n}</h1>\n\t\t\t\t\t\t<p class="shutdown-description">\n\t\t\t\t\t\t\t${e.replace(/\\n/g,"<br>")}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<p class="shutdown-instruction">\n\t\t\t\t\t\t\t${o}\n\t\t\t\t\t\t</p>\n\t\t\t\t\t\t<button class="close-button" onclick="window.close();" title="${s}">\n\t\t\t\t\t\t\t${i}\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<script>\n\t\t\t\t\t\t// Fokus auf den Button setzen für Keyboard-Navigation\n\t\t\t\t\t\tdocument.querySelector('.close-button').focus();\n\t\t\t\t\t\t\n\t\t\t\t\t\t// Tastaturunterstützung\n\t\t\t\t\t\tdocument.addEventListener('keydown', function(e) {\n\t\t\t\t\t\t\tif (e.key === 'Escape' || (e.ctrlKey && e.key === 'w') || (e.metaKey && e.key === 'w')) {\n\t\t\t\t\t\t\t\twindow.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t<\/script>\n\t\t\t\t</body>\n\t\t\t\t</html>\n\t\t\t`},500)},onSideNavButtonPress:function t(){console.log("SideNavButton pressed");const n=this.byId("optrabot_app");var e=n.getSideExpanded();n.setSideExpanded(!e);this._setToggleButtonTooltip(!e)},_setToggleButtonTooltip:async function t(n){const e=this.byId("sideNavigationToggleButton");if(n){e.setTooltip(await this.getBundleText("sideNavigationCollapseTooltip"))}else{e.setTooltip(await this.getBundleText("sideNavigationExpandTooltip"))}}});return s});
//# sourceMappingURL=App.controller.js.map