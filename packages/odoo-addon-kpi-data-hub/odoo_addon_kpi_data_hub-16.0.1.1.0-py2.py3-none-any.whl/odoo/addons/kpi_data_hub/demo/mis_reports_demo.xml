<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data noupdate="1">
        <!-- ======================================== -->
        <!-- REPORTES MIS BUILDER COMPLETOS Y FUNCIONALES -->
        <!-- ======================================== -->

        <!-- ======================================== -->
        <!-- 1. REPORTE P&amp;L COMPLETO -->
        <!-- ======================================== -->

        <record id="demo_mis_pl_report" model="mis.report">
            <field name="name">ðŸ“Š P&amp;L Statement - Demo</field>
            <field
                name="description"
            >Profit &amp; Loss Statement with KPI Hub integration</field>
        </record>

        <!-- Revenue KPIs -->
        <record id="demo_mis_kpi_revenue" model="mis.report.kpi">
            <field name="name">REVENUE</field>
            <field name="description">Total Revenue</field>
            <field name="report_id" ref="demo_mis_pl_report" />
            <field name="sequence">10</field>
            <field name="expression">kpi('REVENUE')</field>
        </record>

        <record id="demo_mis_kpi_sales" model="mis.report.kpi">
            <field name="name">SALES</field>
            <field name="description">Sales Revenue</field>
            <field name="report_id" ref="demo_mis_pl_report" />
            <field name="sequence">11</field>
            <field name="expression">kpi('SALES')</field>
        </record>

        <record id="demo_mis_kpi_other_income" model="mis.report.kpi">
            <field name="name">OTHER_INCOME</field>
            <field name="description">Other Income</field>
            <field name="report_id" ref="demo_mis_pl_report" />
            <field name="sequence">12</field>
            <field name="expression">kpi('OTHER_INCOME')</field>
        </record>

        <!-- COGS KPIs -->
        <record id="demo_mis_kpi_cogs" model="mis.report.kpi">
            <field name="name">COGS</field>
            <field name="description">Cost of Goods Sold</field>
            <field name="report_id" ref="demo_mis_pl_report" />
            <field name="sequence">20</field>
            <field name="expression">kpi('COGS')</field>
        </record>

        <!-- Operating Expenses KPIs -->
        <record id="demo_mis_kpi_opex" model="mis.report.kpi">
            <field name="name">OPEX</field>
            <field name="description">Operating Expenses</field>
            <field name="report_id" ref="demo_mis_pl_report" />
            <field name="sequence">30</field>
            <field name="expression">kpi('OPEX')</field>
        </record>

        <record id="demo_mis_kpi_salaries" model="mis.report.kpi">
            <field name="name">SALARIES</field>
            <field name="description">Salaries &amp; Wages</field>
            <field name="report_id" ref="demo_mis_pl_report" />
            <field name="sequence">31</field>
            <field name="expression">kpi('SALARIES')</field>
        </record>

        <record id="demo_mis_kpi_rent" model="mis.report.kpi">
            <field name="name">RENT</field>
            <field name="description">Rent &amp; Utilities</field>
            <field name="report_id" ref="demo_mis_pl_report" />
            <field name="sequence">32</field>
            <field name="expression">kpi('RENT')</field>
        </record>

        <record id="demo_mis_kpi_marketing" model="mis.report.kpi">
            <field name="name">MARKETING</field>
            <field name="description">Marketing &amp; Advertising</field>
            <field name="report_id" ref="demo_mis_pl_report" />
            <field name="sequence">33</field>
            <field name="expression">kpi('MARKETING')</field>
        </record>

        <!-- Calculated KPIs -->
        <record id="demo_mis_kpi_gross_profit" model="mis.report.kpi">
            <field name="name">GROSS_PROFIT</field>
            <field name="description">Gross Profit</field>
            <field name="report_id" ref="demo_mis_pl_report" />
            <field name="sequence">40</field>
            <field name="expression">kpi('GROSS_PROFIT')</field>
        </record>

        <record id="demo_mis_kpi_operating_profit" model="mis.report.kpi">
            <field name="name">OPERATING_PROFIT</field>
            <field name="description">Operating Profit</field>
            <field name="report_id" ref="demo_mis_pl_report" />
            <field name="sequence">50</field>
            <field name="expression">kpi('OPERATING_PROFIT')</field>
        </record>

        <record id="demo_mis_kpi_net_profit" model="mis.report.kpi">
            <field name="name">NET_PROFIT</field>
            <field name="description">Net Profit</field>
            <field name="report_id" ref="demo_mis_pl_report" />
            <field name="sequence">60</field>
            <field name="expression">kpi('NET_PROFIT')</field>
        </record>

        <record id="demo_mis_kpi_margin" model="mis.report.kpi">
            <field name="name">MARGIN</field>
            <field name="description">Profit Margin %</field>
            <field name="report_id" ref="demo_mis_pl_report" />
            <field name="sequence">70</field>
            <field name="expression">kpi('MARGIN')</field>
        </record>

        <!-- ======================================== -->
        <!-- 2. INSTANCIAS DE REPORTE MIS -->
        <!-- ======================================== -->

        <!-- Instancia Q1 2025 -->
        <record id="demo_mis_pl_q1_instance" model="mis.report.instance">
            <field name="name">P&amp;L Q1 2025</field>
            <field name="report_id" ref="demo_mis_pl_report" />
            <field name="date">2025-03-31</field>
        </record>

        <record id="demo_mis_pl_q1_period" model="mis.report.instance.period">
            <field name="name">Q1 2025</field>
            <field name="report_instance_id" ref="demo_mis_pl_q1_instance" />
            <field name="mode">fix</field>
            <field name="manual_date_from">2025-01-01</field>
            <field name="manual_date_to">2025-03-31</field>
            <field name="source">actuals</field>
        </record>

        <!-- Instancia Q2 2025 -->
        <record id="demo_mis_pl_q2_instance" model="mis.report.instance">
            <field name="name">P&amp;L Q2 2025</field>
            <field name="report_id" ref="demo_mis_pl_report" />
            <field name="date">2025-06-30</field>
        </record>

        <record id="demo_mis_pl_q2_period" model="mis.report.instance.period">
            <field name="name">Q2 2025</field>
            <field name="report_instance_id" ref="demo_mis_pl_q2_instance" />
            <field name="mode">fix</field>
            <field name="manual_date_from">2025-04-01</field>
            <field name="manual_date_to">2025-06-30</field>
            <field name="source">actuals</field>
        </record>

        <!-- ======================================== -->
        <!-- 3. INTEGRACIÃ“N KPI HUB - MIS BUILDER -->
        <!-- ======================================== -->

        <!-- IntegraciÃ³n P&amp;L -->
        <record id="demo_pl_mis_integration" model="kpi_hub.mis.report">
            <field name="name">P&amp;L MIS Integration</field>
            <field name="kpi_hub_template_id" ref="demo_pl_template" />
            <field name="mis_report_id" ref="demo_mis_pl_report" />
            <field name="company_id" ref="base.main_company" />
            <field name="auto_map_items">True</field>
        </record>

        <!-- ======================================== -->
        <!-- 4. FUENTES AEP PARA INTEGRACIÃ“N -->
        <!-- ======================================== -->

        <record id="demo_pl_aep_source" model="kpi_hub.aep.source">
            <field name="name">P&amp;L AEP Source</field>
            <field name="template_id" ref="demo_pl_template" />
            <field name="active">True</field>
            <field name="company_id" ref="base.main_company" />
        </record>

        <!-- ======================================== -->
        <!-- 5. MAPEOS DE ITEMS KPI HUB - MIS -->
        <!-- ======================================== -->

        <!-- Mapeo Revenue -->
        <record id="demo_mapping_revenue" model="kpi_hub.mis.item.mapping">
            <field name="kpi_hub_item_id" ref="demo_pl_revenue" />
            <field name="mis_kpi_id" ref="demo_mis_kpi_revenue" />
            <field name="report_id" ref="demo_pl_mis_integration" />
        </record>

        <!-- Mapeo Sales -->
        <record id="demo_mapping_sales" model="kpi_hub.mis.item.mapping">
            <field name="kpi_hub_item_id" ref="demo_pl_sales" />
            <field name="mis_kpi_id" ref="demo_mis_kpi_sales" />
            <field name="report_id" ref="demo_pl_mis_integration" />
        </record>

        <!-- Mapeo Other Income -->
        <record id="demo_mapping_other_income" model="kpi_hub.mis.item.mapping">
            <field name="kpi_hub_item_id" ref="demo_pl_other_income" />
            <field name="mis_kpi_id" ref="demo_mis_kpi_other_income" />
            <field name="report_id" ref="demo_pl_mis_integration" />
        </record>

        <!-- Mapeo COGS -->
        <record id="demo_mapping_cogs" model="kpi_hub.mis.item.mapping">
            <field name="kpi_hub_item_id" ref="demo_pl_cogs" />
            <field name="mis_kpi_id" ref="demo_mis_kpi_cogs" />
            <field name="report_id" ref="demo_pl_mis_integration" />
        </record>

        <!-- Mapeo OPEX -->
        <record id="demo_mapping_opex" model="kpi_hub.mis.item.mapping">
            <field name="kpi_hub_item_id" ref="demo_pl_opex" />
            <field name="mis_kpi_id" ref="demo_mis_kpi_opex" />
            <field name="report_id" ref="demo_pl_mis_integration" />
        </record>

        <!-- Mapeo Salaries -->
        <record id="demo_mapping_salaries" model="kpi_hub.mis.item.mapping">
            <field name="kpi_hub_item_id" ref="demo_pl_salaries" />
            <field name="mis_kpi_id" ref="demo_mis_kpi_salaries" />
            <field name="report_id" ref="demo_pl_mis_integration" />
        </record>

        <!-- Mapeo Rent -->
        <record id="demo_mapping_rent" model="kpi_hub.mis.item.mapping">
            <field name="kpi_hub_item_id" ref="demo_pl_rent" />
            <field name="mis_kpi_id" ref="demo_mis_kpi_rent" />
            <field name="report_id" ref="demo_pl_mis_integration" />
        </record>

        <!-- Mapeo Marketing -->
        <record id="demo_mapping_marketing" model="kpi_hub.mis.item.mapping">
            <field name="kpi_hub_item_id" ref="demo_pl_marketing" />
            <field name="mis_kpi_id" ref="demo_mis_kpi_marketing" />
            <field name="report_id" ref="demo_pl_mis_integration" />
        </record>

        <!-- Mapeo Gross Profit -->
        <record id="demo_mapping_gross_profit" model="kpi_hub.mis.item.mapping">
            <field name="kpi_hub_item_id" ref="demo_pl_gross_profit" />
            <field name="mis_kpi_id" ref="demo_mis_kpi_gross_profit" />
            <field name="report_id" ref="demo_pl_mis_integration" />
        </record>

        <!-- Mapeo Operating Profit -->
        <record id="demo_mapping_operating_profit" model="kpi_hub.mis.item.mapping">
            <field name="kpi_hub_item_id" ref="demo_pl_operating_profit" />
            <field name="mis_kpi_id" ref="demo_mis_kpi_operating_profit" />
            <field name="report_id" ref="demo_pl_mis_integration" />
        </record>

        <!-- Mapeo Net Profit -->
        <record id="demo_mapping_net_profit" model="kpi_hub.mis.item.mapping">
            <field name="kpi_hub_item_id" ref="demo_pl_net_profit" />
            <field name="mis_kpi_id" ref="demo_mis_kpi_net_profit" />
            <field name="report_id" ref="demo_pl_mis_integration" />
        </record>

        <!-- Mapeo Margin -->
        <record id="demo_mapping_margin" model="kpi_hub.mis.item.mapping">
            <field name="kpi_hub_item_id" ref="demo_pl_margin" />
            <field name="mis_kpi_id" ref="demo_mis_kpi_margin" />
            <field name="report_id" ref="demo_pl_mis_integration" />
        </record>

    </data>
</odoo>
