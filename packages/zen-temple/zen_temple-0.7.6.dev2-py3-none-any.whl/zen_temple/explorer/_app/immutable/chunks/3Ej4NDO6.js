import"./DsnmJJEf.js";import{q as j,v as q,p as F,g as L,u as h,j as _,h as t,e as V,i as D,m as O,f as m,a as z,s as I,b as d,c as B,d as E,r as G,t as H}from"./wiODf3u9.js";import{s as K}from"./Dv-zU6kM.js";import{s as P}from"./DPXpTqfB.js";import{i as Q}from"./BanhNaiI.js";import{u as R,h as T,i as W,I as X}from"./hzu92_2X.js";import{p as S}from"./CdVljubK.js";function Y(x,s,i,l,c){t(s)?i([]):i(t(l).map(u=>u.value)),c()(i())}var Z=m('<i class="bi bi-x"></i>'),$=m('<i class="bi bi-check2-all"></i>'),ee=m('<button class="text-blue-500 block ml-auto"><!> </button>'),te=m('<!> <select class="slim mb-2" multiple></select>',1);function fe(x,s){const i=q();F(s,!0);let l=S(s,"value",31,()=>L(s.options)),c=S(s,"disabled",3,!1),u=S(s,"onUpdate",3,()=>{}),a,p=V(!1),b="",r=O(()=>s.options.map(e=>typeof e=="string"?{text:e,value:e}:e));function J(e){l(e),D(p,!0),u()?.(e)}function M(e){return a=new X({select:e,settings:{id:i,isMultiple:!0,showSearch:!1,maxValuesShown:100,allowDeselect:!0},cssClasses:{deselect:"hidden"},data:t(r),events:{afterChange:f=>{J(f.map(n=>n.value))}}}),b=JSON.stringify(t(r)),a.setSelected(l().map(f=>f.toString()),!1),()=>{a?.destroy()}}h(()=>{l(),_(async()=>{if(t(p)){D(p,!1);return}a&&a.setSelected(l()||[],!1)})}),h(()=>{t(r),_(async()=>{JSON.stringify(t(r))!==b&&(b=JSON.stringify(t(r)),a&&a.setData(P(t(r).map(e=>new R(e)))))})}),h(()=>{c(),_(()=>{a&&(c()?a.disable():a.enable())})});let g=O(()=>l().length==t(r).length);var y=te(),k=z(y);T(k,{get label(){return s.label},get formId(){return i},rightSide:f=>{var n=ee();n.__click=[Y,g,l,r,u];var w=E(n);{var A=o=>{var v=Z();d(o,v)},C=o=>{var v=$();d(o,v)};Q(w,o=>{t(g)?o(A):o(C,!1)})}var U=I(w);G(n),H(()=>K(U,` ${t(g)?"Deselect all":"Select all"}`)),d(f,n)}});var N=I(k,2);W(N,()=>M),d(x,y),B()}j(["click"]);export{fe as M};
