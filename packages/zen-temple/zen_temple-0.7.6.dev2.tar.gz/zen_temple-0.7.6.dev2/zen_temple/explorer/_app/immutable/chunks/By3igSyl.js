import"./DsnmJJEf.js";import{o as vt}from"./Dv-zU6kM.js";import{q as _t,p as mt,g as R,e as V,i as O,u as N,k as lt,h as _,n as pt,a as ut,b as W,c as xt,f as $,s as ht,m as ct,d as G,r as J}from"./wiODf3u9.js";import{i as K}from"./BanhNaiI.js";import{c as ft,u as wt,e as yt,i as zt}from"./DPXpTqfB.js";import{a as Pt,c as St}from"./CcFbe3Gs.js";import{p as D,b as bt}from"./CdVljubK.js";import{k as Tt,S as kt}from"./hzu92_2X.js";var H={exports:{}},Ot=H.exports,dt;function Dt(){return dt||(dt=1,(function(w,h){(function(l,p){w.exports=p()})(Ot,(function(){var l="rgba(100, 100, 100, 0.7)",p="rgba(255, 255, 255, 0.8)",j="round",d=function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")},g=(function(){function n(t,r){for(var e=0;e<r.length;e++){var a=r[e];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(t,r,e){return r&&n(t.prototype,r),e&&n(t,e),t}})(),F=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var e in r)Object.prototype.hasOwnProperty.call(r,e)&&(n[e]=r[e])}return n},c=function(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(n,t):n.__proto__=t)},f=function(n,t){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:n},v=(function(){function n(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:20,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:l,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p;return d(this,n),this._canvas=document.createElement("canvas"),this._context=this._canvas.getContext("2d"),this._canvas.width=t,this._canvas.height=t,this._context.fillStyle=r,this._context.fillRect(0,0,this._canvas.width,this._canvas.height),this._size=t,this._patternColor=e,this}return g(n,[{key:"setStrokeProps",value:function(){this._context.strokeStyle=this._patternColor,this._context.lineWidth=this._size/10,this._context.lineJoin=j,this._context.lineCap=j}},{key:"setFillProps",value:function(){this._context.fillStyle=this._patternColor}}]),n})(),P=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawPlus(),this.drawPlus(e,e),this._context.stroke(),this._canvas}},{key:"drawPlus",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=o/4;this._context.moveTo(i+e,0+a),this._context.lineTo(i+e,s+a),this._context.moveTo(0+e,i+a),this._context.lineTo(s+e,i+a),this._context.closePath()}}]),t})(v),L=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawCross(),this.drawCross(e,e),this._context.stroke(),this._canvas}},{key:"drawCross",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=2;this._context.moveTo(e+i,a+i),this._context.lineTo(s-i+e,s-i+a),this._context.moveTo(e+i,s-i+a),this._context.lineTo(s-i+e,a+i),this._context.closePath()}}]),t})(v),C=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawDash(),this.drawDash(e,e),this._context.stroke(),this._canvas}},{key:"drawDash",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=2;this._context.moveTo(e+i,a+i),this._context.lineTo(s-i+e,s-i+a),this._context.closePath()}}]),t})(v),tt=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;this._context.beginPath(),this.setStrokeProps();var a=new L;a.drawCross.call(this);var o=new C;return o.drawDash.call(this,e,e),this._context.stroke(),this._canvas}}]),t})(v),k=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setFillProps(),this.drawDot(),this.drawDot(e,e),this._context.fill(),this._canvas}},{key:"drawDot",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this._size/10,s=this._size,i=s/4,U=i+e,X=i+a;this._context.moveTo(U+i,X),this._context.arc(U,X,o,0,2*Math.PI),this._context.closePath()}}]),t})(v),et=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;this._context.beginPath(),this.setStrokeProps();var a=new C;a.drawDash.call(this,e,e),this._context.closePath(),this._context.stroke(),this.setFillProps();var o=new k;return o.drawDot.call(this),this._context.fill(),this._canvas}}]),t})(v),nt=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2,a=this._size/5;return this._context.beginPath(),this.setFillProps(),this.drawDot(0,0,a),this.drawDot(e,e,a),this._context.fill(),this._canvas}}]),t})(k),Z=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2,a=this._size/5;return this._context.beginPath(),this.setStrokeProps(),this.drawDot(0,0,a),this.drawDot(e,e,a),this._context.stroke(),this._canvas}}]),t})(k),E=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawLine(),this.drawLine(e,e),this._context.stroke(),this._canvas}},{key:"drawLine",value:function(){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=this._size,o=a/4;this._context.moveTo(0,o+e),this._context.lineTo(this._size,o+e),this._context.closePath()}}]),t})(v),at=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){return this._context.translate(this._size,0),this._context.rotate(90*Math.PI/180),E.prototype.drawTile.call(this),this._canvas}}]),t})(E),rt=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){return this._context.beginPath(),this.setStrokeProps(),this.drawWeave(0,0),this._context.stroke(),this._canvas}},{key:"drawWeave",value:function(e,a){var o=this._size,s=o/2;this._context.moveTo(e+1,a+1),this._context.lineTo(s-1,s-1),this._context.moveTo(s+1,o-1),this._context.lineTo(o-1,s+1),this._context.closePath()}}]),t})(v),B=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){return this._context.beginPath(),this.setStrokeProps(),this.drawZigzag(),this.drawZigzag(this._size/2),this._context.stroke(),this._canvas}},{key:"drawZigzag",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=this._size,o=a/4,s=a/2,i=a/10;this._context.moveTo(0,i+e),this._context.lineTo(o,s-i+e),this._context.lineTo(s,i+e),this._context.lineTo(a-o,s-i+e),this._context.lineTo(a,i+e)}}]),t})(v),u=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){return this._context.translate(this._size,0),this._context.rotate(90*Math.PI/180),B.prototype.drawTile.call(this),this._canvas}}]),t})(B),y=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawDiagonalLine(),this.drawDiagonalLine(e,e),this._context.stroke(),this._canvas}},{key:"drawDiagonalLine",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=1;this._context.moveTo(s-i-e,i*-1+a),this._context.lineTo(o+1-e,s+1+a),this._context.closePath()}}]),t})(v),S=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){return this._context.translate(this._size,0),this._context.rotate(90*Math.PI/180),y.prototype.drawTile.call(this),this._canvas}}]),t})(y),it=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setFillProps(),this.drawSquare(),this.drawSquare(e,e),this._context.fill(),this._canvas}},{key:"drawSquare",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=o/20;this._context.fillRect(e+i,a+i,s-i*2,s-i*2),this._context.closePath()}}]),t})(v),st=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawBox(),this.drawBox(e,e),this._context.stroke(),this._canvas}},{key:"drawBox",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=o/20;this._context.strokeRect(e+i,a+i,s-i*4,s-i*4),this._context.closePath()}}]),t})(v),T=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setFillProps(),this.drawTriangle(),this.drawTriangle(e,e),this._context.fill(),this._canvas}},{key:"drawTriangle",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=o/4;this._context.moveTo(i+e,a),this._context.lineTo(s+e,s+a),this._context.lineTo(e,s+a),this._context.closePath()}}]),t})(v),Y=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size;return this._context.translate(e,e),this._context.rotate(180*Math.PI/180),T.prototype.drawTile.call(this),this._canvas}}]),t})(T),m=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setFillProps(),this.drawDiamond(),this.drawDiamond(e,e),this._context.fill(),this._canvas}},{key:"drawDiamond",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2,i=o/4;this._context.moveTo(i+e,a),this._context.lineTo(s+e,i+a),this._context.lineTo(i+e,s+a),this._context.lineTo(e,i+a),this._context.closePath()}}]),t})(v),M=(function(n){c(t,n);function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,[{key:"drawTile",value:function(){var e=this._size/2;return this._context.beginPath(),this.setStrokeProps(),this.drawDiamond(),this.drawDiamond(e,e),this._context.stroke(),this._canvas}},{key:"drawDiamond",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=this._size,s=o/2-1,i=o/4;this._context.moveTo(i+e,a+1),this._context.lineTo(s+e,i+a),this._context.lineTo(i+e,s+a),this._context.lineTo(e+1,i+a),this._context.closePath()}}]),t})(m),z={plus:P,cross:L,dash:C,"cross-dash":tt,dot:k,"dot-dash":et,disc:nt,ring:Z,line:E,"line-vertical":at,weave:rt,zigzag:B,"zigzag-vertical":u,diagonal:y,"diagonal-right-left":S,square:it,box:st,triangle:T,"triangle-inverted":Y,diamond:m,"diamond-box":M},ot={circle:z.disc,"triangle-vertical":z["triangle-inverted"],"line-horizontal":z.line,"line-diagonal-lr":z.diagonal,"line-diagonal-rl":z["diagonal-right-left"],"zigzag-horizontal":z.zigzag,"diamond-outline":z["diamond-box"]},A=[];function I(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=Object.keys(z);n.forEach(function(e){t.splice(t.indexOf(e),1)});var r=Math.floor(Math.random()*t.length);return t[r]}F(A,z,ot);function b(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"square",t=arguments[1],r=arguments[2],e=arguments[3],a=document.createElement("canvas"),o=a.getContext("2d"),s=e*2,i=A[n],U=new i(e,t,r),X=o.createPattern(U.drawTile(),"repeat");return a.width=s,a.height=s,X.shapeType=n,X}function q(n){var t=void 0,r=void 0;return n.map(function(e,a,o){var s=void 0;return a===0?(s=I(),r=s,t=r):a===o.length-1?s=I([r,t]):(s=I([r]),r=s),b(s,e)})}var x={draw:b,generate:q};return x}))})(H)),H.exports}var jt=Dt();function Lt(w,h,l,p){h().push(null),_(l).push(""),_(p).push("")}var Ct=$('<div class="row mb-2"><div class="offset-md-3 col-md-9"><button class="text-red-500 hover:text-red-600"><i class="bi bi-trash3 me-1"></i> Remove solution from comparison</button></div></div>'),qt=$("<div><!> <!></div>"),Rt=$('<div class="mb-2"><button class="text-blue-500 hover:text-blue-600"><i class="bi bi-plus-lg me-1"></i> Add solution to compare</button></div>'),Ft=$("<!> <!>",1);function Zt(w,h){mt(h,!0);let l=D(h,"solutions",31,()=>R([])),p=D(h,"loading",15,!1),j=D(h,"years",31,()=>R([])),d=D(h,"nodes",31,()=>R([]));D(h,"carriers",27,()=>R([]));let g=D(h,"disabled",3,!1),F=D(h,"urlParamSolutions",3,"solutions"),c=D(h,"urlParamScenarios",3,"scenarios"),f=V(""),v=V(R(l().map(()=>""))),P=V(R(l().map(()=>""))),L=V(!1),C=R([]),tt=ct(()=>_(f)==""?!1:C.some(u=>u?.moreSolutionsExist?u.moreSolutionsExist():!0)),k=V(!1);vt(async()=>{if(F()==null||c()==null)return;const u=ft(F()),y=ft(c());if(u.length==0||u.length!=y.length){O(k,!0);return}O(f,u[0].split(".")[0],!0),O(v,u.map(S=>S.split(".")[1]||""),!0),O(P,y,!0),l(u.map(()=>null)),O(L,!0),Z(),O(k,!0)}),N(()=>{l().map(u=>u==null?null:`${u.solution_name}.${u.scenario_name}`),lt().then(()=>{F()==null||c()==null||l().length==0||wt({[F()]:l().filter(u=>u!=null).map(u=>u.solution_name).join("~"),[c()]:l().filter(u=>u!=null).map(u=>u.scenario_name).join("~")})})}),N(()=>{l().length>1&&l()[0]===null&&!_(L)&&lt().then(()=>{l().splice(1),_(v).splice(1),_(P).splice(1)})}),N(()=>{_(L)&&l()[0]!==null&&O(L,!1)}),N(()=>{l().length>0&&l()[0]!==null&&(j(Tt(l()[0].detail)),d(l()[0].detail.system.set_nodes))});function et(u){return l().map((y,S)=>S===u||y==null?null:[_(v)[S],_(P)[S]]).filter(y=>y!=null)}function nt(u){l().splice(u,1),_(v).splice(u,1),_(P).splice(u,1)}function Z(){h.onSelected?.(l())}var E=pt(),at=ut(E);{var rt=u=>{},B=u=>{var y=Ft(),S=ut(y);yt(S,17,l,zt,(T,Y,m)=>{var M=qt();Pt(M,1,St([m>0&&"border-t border-gray-300 dark:border-gray-600"]));var z=G(M);{var ot=b=>{{let q=ct(()=>et(m));bt(kt(b,{get excludeSolutions(){return _(q)},solutionSelected:Z,get disabled(){return g()},withoutSolution:m>0,urlParamSolution:null,urlParamScenario:null,get selected_solution(){return l()[m]},set selected_solution(x){l(l()[m]=x,!0)},get activeFirstLevel(){return _(f)},set activeFirstLevel(x){O(f,x,!0)},get activeSecondLevel(){return _(v)[m]},set activeSecondLevel(x){_(v)[m]=x},get activeScenario(){return _(P)[m]},set activeScenario(x){_(P)[m]=x},get loading(){return p()},set loading(x){p(x)}}),(x,n)=>C[n]=x,x=>C?.[x],()=>[m])}};K(z,b=>{_(v)[m]!==void 0&&_(P)[m]!==void 0&&b(ot)})}var A=ht(z,2);{var I=b=>{var q=Ct(),x=G(q),n=G(x);n.__click=()=>nt(m),J(x),J(q),W(b,q)};K(A,b=>{m>0&&b(I)})}J(M),W(T,M)});var it=ht(S,2);{var st=T=>{var Y=Rt(),m=G(Y);m.__click=[Lt,l,v,P],J(Y),W(T,Y)};K(it,T=>{_(tt)&&!l().includes(null)&&T(st)})}W(u,y)};K(at,u=>{_(k)?u(B,!1):u(rt)})}W(w,E),xt()}_t(["click"]);function At(w){const h=[],l=new Set;return w.data.datasets.forEach((p,j)=>{l.has(p.label||"")||(l.add(p.label||""),h.push({text:p.label||"",fontColor:w.options.color,fillStyle:p.backgroundColor||"black",strokeStyle:p.borderColor||"black",lineWidth:p.borderWidth||0,hidden:!w.isDatasetVisible(j),datasetIndex:j}))}),h}function Ut(w,h){h.data.datasets.forEach((l,p)=>{l.label===w.text&&(h.setDatasetVisibility(p,!h.isDatasetVisible(p)),h.update())})}function Nt(w,h){let l=w.split(".").pop()||w;return h!="none"&&(l=`${l} (${h})`),l}const gt=["diagonal","diagonal-right-left","dot","diamond","dot-dash","zigzag","zigzag-vertical","line","line-vertical","plus","cross","dash","cross-dash","disc","ring","weave","square","box","triangle","triangle-inverted","diamond-box"];let Q=0;function Gt(){Q=0}function Jt(){let w=gt[Q];return Q=(Q+1)%gt.length,w}function Kt(w,h){return{text:w,fillStyle:h!==void 0?jt.draw(h,"#aaa"):"#aaa"}}export{Zt as M,At as a,Kt as c,Nt as g,Jt as n,Ut as o,jt as p,Gt as r};
