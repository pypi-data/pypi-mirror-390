class a{entries;constructor(e){this.entries=e}static fromRows(e){return new a(e.map(r=>{const t={},s=[];return Object.entries(r).forEach(([n,i])=>{if(i==="inf")s.push(1/0);else if(isNaN(i)){t[n]=i;return}else s.push(Number(i))}),{index:t,data:s}}))}static empty(){return new a([])}static concatenate(e){return new a(e.flatMap(r=>r?.toArray()||[]))}filterByCriteria(e){const r=this.entries.filter(t=>Object.entries(e).every(([s,n])=>Object.keys(t.index).includes(s)?n.includes(t.index[s]):!0));return new a(r)}filterDataByIndex(e){const r=this.entries.map(t=>({index:t.index,data:e.map(s=>t.data[s])}));return new a(r)}groupBy(e){const r={},t={};return this.entries.forEach(s=>{const n=Object.fromEntries(e.map(u=>[u,s.index[u]])),i=Object.values(n).join("_");t[i]||(t[i]=n),r[i]?s.data.forEach((u,o)=>{r[i][o]+=Number(u)}):r[i]=s.data.slice()}),new a(Object.entries(r).map(([s,n])=>({index:t[s],data:n})))}normalize(){const e=n=>{const i=[];return this.entries.forEach(u=>{u.data.forEach((o,c)=>{const d=n(o);d<=0||(i[c]=(i[c]??0)+d)})}),i},r=e(n=>n),t=e(n=>-n),s=this.entries.map(n=>({index:n.index,data:n.data.reduce((i,u,o)=>(r[o]>0?i[o]=u/r[o]:t[o]>0?i[o]=u/t[o]:i[o]=0,i),[])}));return new a(s)}dump(){return console.table(this.entries.map(e=>({...e.index,...Object.fromEntries(e.data.map((r,t)=>[t.toString(),r]))}))),this}mapData(e){const r=this.entries.map(t=>({index:t.index,data:t.data.map(e)}));return new a(r)}mapIndex(e){const r=this.entries.map((t,s,n)=>({index:e(t.index,s,n),data:t.data}));return new a(r)}mapEntries(e){const r=this.entries.map(t=>e(t.index,t.data));return new a(r)}*[Symbol.iterator](){return this.entries[Symbol.iterator]()}forEach(e){return this.entries.forEach(e),this}reduce(e,r){return this.entries.reduce(e,r)}find(e){return this.entries.find(e)}filter(e){return new a(this.entries.filter(e))}get length(){return this.entries.length}get(e){return this.entries[e]}toArray(){return this.entries}}export{a as E};
