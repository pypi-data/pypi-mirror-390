import{j as e}from"./ui-DTFgKa_e.js";import{r as x}from"./vendor-Dje7enk0.js";import{u as z,F as q,d as M,G as Q,A as _,I as H,B as O,X as J,m as W,n as G,o as X,l as A,S as I}from"./index-tD243MzK.js";import{C as T,a as L,b as k,c as E}from"./card-Yrf7NGmU.js";import{B as v}from"./badge-D5TJqaKK.js";import{T as K,a as Y,b as F,c as U}from"./tabs-MsdvEzFO.js";import{F as Z}from"./favicon-icon-CjFK3LTq.js";import{S as V}from"./searchable-select-B-1dEETf.js";import{S as ee}from"./separator-BHFvna2Q.js";import{C as se}from"./clock-B3n8HZSe.js";import{P as B}from"./play-xuOaKpJG.js";import{C as te}from"./copy-D3PtprSx.js";import"./chevron-down-CLOcCYE1.js";import"./check-D4pdIsk3.js";function pe(){z();const{publicVMCPS:b,loading:w}=q();M();const[m,p]=x.useState(""),[o,$]=x.useState(""),[D,j]=x.useState(!1),[r,C]=x.useState([]),{vmcps:s,mcps:l,demos:n,categories:h}=x.useMemo(()=>{const t=[],d=[],a=[],i=new Set;return b?.forEach(c=>{const y=c.metadata?.category?typeof c.metadata.category=="string"?c.metadata.category:c.metadata.category.secondary||c.metadata.category.primary:null;y&&i.add(y);const S=c.metadata?.type;!S||S==="vmcp"?t.push(c):S==="mcp"?d.push(c):S==="demo"&&a.push(c)}),{vmcps:t,mcps:d,demos:a,categories:Array.from(i).sort()}},[b]);x.useEffect(()=>{const t=setTimeout(()=>{$(m)},300);return()=>clearTimeout(t)},[m]);const N=(t,d,a)=>{if(a.length>0){const c=t.metadata?.category?typeof t.metadata.category=="string"?t.metadata.category:t.metadata.category.secondary||t.metadata.category.primary:null;if(!c||!a.includes(c))return!1}if(!d.trim())return!0;const i=d.toLowerCase();return!!(t.name?.toLowerCase().includes(i)||t.description?.toLowerCase().includes(i)||t.metadata?.category&&(typeof t.metadata.category=="string"?t.metadata.category:t.metadata.category.secondary||t.metadata.category.primary)?.toLowerCase().includes(i)||t.vmcp_config?.selected_servers&&t.vmcp_config.selected_servers.map(y=>y.name?.toLowerCase()).filter(Boolean).some(y=>y.includes(i)))},P=x.useMemo(()=>{if(!m.trim()||m.length<2)return[];const t=new Set,d=m.toLowerCase();return s.forEach(a=>{a.name?.toLowerCase().includes(d)&&t.add(a.name)}),l.forEach(a=>{a.name?.toLowerCase().includes(d)&&t.add(a.name)}),n.forEach(a=>{a.name?.toLowerCase().includes(d)&&t.add(a.name)}),[...s,...l,...n].forEach(a=>{if(a.metadata?.category){const i=typeof a.metadata.category=="string"?a.metadata.category:a.metadata.category.secondary||a.metadata.category.primary;i?.toLowerCase().includes(d)&&t.add(i)}}),[...s,...l,...n].forEach(a=>{a.vmcp_config?.selected_servers&&a.vmcp_config.selected_servers.forEach(i=>{i.name?.toLowerCase().includes(d)&&t.add(i.name)})}),Array.from(t).slice(0,8)},[m,s,l,n]),u=x.useMemo(()=>s.filter(t=>N(t,o,r)),[s,o,r]),f=x.useMemo(()=>l.filter(t=>N(t,o,r)),[l,o,r]),g=x.useMemo(()=>n.filter(t=>N(t,o,r)),[n,o,r]);return w?e.jsx("div",{className:"min-h-screen text-foreground flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading discovery content..."})]})}):e.jsxs("div",{className:"min-h-screen",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-12 w-12 rounded-lg bg-primary/20 flex items-center justify-center",children:e.jsx(Q,{className:"h-8 w-8 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Discover"}),e.jsx("p",{className:"text-muted-foreground",children:"Explore vMCPs from the community"})]})]})})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(H,{type:"text",placeholder:"Search vMCPs, categories, descriptions, or servers...",value:m,onChange:t=>{p(t.target.value),j(t.target.value.length>=2)},onFocus:()=>j(m.length>=2),onBlur:()=>{setTimeout(()=>j(!1),200)},className:"pl-10 pr-10 h-11"}),m&&e.jsx(O,{variant:"ghost",size:"sm",onClick:()=>{p(""),j(!1)},className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-8 w-8 p-0 hover:bg-muted",children:e.jsx(J,{className:"h-4 w-4"})})]}),D&&P.length>0&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-card border border-border rounded-md shadow-lg z-50 max-h-60 overflow-y-auto",children:e.jsxs("div",{className:"p-2",children:[e.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2 px-2",children:"Suggestions"}),P.map((t,d)=>e.jsxs("div",{onClick:()=>{p(t),j(!1)},className:"flex items-center gap-2 px-2 py-2 rounded-sm hover:bg-muted cursor-pointer transition-colors",children:[e.jsx(se,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm truncate",children:t})]},d))]})})]}),e.jsx("div",{className:"flex-1 max-w-md",children:e.jsx(V,{options:h,value:r,onValueChange:C,placeholder:"Filter by categories...",searchPlaceholder:"Search categories...",emptyText:"No categories found.",className:"h-11"})})]}),(o||r.length>0)&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.length+f.length+g.length," result",u.length+f.length+g.length!==1?"s":""," found"]}),r.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["in ",r.length," categor",r.length===1?"y":"ies",":"]}),e.jsxs("div",{className:"flex flex-wrap gap-1 max-w-full overflow-hidden",children:[r.slice(0,5).map(t=>e.jsx(v,{variant:"outline",className:"text-[10px] px-1.5 py-0.5 flex-shrink-0",children:t},t)),r.length>5&&e.jsxs(W,{children:[e.jsx(G,{asChild:!0,children:e.jsxs(v,{variant:"outline",className:"text-[10px] px-1.5 py-0.5 cursor-pointer hover:bg-muted/50 flex-shrink-0",children:["+",r.length-5," more"]})}),e.jsx(X,{children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("p",{className:"font-medium mb-1 text-xs",children:"All selected categories:"}),e.jsx("p",{className:"text-[10px] break-words",children:r.join(", ")})]})})]})]})]})]})]}),e.jsxs(K,{defaultValue:"vmcps",className:"min-h-[600px]",children:[e.jsxs(Y,{className:"mb-4",children:[e.jsxs(F,{value:"vmcps",className:"flex items-center gap-2",children:[e.jsx(A,{className:"h-4 w-4"}),"Community",e.jsx(v,{variant:"outline",className:"ml-2 text-xs",children:u.length})]}),e.jsxs(F,{value:"mcps",className:"flex items-center gap-2",children:[e.jsx(I,{className:"h-4 w-4"}),"Official",e.jsx(v,{variant:"outline",className:"ml-2 text-xs",children:f.length})]}),e.jsxs(F,{value:"demos",className:"flex items-center gap-2",children:[e.jsx(B,{className:"h-4 w-4"}),"Demo",e.jsx(v,{variant:"outline",className:"ml-2 text-xs",children:g.length})]})]}),e.jsx(ee,{className:"mb-4"}),e.jsxs(U,{value:"vmcps",className:"space-y-6",children:[u&&u.length>0&&e.jsx("div",{children:e.jsx(R,{publicVMCPS:u,vmcp_type:"public"})}),(!u||u.length===0)&&e.jsx(T,{className:"text-center py-12 bg-gradient-to-br from-muted/20 to-muted/10 border-2 border-dashed border-muted-foreground/30",children:e.jsxs(L,{children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-muted/50 flex items-center justify-center mx-auto mb-4",children:m?e.jsx(_,{className:"h-8 w-8 text-muted-foreground"}):e.jsx(A,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx(k,{className:"text-xl font-semibold mb-2",children:o?"No vMCPs Found":"No vMCPs Available"}),e.jsx(E,{className:"text-muted-foreground",children:o?`No vMCPs match "${o}". Try a different search term.`:"Check back later for vMCPs shared by the community"})]})})]}),e.jsxs(U,{value:"mcps",className:"space-y-6",children:[f&&f.length>0&&e.jsx("div",{children:e.jsx(R,{publicVMCPS:f,vmcp_type:"mcp"})}),(!f||f.length===0)&&e.jsx(T,{className:"text-center py-12 bg-gradient-to-br from-muted/20 to-muted/10 border-2 border-dashed border-muted-foreground/30",children:e.jsxs(L,{children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-muted/50 flex items-center justify-center mx-auto mb-4",children:o?e.jsx(_,{className:"h-8 w-8 text-muted-foreground"}):e.jsx(I,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx(k,{className:"text-xl font-semibold mb-2",children:o?"No MCPs Found":"No MCPs Available"}),e.jsx(E,{className:"text-muted-foreground",children:o?`No MCPs match "${o}". Try a different search term.`:"Check back later for MCP servers shared by the community"})]})})]}),e.jsxs(U,{value:"demos",className:"space-y-6",children:[g&&g.length>0&&e.jsx("div",{children:e.jsx(R,{publicVMCPS:g,vmcp_type:"demo"})}),(!g||g.length===0)&&e.jsx(T,{className:"text-center py-12 bg-gradient-to-br from-muted/20 to-muted/10 border-2 border-dashed border-muted-foreground/30",children:e.jsxs(L,{children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-muted/50 flex items-center justify-center mx-auto mb-4",children:o?e.jsx(_,{className:"h-8 w-8 text-muted-foreground"}):e.jsx(B,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx(k,{className:"text-xl font-semibold mb-2",children:o?"No Demos Found":"No Demos Available"}),e.jsx(E,{className:"text-muted-foreground",children:o?`No demos match "${o}". Try a different search term.`:"Check back later for demo vMCPs to try out"})]})})]})]})]})}function R({publicVMCPS:b,vmcp_type:w}){const{success:m,error:p}=M(),o=z(),$=async(s,l)=>{try{if(!localStorage.getItem("access_token")){p("Please log in to install vMCPs");return}const h=`/vmcp/install/${s}/${l}`;console.log("ðŸ” Router pushing to install URL:",h),console.log("ðŸ” vMCP ID:",s),console.log("ðŸ” vMCP type:",l),o.push(h)}catch{p("Failed to start installation")}},D=async s=>{try{const l=s.metadata?.url||`${window.location.origin}/vmcp/share/${s.id}`;await navigator.clipboard.writeText(l),m("URL copied to clipboard!")}catch{p("Failed to copy URL")}},j=s=>s.startsWith("http://")||s.startsWith("https://"),r=s=>s.metadata?.icon?j(s.metadata.icon)?s.metadata.icon:`data:image/png;base64,${s.metadata.icon}`:null,C=s=>{const l=s.vmcp_config?.selected_servers?.length||0,n=s.total_tools||0,h=s.total_resources||0,N=s.total_prompts||0;return console.log("VMCP Stats Debug:",{name:s.name,total_tools:s.total_tools,total_resources:s.total_resources,total_prompts:s.total_prompts,computed:{toolsCount:n,resourcesCount:h,promptsCount:N}}),{serversCount:l,toolsCount:n,resourcesCount:h,promptsCount:N}};return b.length===0?e.jsx(T,{className:"text-center py-12 bg-gradient-to-br from-muted/20 to-muted/10 border-2 border-dashed border-muted-foreground/30",children:e.jsxs(L,{children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-muted/50 flex items-center justify-center mx-auto mb-4",children:e.jsx(Q,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx(k,{className:"text-xl font-semibold mb-2",children:"No Public vMCPs Available"}),e.jsx(E,{className:"text-muted-foreground",children:"Check back later for vMCPs shared by the community"})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:b.map((s,l)=>e.jsxs("div",{className:"group relative rounded-xl border transition-all duration-200 shadow-sm cursor-pointer hover:shadow-lg hover:border-primary/50 bg-card overflow-hidden h-72 flex flex-col",onClick:()=>$(s.id,w),style:{animationDelay:`${l*100}ms`},children:[e.jsxs("div",{className:"p-4 pb-0 flex flex-col flex-1",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[e.jsxs("div",{className:"h-10 w-10 rounded-xl bg-gradient-to-br from-primary/20 to-primary/10 flex items-center justify-center overflow-hidden shadow-sm",children:[r(s)?e.jsx("img",{src:r(s),alt:s.name,className:"h-6 w-6 object-contain",onError:n=>{n.currentTarget.style.display="none",n.currentTarget.nextElementSibling?.classList.remove("hidden")}}):null,w==="mcp"?e.jsx(I,{className:`h-5 w-5 text-primary ${r(s)?"hidden":""}`}):w==="demo"?e.jsx(B,{className:`h-5 w-5 text-primary ${r(s)?"hidden":""}`}):e.jsx(A,{className:`h-5 w-5 text-primary ${r(s)?"hidden":""}`})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"mb-2",children:s.name.startsWith("@")?e.jsxs("div",{className:"flex flex-col flex-1 min-w-0",children:[e.jsxs("span",{className:"text-xs text-muted-foreground font-medium",children:[s.name.split("/")[0],"/"]}),e.jsx("h4",{className:"font-semibold text-foreground text-sm truncate",children:s.name.split("/").slice(1).join("/")})]}):e.jsx("h4",{className:"font-semibold text-foreground text-sm truncate",children:s.name})})})]}),e.jsx("div",{className:"mb-2",children:s.metadata?.category&&e.jsx(v,{variant:"outline",className:"text-[10px] text-muted-foreground bg-muted/60 px-2 py-1 rounded-md font-medium w-fit inline-block",children:typeof s.metadata.category=="string"?s.metadata.category:s.metadata.category.secondary||"Category"})}),s.description&&e.jsx("p",{className:"text-xs pb-2 text-muted-foreground leading-relaxed line-clamp-3 min-h-[3rem]",children:s.description}),e.jsx("div",{className:"mb-3 min-h-[32px]",children:s.vmcp_config?.selected_servers&&s.vmcp_config.selected_servers.length>0?e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[s.vmcp_config.selected_servers.slice(0,3).map((n,h)=>e.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg bg-muted/40 hover:bg-muted/60 transition-colors",children:[e.jsx(Z,{url:n.url,faviconUrl:n.favicon_url,className:"h-3 w-3",size:12}),e.jsx("span",{className:"text-xs font-medium truncate max-w-40",children:n.name})]},h)),s.vmcp_config.selected_servers.length>3&&e.jsx("div",{className:"flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg bg-muted/40",children:e.jsxs("span",{className:"text-xs font-medium text-muted-foreground",children:["+",s.vmcp_config.selected_servers.length-3]})})]}):e.jsx("div",{className:"min-h-[32px]"})})]}),e.jsx("div",{className:"px-4 py-4 border-t border-border/30 mt-auto",children:e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium text-foreground text-xs",children:C(s).toolsCount}),e.jsx("span",{className:"text-muted-foreground text-xs",children:"tools"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium text-foreground text-xs",children:C(s).promptsCount}),e.jsx("span",{className:"text-muted-foreground text-xs",children:"prompts"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"font-medium text-foreground text-xs",children:C(s).resourcesCount}),e.jsx("span",{className:"text-muted-foreground text-xs",children:"resources"})]})]}),e.jsxs(W,{children:[e.jsx(G,{asChild:!0,children:e.jsx(O,{size:"sm",variant:"ghost",onClick:n=>{n.stopPropagation(),D(s)},className:"h-8 w-8 p-0 rounded-full transition-all duration-200",title:s.metadata?.url?"Copy URL":"No URL to copy",disabled:!s.metadata?.url,children:e.jsx(te,{className:"h-4 w-4"})})}),e.jsx(X,{children:e.jsxs("p",{className:"text-xs",children:[" ",s.metadata?.url?"Copy MCP URL":"Error: no MCP URL to copy"]})})]})]})})]},s.id))})}export{pe as default};
//# sourceMappingURL=DiscoverPage-9LwSMPPX.js.map
