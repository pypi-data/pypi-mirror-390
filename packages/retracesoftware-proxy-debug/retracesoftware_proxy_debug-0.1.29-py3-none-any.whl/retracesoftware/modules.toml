[_frozen_importlib_external]
    # "_frozen_importlib_external": {
    #   "comment": {
    #     "with_state": {
    #       "disabled": ["_path_stat"]
    #     }
    #   }
    # },

    # "_imp": {
    #   "patch_extension_exec": ["exec_dynamic", "exec_builtin"],
    #   "comment": {
    #     "with_state": {
    #       "internal": ["create_dynamic"]
    #     }
    #   }
    # },

[bdb.type_attributes]
Bdb.disable = "trace_dispatch"

[sys]
disable = "excepthook"
    
[importlib] 
disable = "import_module"

    # "importlib._bootstrap": {
    #   "comment": {
    #     "with_state": {
    #       "internal": [
    #         "_load_unlocked",
    #         "_find_spec",
    #         "_lock_unlock_module",
    #         "_get_module_lock"]
    #     }
    #   }
    # },

[encodings]
disable = "search_function"

[enum]
immutable = "Enum"

[os]
immutable = ["stat_result", "terminal_size", "statvfs_result"]

    # "mmap": {
    #   "proxy": [
    #     "mmapXXX"
    #   ]
    # },

[types]
patch_hash = "FunctionType"
immutable = ["TracebackType", "ModuleType"]

[builtins]
patch_hash = "object"
immutable = ["BaseException", "memoryview", "int", "float", "complex", "str", "bytes", "bool", "bytearray", 
            "type", "slice"]

[_thread]
proxy = ["allocate", "allocate_lock", "RLock"]
patch_start_new_thread = ["start_new_thread", "start_new"]

[_datetime]
immutable = ["datetime", "tzinfo", "timezone"]

[_datetime.type_attributes]
datetime.proxy = ["now", "utcnow", "today"]

[time]
immutable = "struct_time"
proxy = ["perf_counter", "time", "gmtime", "localtime", "monotonic", "monotonic_ns", "time_ns"]

    # "io": {
    #   "comment": {
    #     "proxy": ["open_code", "open"]
    #   },
    #   "path_predicates": {
    #     "open_code": "path",
    #     "open": "file"
    #   },
    #   "patchtype": {
    #     "FileIO": {
    #       "readinfo": "retracesoftware.install.edgecases.readinto"
    #     },
    #     "BufferedReader": {
    #       "readinfo": "retracesoftware.install.edgecases.readinto"
    #     },
    #     "BufferedRandom": {
    #       "readinfo": "retracesoftware.install.edgecases.readinto"
    #     }
    #   }
    # },

[pathlib]
immutable = "PosixPath"

[posix]
immutable = ["times_result", "statvfs_result", "uname_result", "stat_result", "terminal_size"]
ignore = ["fork", "register_at_fork", "basename", "readlink", "strerror", "listdir", "_path_normpath", "DirEntry"]
default = "try_proxy"

[posix.wrap]
fork_exec = "retracesoftware.install.edgecases.fork_exec"
posix_spawn = "retracesoftware.install.edgecases.posix_spawn"

[_posixsubprocess]
default = "try_proxy"

[fnctl]
default = "try_proxy"

[_signal]
default = "try_proxy"

[_socket]
ignore = "CAPI"
immutable = ["error", "herror", "gaierror", "timeout"]
proxy = ["socket", 
         "close",
         "dup",
         "getaddrinfo",
         "getdefaulttimeout",
         "gethostbyaddr",
         "gethostbyname",
         "gethostbyname_ex",
         "gethostname",
         "getnameinfo",
         "getprotobyname",
         "getservbyname",
         "getservbyport",
         "has_ipv6",
         "if_indextoname",
         "if_nameindex",
         "if_nametoindex",
         "setdefaulttimeout",
         "sethostname",
         "socketpair",
         "timeout"]
# default = "try_proxy"

[_socket.patch_class.socket]
recvfrom_into = "retracesoftware.install.edgecases.recvfrom_into"
recv_into = "retracesoftware.install.edgecases.recv_into"
recvmsg_into = "retracesoftware.install.edgecases.recvmsg_into"

[select]
proxy = ["kevent", "kqueue", "poll", "epoll", "select"]

default = "try_proxy"

[_sqlite3]
default = "try_proxy"

[_ssl]
default = "try_proxy"
proxy = "_SSLSocket"

[_ssl.patch_class._SSLSocket]
read = "retracesoftware.install.edgecases.read"



#     "_ssl": {
#       "proxy_all_except": [],

#       "proxy_functions": ".*",
#       "comment": {
#         "proxy_types": [
#           "MemoryBIO",
#           "_SSLSocket",
#           "_SSLContext"
#           ],
#           "wrap": {
#             "_SSLSocket.write": "write"
#           }
#         },
#       "patchtype": {
#         "_SSLSocket": {
#           "read": "retracesoftware.install.edgecases.read"
#         }
#       }
#     },

[_random]
default = "try_proxy"

#     "_random": {
#       "proxy_all_except": [],
#       "proxy_types": [
#         "Random"
#       ],
#       "proxy_functions": ".*"
#     },

#     "_multiprocessing": {
#       "proxy": ["sem_unlink", "SemLock"]
#     },

# ["multiprocessing.context"]
# proxy = "BaseContext"

[_multiprocessing]
proxy = ["SemLock", "sem_unlink"]


#     "multiprocessing.context": { 
#       "comment": {    
#         "proxy": ["_default_context"]
#       }
#     },

#     "PIL._imaging": {
#       "map_buffer": "ignore",
#       "*": "proxy_if_function"
#     },
#     "psycopg2._psycopg": {
#       "proxy_all_except": ["Error"]
#     },

#     "_weakrefset": {
#       "WeakSet": "sync_type",
#       "_IterationGuard": "sync_type"
#     },
#     "_collections": {
#       "sync_types": [
#         "deque"
#       ]
#     },
#     "_queue": {
#       "sync_types": [
#         "SimpleQueue"
#       ]
#     }
#   }
# }
