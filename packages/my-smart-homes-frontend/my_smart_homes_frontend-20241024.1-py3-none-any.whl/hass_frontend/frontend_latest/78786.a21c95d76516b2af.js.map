{"version":3,"file":"78786.a21c95d76516b2af.js","sources":["https://raw.githubusercontent.com/home-assistant/frontend/20241024.1/src/panels/lovelace/cards/energy/hui-energy-usage-graph-card.ts"],"names":["colorPropertyMap","to_grid","to_battery","from_grid","used_grid","used_solar","used_battery","HuiEnergyUsageGraphCard","_decorate","customElement","_initialize","_SubscribeMixin","F","constructor","args","d","kind","decorators","property","attribute","key","value","state","startOfToday","endOfToday","getEnergyDataCollection","this","hass","_config","collection_key","subscribe","data","_getStatistics","config","changedProps","hasConfigChanged","size","has","html","title","classMap","_chartData","_createOptions","_start","_end","locale","_compareStart","_compareEnd","some","dataset","length","isToday","localize","nothing","total","num","formatNumber","memoizeOne","start","end","compareStart","compareEnd","commonOptions","getCommonOptions","_formatTotal","tooltip","formatter","params","Array","isArray","sort","a","b","aValue","bValue","componentIndex","energyData","datasets","statIds","source","prefs","energy_sources","type","flowFrom","flow_from","push","stat_energy_from","flowTo","flow_to","stat_energy_to","from_battery","solar","computedStyles","getComputedStyle","colorIndices","Object","keys","forEach","values","id","idx","labels","startCompare","endCompare","statsCompare","_processDataSet","statsMetadata","firstId","stack","stats","fillDataGapsAndRoundCaps","statistics","statisticsMetaData","statIdsByCat","compare","combinedData","summedData","entries","sum","includes","add","totalStats","sets","set","stat","change","undefined","val","grid_to_battery","battery_to_grid","noOfSources","total_from_grid","allKeys","sources","concat","uniqueKeys","from","Set","Number","compareOffset","getTime","statId","points","dataPoint","name","getStatisticLabel","barMaxWidth","itemStyle","borderColor","getEnergyColor","themes","darkMode","color","static","css","SubscribeMixin","LitElement"],"mappings":"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"}