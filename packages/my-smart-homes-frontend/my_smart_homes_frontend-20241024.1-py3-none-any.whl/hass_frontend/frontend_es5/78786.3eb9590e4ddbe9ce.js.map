{"version":3,"file":"78786.3eb9590e4ddbe9ce.js","sources":["https://raw.githubusercontent.com/home-assistant/frontend/20241024.1/src/panels/lovelace/cards/energy/hui-energy-usage-graph-card.ts"],"names":["colorPropertyMap","to_grid","to_battery","from_grid","used_grid","used_solar","used_battery","HuiEnergyUsageGraphCard","_decorate","customElement","_initialize","_SubscribeMixin","F","constructor","args","d","kind","decorators","property","attribute","key","value","state","startOfToday","endOfToday","_this$_config","getEnergyDataCollection","this","hass","_config","collection_key","subscribe","data","_getStatistics","config","changedProps","hasConfigChanged","size","has","html","_t","_","title","_t2","classMap","_chartData","_createOptions","_start","_end","locale","_compareStart","_compareEnd","some","dataset","length","_t3","isToday","localize","nothing","total","num","formatNumber","memoizeOne","start","end","compareStart","compareEnd","commonOptions","getCommonOptions","_formatTotal","Object","assign","tooltip","formatter","params","_commonOptions$toolti","_commonOptions$toolti2","Array","isArray","sort","a","b","_a$value","_b$value","aValue","bValue","componentIndex","call","energyData","datasets","statIds","source","prefs","energy_sources","type","flowFrom","flow_from","push","stat_energy_from","flowTo","flow_to","stat_energy_to","from_battery","solar","computedStyles","getComputedStyle","colorIndices","keys","forEach","values","id","idx","labels","startCompare","endCompare","statsCompare","_processDataSet","statsMetadata","_statIds$from_grid$","_statIds$from_grid","firstId","stack","stats","fillDataGapsAndRoundCaps","statistics","statisticsMetaData","statIdsByCat","compare","combinedData","summedData","entries","sum","includes","add","totalStats","sets","set","stat","change","undefined","val","grid_to_battery","battery_to_grid","_summedData$to_grid","_summedData$to_batter","_summedData$from_grid","_summedData$from_grid2","_summedData$from_grid3","noOfSources","total_from_grid","allKeys","sources","concat","uniqueKeys","from","Set","Number","compareOffset","getTime","statId","_colorIndices$type","_colorIndices$type2","points","dataPoint","name","getStatisticLabel","barMaxWidth","itemStyle","borderColor","getEnergyColor","themes","darkMode","color","static","css","_t4","SubscribeMixin","LitElement"],"mappings":"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"}