# Agent OS Test Generation Framework v3 - Core Entry Point

## ğŸš¨ **CRITICAL FRAMEWORK RESTORATION**

ğŸ›‘ VALIDATE-GATE: Framework Core Entry Requirements
- [ ] **MANDATORY FIRST**: Command language glossary read and acknowledged âœ…/âŒ
- [ ] V2 failure analysis understood (22% pass rate) âœ…/âŒ
- [ ] V3 restoration mission acknowledged âœ…/âŒ
- [ ] Binding commitment contract readiness confirmed âœ…/âŒ

âš ï¸ **MANDATORY FIRST STEP**: Read [core/command-language-glossary.md](core/command-language-glossary.md)
ğŸš¨ FRAMEWORK-VIOLATION: If proceeding without command glossary acknowledgment

**Mission**: Restore 80%+ first-run pass rate by fixing V2's catastrophic regression  
**V2 Failure**: 22% pass rate due to lost archive capabilities  
**V3 Solution**: Hybrid architecture with archive depth + path-specific guidance  
**Success Metric**: 80%+ pass rate matching archive performance  

---

## ğŸ›‘ **BINDING COMMITMENT CONTRACT EXECUTION**

âš ï¸ MUST-READ: Framework commitment is binding and non-negotiable

**By using this framework, AI assistants commit to:**

1. **ğŸ” DEEP ANALYSIS EXECUTION**: Execute complete AST parsing, attribute detection, and signature extraction (not surface grep)
2. **ğŸ›¤ï¸ PATH-SPECIFIC ADHERENCE**: Follow unit (mock external dependencies) or integration (real APIs) path consistently
3. **ğŸ“Š MANDATORY PROGRESS TRACKING**: Update progress table after each phase with evidence
4. **ğŸš¨ AUTOMATED VALIDATION**: Execute `validate-test-quality.py` with exit code 0 for Phase 8 completion
5. **ğŸš« NO FRAMEWORK SHORTCUTS**: Complete all phases systematically without bypassing analysis

**VIOLATION = FRAMEWORK FAILURE**: Shortcuts cause 22% pass rates. Complete execution achieves 80%+.

---

## ğŸ—ï¸ **V3 HYBRID ARCHITECTURE**

### **ğŸ“ Framework Structure**
```
v3/
â”œâ”€â”€ framework-core.md              # This file - entry point + contract
â”œâ”€â”€ phase-navigation.md            # Quick checklist navigation
â”œâ”€â”€ phases/                        # DETAILED phase guidance (archive depth)
â”‚   â”œâ”€â”€ phase-1-method-verification.md    # AST parsing + attribute detection
â”‚   â”œâ”€â”€ phase-2-logging-analysis.md       # Comprehensive logging strategy
â”‚   â”œâ”€â”€ phase-3-dependency-analysis.md    # Complete mocking/API strategy
â”‚   â”œâ”€â”€ phase-4-usage-patterns.md         # Deep call pattern analysis
â”‚   â”œâ”€â”€ phase-5-coverage-analysis.md      # Branch + edge case planning
â”‚   â”œâ”€â”€ phase-6-pre-generation.md         # Enhanced validation + readiness
â”‚   â”œâ”€â”€ phase-7-post-generation.md        # Metrics collection
â”‚   â””â”€â”€ phase-8-quality-enforcement.md    # Automated validation gates
â”œâ”€â”€ paths/                         # PATH-SPECIFIC guidance
â”‚   â”œâ”€â”€ unit-path.md              # Unit: Mock everything, isolation focus
â”‚   â””â”€â”€ integration-path.md       # Integration: Real APIs, end-to-end focus
â”œâ”€â”€ enforcement/                   # STRENGTHENED enforcement
â”‚   â”œâ”€â”€ violation-detection.md    # Pattern recognition + responses
â”‚   â”œâ”€â”€ quality-gates.md         # Automated gate validation
â”‚   â””â”€â”€ table-enforcement.md     # Mandatory progress tracking
â””â”€â”€ archive-migration/            # Migration documentation
    â”œâ”€â”€ v2-gaps-analysis.md       # What v2 lost from archive
    â””â”€â”€ restoration-checklist.md  # What was restored in v3
```

---

## ğŸš€ **FRAMEWORK EXECUTION FLOW**

### **ğŸ¯ PHASE 0: SETUP & PATH SELECTION**
1. **Environment Validation**: Verify workspace, git status, Python environment
2. **Target Analysis**: Analyze production file complexity and scope
3. **PATH SELECTION**: Choose Unit (mock external dependencies) or Integration (real APIs)
4. **Metrics Baseline**: Execute pre-generation metrics collection

### **ğŸ” PHASE 1: DEEP METHOD VERIFICATION**
**CRITICAL**: This phase prevents 22% failures through comprehensive analysis
- **AST Parsing**: Extract all function signatures with parameter counts
- **Attribute Detection**: Find all `object.attribute` access patterns
- **Signature Analysis**: Validate function call patterns and parameters
- **Mock Completeness**: Document all required mock attributes

**Path Integration**:
- **Unit Path**: Plan comprehensive mocking for all dependencies
- **Integration Path**: Plan real API usage with test credentials

### **ğŸ“ PHASES 2-6: COMPREHENSIVE ANALYSIS**
Each phase includes:
- **Archive-Depth Commands**: Restored from successful archive framework
- **Path-Specific Guidance**: Unit (mock) vs Integration (real) strategies
- **Mandatory Evidence**: Progress table updates with specific evidence
- **Quality Gates**: Validation checkpoints to prevent shortcuts

### **ğŸš¨ PHASE 8: AUTOMATED QUALITY ENFORCEMENT - ZERO TOLERANCE**
ğŸš¨ ZERO-TOLERANCE-ENFORCEMENT: ALL gates must pass - NO EXCEPTIONS
ğŸš¨ SUCCESS-CRITERIA-VIOLATION: Partial success = complete failure

**ğŸš¨ ABSOLUTE QUALITY REQUIREMENTS**:
- âœ… **100% test pass rate** (no failed tests allowed)
- âœ… **10.0/10 Pylint score** (exact requirement, not 9.15/10)
- âœ… **0 MyPy errors** (zero tolerance for type errors)
- âœ… **Black formatted** (consistent code style required)
- âœ… **80%+ coverage minimum** (90% target, 80% absolute minimum)

ğŸš¨ FRAMEWORK-VIOLATION: If declaring success with ANY quality gate failure
**MANDATORY**: Execute `validate-test-quality.py` with exit code 0

---

## ğŸ“Š **PROGRESS TRACKING TABLE**

**MANDATORY**: Update this table after each phase completion

| Phase | Status | Evidence | Commands | Validation | Gate |
|-------|--------|----------|----------|------------|------|
| 0: Pre-Generation Setup | âŒ | None | 0/5 | Manual | âŒ |
| 0B: Pre-Generation Metrics | âŒ | None | 0/1 | JSON Required | âŒ |
| 0C: Target Validation | âŒ | None | 0/5 | Manual | âŒ |
| 1: Method Verification | âŒ | None | 0/4 | Manual | âŒ |
| 2: Logging Analysis | âŒ | None | 0/3 | Manual | âŒ |
| 3: Dependency Analysis | âŒ | None | 0/4 | Manual | âŒ |
| 4: Usage Patterns | âŒ | None | 0/3 | Manual | âŒ |
| 5: Coverage Analysis | âŒ | None | 0/2 | Manual | âŒ |
| 6: Pre-Generation Validation | âŒ | None | 0/8 | Manual | âŒ |
| 7: Post-Generation Metrics | âŒ | None | 0/1 | JSON Required | âŒ |
| 8: **AUTOMATED QUALITY ENFORCEMENT** | âŒ | None | 0/5 | **SCRIPT EXIT CODE 0** | âŒ |

### **ğŸ“‹ TABLE FORMATTING STANDARDS**
- Use markdown table format with proper alignment
- Mark completed phases with âœ… status
- Include specific evidence (counts, findings, results)
- Update command completion counts (e.g., "3/4" for 3 of 4 commands executed)
- Mark validation type (Manual, JSON Required, AUTOMATED)
- Gate column shows âœ… only when phase fully complete

---

## ğŸ›¤ï¸ **PATH-SPECIFIC EXECUTION**

### **ğŸ§ª UNIT TEST PATH**
**When to Choose**: Single module testing, dependency isolation required
**Strategy**: Mock everything - no real APIs, complete isolation
**Success Pattern**: 90%+ coverage through comprehensive mocking

**Key Requirements**:
- Mock ALL external dependencies (requests, os, sys, etc.)
- Mock ALL internal modules (honeyhive.*)
- Mock ALL configuration and environment access
- Complete mock object validation (all attributes from Phase 1)

**Reference**: [Unit Path Detailed Guidance](paths/unit-path.md)

### **ğŸ”— INTEGRATION TEST PATH**
**When to Choose**: Multi-component testing, end-to-end validation required
**Strategy**: Real APIs - authentic system integration testing
**Success Pattern**: 80%+ coverage through real system validation

**Key Requirements**:
- Use REAL HoneyHive APIs with test credentials
- Use REAL configuration with test environment
- Use REAL logging for actual output validation
- Implement proper resource cleanup

**Reference**: [Integration Path Detailed Guidance](paths/integration-path.md)

---

## ğŸš¨ **CRITICAL SUCCESS FACTORS**

### **ğŸ¯ 80%+ Pass Rate Requirements**
1. **Complete Phase 1 Analysis**: AST parsing catches all signatures and attributes
2. **Path-Specific Execution**: Unit mocks external dependencies, Integration uses real APIs
3. **Mock Completeness**: All attributes identified in Phase 1 included in mocks
4. **Signature Accuracy**: Function calls match exact parameter counts from analysis
5. **Automated Validation**: Phase 8 script achieves exit code 0

### **ğŸ’” 22% Failure Prevention**
**V2 Failures That V3 MUST Prevent**:
- Missing mock attributes (`config`, `is_main_provider`)
- Wrong function signatures (`get_tracer_logger` parameter count)
- Incomplete dependency mocking
- Framework shortcuts and bypasses

---

## ğŸ›¡ï¸ **ENFORCEMENT MECHANISMS**

### **ğŸš¨ Automated Quality Gates**
- **Phase 8 Script**: `validate-test-quality.py` must return exit code 0
- **Progress Tracking**: Mandatory table updates prevent shortcuts
- **Violation Detection**: Specific patterns trigger enforcement responses

### **ğŸ“‹ Mandatory Evidence Requirements**
Each phase requires specific evidence:
- **Phase 1**: Function count, attribute list, signature analysis
- **Phase 2**: Logging call count, mock strategy documentation
- **Phase 3**: Dependency list, mocking plan, path-specific strategy
- **Phase 8**: Script output with all quality targets met

---

## ğŸ”„ **FRAMEWORK NAVIGATION**

### **ğŸš€ Quick Start**
1. **Read This File**: Understand commitment contract and architecture
2. **Choose Path**: Unit (mock external dependencies) or Integration (real APIs)
3. **Follow Navigation**: Use [phase-navigation.md](phase-navigation.md) for checklist
4. **Deep Dive**: Reference detailed phase files in `phases/` directory
5. **Path Guidance**: Follow path-specific strategies in `paths/` directory

### **ğŸ“š Detailed Guidance**
- **Phase Details**: Each phase has comprehensive guidance in `phases/`
- **Path Strategies**: Unit vs Integration strategies in `paths/`
- **Enforcement**: Violation detection and quality gates in `enforcement/`
- **Migration**: V2 gaps analysis and restoration docs in `archive-migration/`

---

## âœ… **SUCCESS CRITERIA**

**Framework execution is successful when:**
1. âœ… All 8 phases completed with evidence
2. âœ… Progress table shows all phases âœ…
3. âœ… Path-specific strategy followed consistently
4. âœ… `validate-test-quality.py` returns exit code 0
5. âœ… Generated tests achieve 80%+ pass rate
6. âœ… No framework shortcuts or bypasses

**Framework failure indicators:**
- Phases marked complete without evidence
- Progress table not updated
- Mixed path strategies (unit + integration approaches)
- Phase 8 script failure (exit code â‰  0)
- Generated tests with <80% pass rate

---

## ğŸ¯ **FRAMEWORK COMMITMENT**

**This v3 framework restores the archive's proven 80%+ success rate through:**
- **Deep Analysis**: AST parsing and attribute detection
- **Path Clarity**: Clear unit (mock) vs integration (real) strategies  
- **Strong Enforcement**: Mandatory tables and automated validation
- **Comprehensive Guidance**: Detailed phase files with archive depth

**AI assistants using this framework commit to complete, systematic execution without shortcuts to achieve 80%+ first-run pass rates.**
