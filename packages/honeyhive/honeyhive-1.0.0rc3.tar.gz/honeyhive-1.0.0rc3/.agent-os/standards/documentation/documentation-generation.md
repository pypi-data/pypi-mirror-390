# Documentation Generation System

**Date**: 2025-09-04  
**Status**: Active  
**Scope**: All integration documentation  

## Overview

The HoneyHive Python SDK uses an automated template generation system to create consistent, high-quality integration documentation. This system ensures all provider integration pages follow the same structure, include all required content, and maintain consistency across the entire documentation suite.

## üéØ System Architecture

### Template-Based Generation

The documentation generation system uses a formal template approach:

```
docs/_templates/
‚îú‚îÄ‚îÄ generate_provider_docs.py              # Generation script
‚îú‚îÄ‚îÄ multi_instrumentor_integration_formal_template.rst  # Base template
‚îú‚îÄ‚îÄ template_variables.md                  # Variable documentation
‚îî‚îÄ‚îÄ README.md                             # Usage instructions
```

### Generated Documentation Structure

Each integration page follows the **mandatory 4-tab structure**:

1. **Installation**: Package installation with pip commands
2. **Basic Setup**: Simple working example with environment variables
3. **Advanced Usage**: Real-world patterns with `@trace` decorator and business context
4. **Troubleshooting**: Common issues + Environment Configuration (item 4)

## üöÄ Usage Commands

### Generate Single Provider

```bash
# Generate documentation for a specific provider
python docs/_templates/generate_provider_docs.py --provider openai
python docs/_templates/generate_provider_docs.py --provider anthropic
python docs/_templates/generate_provider_docs.py --provider google-adk
```

### Generate All Providers

```bash
# Regenerate all integration documentation
cd docs
for provider in openai anthropic google-ai google-adk bedrock azure-openai mcp; do
    python _templates/generate_provider_docs.py --provider $provider
done
```

### Available Providers

Current supported providers:
- `openai` - OpenAI GPT models
- `anthropic` - Anthropic Claude models
- `google-ai` - Google Gemini models
- `google-adk` - Google Agent Development Kit
- `bedrock` - AWS Bedrock multi-model
- `azure-openai` - Azure-hosted OpenAI
- `mcp` - Model Context Protocol

## üìã Template Variables Reference

### Core Provider Variables

| Variable | Description | Example |
|----------|-------------|---------|
| `PROVIDER_NAME` | Full provider display name | `"OpenAI"` |
| `PROVIDER_KEY` | URL-safe provider identifier | `"openai"` |
| `PROVIDER_MODULE` | Python module name | `"openai"` |
| `PROVIDER_SDK` | Required SDK package | `"openai>=1.0.0"` |
| `PROVIDER_EXCEPTION` | Provider-specific exception | `"openai.OpenAIError"` |
| `PROVIDER_API_KEY_NAME` | Environment variable name | `"OPENAI_API_KEY"` |

### Instrumentor Variables

| Variable | Description | Example |
|----------|-------------|---------|
| `OPENINFERENCE_PACKAGE` | OpenInference package name | `"openinference-instrumentation-openai"` |
| `OPENINFERENCE_IMPORT` | Import path | `"openinference.instrumentation.openai"` |
| `OPENINFERENCE_CLASS` | Instrumentor class name | `"OpenAIInstrumentor"` |
| `OPENLLMETRY_PACKAGE` | OpenLLMetry package name | `"opentelemetry-instrumentation-openai"` |
| `OPENLLMETRY_AVAILABLE` | Whether OpenLLMetry supports provider | `true/false` |

### Code Example Variables

| Variable | Description | Purpose |
|----------|-------------|---------|
| `BASIC_USAGE_EXAMPLE` | Simple provider usage | Basic Setup tab content |
| `ADVANCED_FUNCTION_NAME` | Function name for advanced example | Advanced Usage tab |
| `ADVANCED_IMPLEMENTATION` | Complex usage pattern | Advanced Usage tab content |
| `USE_CASE_NAME` | Business context identifier | Span enrichment metadata |
| `STRATEGY_NAME` | Provider-specific strategy | Span enrichment metadata |
| `MODELS_USED` | List of models in example | Span enrichment metadata |
| `RETURN_VALUE` | Function return example | Advanced Usage completion |

### Dynamic Variables

| Variable | Description | Generated By |
|----------|-------------|--------------|
| `TITLE_UNDERLINE` | RST title underline | Auto-generated to match title length |
| `SEE_ALSO_LINKS` | Navigation links | Provider-specific cross-references |

## üîß Adding New Providers

### 1. Provider Configuration

Add provider configuration to `generate_provider_docs.py`:

```python
"new-provider": {
    "PROVIDER_NAME": "New Provider",
    "PROVIDER_KEY": "new-provider", 
    "PROVIDER_MODULE": "new_provider",
    "PROVIDER_SDK": "new-provider>=1.0.0",
    "PROVIDER_EXCEPTION": "new_provider.ProviderError",
    "PROVIDER_API_KEY_NAME": "NEW_PROVIDER_API_KEY",
    
    "OPENINFERENCE_PACKAGE": "openinference-instrumentation-new-provider",
    "OPENINFERENCE_IMPORT": "openinference.instrumentation.new_provider", 
    "OPENINFERENCE_CLASS": "NewProviderInstrumentor",
    
    "BASIC_USAGE_EXAMPLE": '''client = new_provider.Client()
    response = client.generate("Hello world")''',
    
    "ADVANCED_FUNCTION_NAME": "process_documents",
    "USE_CASE_NAME": "document_processing",
    "STRATEGY_NAME": "batch_processing",
    "MODELS_USED": '["model-v1", "model-v2"]',
    "RETURN_VALUE": '{"processed": len(results), "success": True}',
    
    # ... additional configuration
}
```

### 2. Environment Configuration

Add environment variables to the provider environment configs:

```python
"new-provider": {
    "HAS_SPECIFIC_ENV_VARS": True,
    "ENV_VARS": [
        "# HoneyHive configuration", 
        "export HH_API_KEY=\"your-honeyhive-api-key\"",
        "export HH_PROJECT=\"new-provider-integration\"",
        "export HH_SOURCE=\"production\"",
        "",
        "# New Provider configuration",
        "export NEW_PROVIDER_API_KEY=\"your-new-provider-key\""
    ]
}
```

### 3. Generate Documentation

```bash
python docs/_templates/generate_provider_docs.py --provider new-provider
```

### 4. Update Toctree

Add to `docs/how-to/index.rst`:

```rst
.. toctree::
   :maxdepth: 1

   integrations/openai
   integrations/new-provider  # Add here
   integrations/anthropic
```

## üé® Template Structure Standards

### Dual Instrumentor Support

For providers supporting both OpenInference and OpenLLMetry:
- **8 total tabs**: 4 for OpenInference + 4 for OpenLLMetry
- **Instrumentor selector**: Top-level tabs to choose between instrumentors
- **Consistent structure**: Same 4-tab pattern within each instrumentor section

### Single Instrumentor Support

For providers with limited instrumentor support (e.g., Google ADK):
- **4 total tabs**: OpenInference only
- **Unavailability note**: Clear explanation why OpenLLMetry isn't available
- **Same tab structure**: Installation, Basic Setup, Advanced Usage, Troubleshooting

### Content Requirements

#### Installation Tab
- **MUST** show `pip install honeyhive[provider]` first
- **MUST** include alternative manual installation
- **MUST** be copy-paste ready

#### Basic Setup Tab  
- **MUST** be a complete, working example
- **MUST** show instrumentor initialization
- **MUST** demonstrate automatic tracing
- **MUST** include environment variables setup (.env file example)
- **MUST** include basic error handling with provider-specific exceptions
- **MUST** show secure API key usage (environment variables, not hardcoded)

#### Advanced Usage Tab
- **MUST** use `@trace` decorator with `event_type` parameter
- **MUST** use `enrich_span()` to add business context metadata
- **MUST** show multiple API calls in one function
- **MUST** include comprehensive error handling with span enrichment
- **MUST** demonstrate real-world patterns (business context, multiple models, result metadata)

#### Troubleshooting Tab
- **MUST** include common integration issues (items 1-3)
- **MUST** include Environment Configuration as item 4
- **MUST** provide working solutions for each issue
- **MUST** include provider-specific troubleshooting guidance

## üîç Quality Assurance

### Automated Validation

The generation system includes built-in quality checks:

1. **Template Variable Resolution**: All `{{VARIABLE}}` placeholders must be resolved
2. **Title Underline Matching**: RST title underlines automatically sized to match titles
3. **Environment Configuration Placement**: Automatically added to troubleshooting sections
4. **HTML Structure Validation**: Proper div nesting and tab functionality

### Manual Verification Checklist

Before committing generated documentation:

- [ ] **Tab Structure**: All required tabs present and functional
- [ ] **Code Examples**: All examples are syntactically correct and executable
- [ ] **Environment Variables**: Complete .env file examples in Basic Setup
- [ ] **Error Handling**: Provider-specific exceptions handled in both Basic and Advanced tabs
- [ ] **Business Context**: Advanced tab demonstrates real-world metadata usage
- [ ] **Security**: No hardcoded API keys, environment variables used throughout
- [ ] **Cross-References**: All internal links resolve correctly
- [ ] **Sphinx Build**: Documentation builds without warnings

### Testing Generated Content

```bash
# Validate RST syntax
python -m sphinx -b html -W docs docs/_build/html

# Test code examples (if validation tools available)
python docs/utils/test-examples.py docs/how-to/integrations/

# Verify all template variables resolved
grep -r "{{.*}}" docs/how-to/integrations/ || echo "All variables resolved"
```

## üö® Troubleshooting

### Common Issues

#### Template Variables Not Resolved
**Symptom**: `{{VARIABLE_NAME}}` appears in generated files
**Solution**: Add missing variable to provider configuration in `generate_provider_docs.py`

#### Title Underline Length Mismatch
**Symptom**: Sphinx warnings about title underline too short/long
**Solution**: The system auto-generates correct underlines; regenerate the file

#### Missing Environment Configuration
**Symptom**: No environment variables in troubleshooting section
**Solution**: Ensure provider has `HAS_SPECIFIC_ENV_VARS: True` and `ENV_VARS` defined

#### Broken Tab Functionality
**Symptom**: Tabs don't switch or display incorrectly
**Solution**: Verify HTML structure and JavaScript are included at end of template

### Emergency Procedures

If generation system fails:
1. **Check provider configuration**: Verify all required variables are defined
2. **Validate template syntax**: Ensure base template is not corrupted
3. **Manual fallback**: Copy from working provider and manually edit
4. **Report issue**: Document the failure for system improvement

## üìö Integration with Agent OS

### Related Standards
- **`.agent-os/standards/best-practices.md`**: Integration requirements and validation
- **`.agent-os/standards/code-style.md`**: Documentation quality gates
- **`.agent-os/standards/tech-stack.md`**: Documentation tools and architecture

### Workflow Integration
- **New Provider Development**: Generation system is part of instrumentor integration checklist
- **Documentation Updates**: Use generation system for consistency across all provider docs
- **Quality Assurance**: Generated content must pass all Agent OS quality gates

## üîÑ Maintenance

### Regular Updates
- **Provider Information**: Keep SDK versions and package names current
- **Template Improvements**: Enhance template based on user feedback
- **Variable Expansion**: Add new variables as documentation needs evolve

### Version Control
- **Template Changes**: All template modifications must be tested across all providers
- **Provider Updates**: Regenerate affected documentation when provider configs change
- **Quality Standards**: Ensure generated content meets evolving documentation standards

---

**Compliance**: This documentation generation system is MANDATORY for all LLM provider integration documentation in the HoneyHive Python SDK project.
