Metadata-Version: 2.4
Name: yemot-flow
Version: 0.2.20
Summary: Modern async/await Python IVR framework for Yemot HaMashiach - Simple as Node.js yemot-router2
Project-URL: Homepage, https://github.com/davidTheDeveloperY/yemot-flow
Project-URL: Repository, https://github.com/davidTheDeveloperY/yemot-flow
Project-URL: Documentation, https://github.com/davidTheDeveloperY/yemot-flow#readme
Project-URL: Issues, https://github.com/davidTheDeveloperY/yemot-flow/issues
Project-URL: Changelog, https://github.com/davidTheDeveloperY/yemot-flow/releases
Project-URL: Examples, https://github.com/davidTheDeveloperY/yemot-flow/tree/master/examples
Author-email: davidTheDeveloper <dev@code-chai.com>
License: MIT
Keywords: async,flow,hamashiach,ivr,telephony,yemot
Classifier: Development Status :: 4 - Beta
Classifier: Framework :: AsyncIO
Classifier: Framework :: FastAPI
Classifier: Framework :: Flask
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Topic :: Communications :: Telephony
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Requires-Python: >=3.11
Requires-Dist: flask>=2.3
Description-Content-Type: text/markdown

# yemot-flow ğŸš€

<p align="center">
  <img src="https://img.shields.io/badge/version-0.2.18-blue.svg" alt="×’×¨×¡×” 0.2.18">
  <img src="https://img.shields.io/badge/python-%3E%3D3.11-green.svg" alt="Python 3.11+">
  <img src="https://img.shields.io/badge/license-MIT-yellow.svg" alt="×¨×™×©×™×•×Ÿ MIT">
</p>

**×¡×¤×¨×™×™×ª Python ××•×“×¨× ×™×ª ×¢× async/await ×œ×™×¦×™×¨×ª ××¢×¨×›×•×ª IVR ×—×›××•×ª ×œ×™××•×ª ×”××©×™×—**

ğŸ¯ **×¤×©×•×˜ ×›××• Node.js yemot-router2** - ×›×•×ª×‘×™× ×§×•×“ ×œ×™× ×™××¨×™ ×¢× `await`, ×•×”×× ×•×¢ ××˜×¤×œ ×‘×›×œ ×”×©××¨!

âœ¨ **×—×“×© ×‘×’×¨×¡×” 0.2.18**: ×ª××™×›×” ××œ××” ×‘-async/await ×¢× ×”××©×›×™×•×ª ××•×˜×•××˜×™×ª + ×ª×™×¢×•×“ ××•×©×œ×!

---

## ğŸŒŸ ×œ××” yemot-flow?

```python
@flow.get("")
async def welcome(call: Call):
    # ×›×•×ª×‘×™× ×§×•×“ ×¤×©×•×˜ ×•×¨×¦×™×£!
    name = await call.read([('text', '××” ×”×©× ×©×œ×š?')], mode="stt", val_name="name")
    age = await call.read([('text', f'×©×œ×•× {name}, ×›××” ××ª×” ×‘×Ÿ?')], val_name="age", max_digits=2)
    
    call.play_message([('text', f'× ×¢×™× ×œ×”×›×™×¨ {name} ×‘×Ÿ {age}!')])
    call.hangup()
```

## ğŸš€ ×ª×›×•× ×•×ª ××¨×›×–×™×•×ª

| âœ¨ | ×ª×›×•× ×” | ×¤×™×¨×•×˜ |
|---|---|---|
| **async/await** | ×§×•×“ ×œ×™× ×™××¨×™ ×•×˜×‘×¢×™ ×›××• ×‘-Node.js - ×œ×œ× × ×™×”×•×œ ××¦×‘ ×™×“× ×™ | 
| **×”××©×›×™×•×ª ××•×˜×•××˜×™×ª** | ×”×× ×•×¢ ×–×•×›×¨ ××™×¤×” ×¢×¦×¨×ª ×•×××©×™×š ××—×¨×™ ×›×œ ×§×œ×˜ ××”××©×ª××© |
| **×ª××™×›×” ××œ××”** | Flask, FastAPI, ×–×™×”×•×™ ×“×™×‘×•×¨ (STT), ×”×§×œ×˜×•×ª, ×›×œ ×¡×•×’×™ ×”×§×œ×˜×™× |
| **×¤×©×•×˜ ×œ×”×ª×§×™×Ÿ** | `pip install yemot-flow` ××• `uv add yemot-flow` - ××•×›×Ÿ ×œ×©×™××•×©! |
| **××”×™×¨ ×¢× uv** | ×¤×™×ª×•×— ××”×™×¨ ×¤×™ 10 ×¢× uv package manager |
| **×“×•×’×××•×ª ×¨×‘×•×ª** | ××¢×¨×›×ª ×”×–×× ×•×ª, ×ª×¤×¨×™×˜×™× ××ª×§×“××™×, ×‘×•×˜ AI ×•×¢×•×“ |

---

## ğŸ“¦ ×”×ª×§× ×” ××”×™×¨×”

### ğŸ ×¢× pip (×¨×’×™×œ)

```bash
# ×”×ª×§× ×” ×‘×¡×™×¡×™×ª
pip install yemot-flow

# ×¢× Flask (××•××œ×¥ ×œ××ª×—×™×œ×™×)
pip install yemot-flow flask

# ×¢× FastAPI (×œ×‘×™×¦×•×¢×™× ×’×‘×•×”×™×)  
pip install yemot-flow fastapi uvicorn
```

### âš¡ ×¢× uv (××•××œ×¥ - ××”×™×¨ ×™×•×ª×¨!)

```bash
# ×”×ª×§×Ÿ uv ×× ××™×Ÿ ×œ×š
curl -LsSf https://astral.sh/uv/install.sh | sh

# ×”×ª×§× ×” ×‘×¡×™×¡×™×ª
uv add yemot-flow

# ×¢× Flask
uv add yemot-flow flask

# ×¢× FastAPI
uv add yemot-flow fastapi uvicorn

# ×™×¦×™×¨×ª ×¤×¨×•×™×§×˜ ×—×“×© ×¢× uv
uv init my-ivr-project
cd my-ivr-project
uv add yemot-flow flask
```

**×“×¨×™×©×•×ª**: Python 3.11+ (× ×‘×“×§ ×¢×œ 3.11, 3.12, 3.13)

### ğŸš€ ×œ××” uv?

| âš¡ | ×™×ª×¨×•×Ÿ | ×¤×™×¨×•×˜ |
|---|-------|--------|
| **××”×™×¨ ×¤×™ 10-100** | ×”×ª×§× ×ª packages ××”×™×¨×” ×‘×¦×•×¨×” ×“×¨××˜×™×ª | 
| **× ×™×”×•×œ Python** | ×× ×”×œ ×’×¨×¡××•×ª Python ××•×˜×•××˜×™×ª |
| **Lock files** | ×’×¨×¡××•×ª ×§×‘×•×¢×•×ª ×œ×›×œ ×”×¦×•×•×ª |
| **Virtual envs** | × ×™×”×•×œ ××•×˜×•××˜×™ ×©×œ ×¡×‘×™×‘×•×ª ×•×™×¨×˜×•××œ×™×•×ª |
| **×¤×©×•×˜** | ×›×œ ××” ×©×¦×¨×™×š ×‘-tool ××—×“ |

---

## ğŸ¬ ×”×ª×—×œ×” ××”×™×¨×” ×¢× uv

```bash
# 1. ×”×ª×§×Ÿ uv (×× ××™×Ÿ ×œ×š)
curl -LsSf https://astral.sh/uv/install.sh | sh

# 2. ×¦×•×¨ ×¤×¨×•×™×§×˜ ×—×“×©
uv init my-ivr-system
cd my-ivr-system

# 3. ×”×•×¡×£ yemot-flow
uv add yemot-flow flask

# 4. ×¦×•×¨ ×§×•×‘×¥ app.py
cat > app.py << 'EOF'
from flask import Flask, request, Response
from yemot_flow import Flow, Call

app = Flask(__name__)
flow = Flow(print_log=True)

@flow.get("")
async def hello(call: Call):
    name = await call.read([('text', '××” ×©××š?')], mode="stt", val_name="name")
    call.play_message([('text', f'×©×œ×•× {name}!')])
    call.hangup()

@app.route("/yemot", methods=["GET", "POST"])
def yemot():
    return Response(flow.handle_request(request.values.to_dict()), 
                   mimetype="text/plain; charset=utf-8")

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=5000, debug=True)
EOF

# 5. ×”×¨×¥!
uv run python app.py
```

ğŸ‰ **×–×”×•! ×”××¢×¨×›×ª ×¨×¦×” ×¢×œ http://localhost:5000/yemot**

---

## âš¡ ×“×•×’××” ××”×™×¨×” (5 ×“×§×•×ª!)

### ğŸ”¥ ×”×“×¨×š ×”×—×“×©×” - async/await

```python
from flask import Flask, request, Response
from yemot_flow import Flow, Call

app = Flask(__name__)
flow = Flow(print_log=True)

@flow.get("")
async def welcome(call: Call):
    """×©×™×—×” ×¤×©×•×˜×” ×¢× 3 ×§×œ×˜×™×"""
    
    # ×§×œ×˜ 1
    input1 = await call.read([('text', '×× × ×”×§×© 1')], 
                            val_name="input1", max_digits=1, digits_allowed="1")
    
    # ×§×œ×˜ 2 
    input2 = await call.read([('text', '×¢×›×©×™×• ×”×§×© 2')], 
                            val_name="input2", max_digits=1, digits_allowed="2")
    
    # ×§×œ×˜ 3
    input3 = await call.read([('text', '×•×œ×¡×™×•× ×”×§×© 3')], 
                            val_name="input3", max_digits=1, digits_allowed="3")
    
    # ×¡×™×›×•×
    call.play_message([('text', f'×§×œ×˜×ª: {input1}, {input2}, {input3}. ×ª×•×“×”!')])
    call.hangup()

@app.route("/yemot", methods=["GET", "POST"])
def yemot_entry():
    return Response(
        flow.handle_request(request.values.to_dict()),
        mimetype="text/plain; charset=utf-8"
    )

if __name__ == "__main__":
    app.run(host="0.0.0.0", port=5000, debug=True)
```

### ğŸš€ ×”×¤×¢×œ×”

```bash
# ×¢× Python ×¨×’×™×œ
python app.py

# ×¢× uv (××•××œ×¥)
uv run app.py

# ×”××¢×¨×›×ª ×¨×¦×” ×¢×œ: http://localhost:5000/yemot
```

**ğŸ”— ×”×’×“×¨×” ×‘×™××•×ª**: ×›×ª×•×‘×ª API â† `http://your-server-ip:5000/yemot`

### ğŸ“± ×”×“×¨×š ×”×™×©× ×” (sync) - ×¢×“×™×™×Ÿ × ×ª××›×ª

```python
@flow.get("")
def old_style(call):
    call.play_message([("text", "×©×œ×•× ×•×‘×¨×›×”! ×”×§×© 1")])
    call.read([("text", "×”×§×© 1 ×œ×”××©×š")], max_digits=1, digits_allowed="1")
    if call.params.get("Digits") == "1":
        call.goto("thanks")

@flow.get("thanks") 
def thanks(call):
    call.play_message([("text", "×ª×•×“×” ×•×œ×”×ª×¨××•×ª")])
    call.hangup()
```

---

## ğŸ¯ ×“×•×’×××•×ª ××ª×§×“××•×ª

### ğŸ—£ï¸ ×–×™×”×•×™ ×“×™×‘×•×¨ (STT)

```python
@flow.get("stt")
async def speech_demo(call: Call):
    name = await call.read([('text', '×××•×¨ ××ª ×©××š')], 
                          mode="stt", val_name="name", lang="he-IL")
    
    call.play_message([('text', f'×©×œ×•× {name}, × ×¢×™× ×œ×”×›×™×¨!')])
    call.hangup()
```

### ğŸ™ï¸ ×”×§×œ×˜×”

```python
@flow.get("record")
async def recording_demo(call: Call):
    recording = await call.read([('text', '×ª×ª×—×™×œ ×”×§×œ×˜×” ××—×¨×™ ×”×¦×¤×¦×•×£')], 
                               mode="record", val_name="recording", 
                               max_length=30, path="/recordings")
    
    call.play_message([('text', '×ª×•×“×” ×¢×œ ×”×”×§×œ×˜×”')])
    call.hangup()
```

### ğŸ• ××¢×¨×›×ª ×”×–×× ×•×ª ××¡×¢×“×”

```python
@flow.get("")
async def restaurant(call: Call):
    # ×‘×—×™×¨×ª ×¤×™×¦×”
    pizza = await call.read([
        ('text', '×‘×¨×•×›×™× ×”×‘××™× ×œ×¤×™×¦×” ×©××—!'),
        ('text', '×”×§×© 1 ×œ××¨×’×¨×™×˜×”, 2 ×œ×¤×¤×¨×•× ×™, 3 ×œ×™×¨×§×•×ª')
    ], val_name="pizza", max_digits=1, digits_allowed="123")
    
    pizza_names = {"1": "××¨×’×¨×™×˜×”", "2": "×¤×¤×¨×•× ×™", "3": "×™×¨×§×•×ª"}
    
    # ×‘×—×™×¨×ª ×’×•×“×œ
    size = await call.read([
        ('text', f'×‘×—×¨×ª ×¤×™×¦×” {pizza_names[pizza]}'),
        ('text', '×”×§×© 1 ×œ×§×˜× ×”, 2 ×œ×‘×™× ×•× ×™×ª, 3 ×œ×’×“×•×œ×”')
    ], val_name="size", max_digits=1, digits_allowed="123")
    
    sizes = {"1": "×§×˜× ×”", "2": "×‘×™× ×•× ×™×ª", "3": "×’×“×•×œ×”"}
    
    # ×¤×¨×˜×™ ××©×œ×•×—
    phone = await call.read([('text', '×××•×¨ ××¡×¤×¨ ×˜×œ×¤×•×Ÿ ×œ××©×œ×•×—')], 
                           mode="stt", val_name="phone", lang="he-IL")
    
    address = await call.read([('text', '×××•×¨ ×›×ª×•×‘×ª ×œ××©×œ×•×—')], 
                             mode="stt", val_name="address", lang="he-IL")
    
    # ××™×©×•×¨ ×”×–×× ×”
    call.play_message([
        ('text', f'××™×©×•×¨ ×”×–×× ×”: ×¤×™×¦×” {pizza_names[pizza]} {sizes[size]}'),
        ('text', f'×˜×œ×¤×•×Ÿ: {phone}'),
        ('text', f'×›×ª×•×‘×ª: {address}'),
        ('text', '×”×”×–×× ×” ×ª×’×™×¢ ×ª×•×š 30 ×“×§×•×ª. ×ª×•×“×”!')
    ])
    call.hangup()
```

---

## ğŸ“š API ××œ×

### Flow - ×”×× ×•×¢ ×”×¨××©×™

```python
flow = Flow(timeout=30000, print_log=True)

# ×¨×™×©×•× handlers
@flow.get("")          # ×©×œ×•×—×” ×¨××©×™×ª
@flow.get("sales")     # ×©×œ×•×—×ª ××›×™×¨×•×ª  
@flow.get("support")   # ×©×œ×•×—×ª ×ª××™×›×”

# × ×™×”×•×œ ×‘×§×©×•×ª
response = flow.handle_request(params_dict)
```

### Call - ××•×‘×™×™×§×˜ ×”×©×™×—×”

#### ğŸµ play_message - ×”×©××¢×ª ×”×•×“×¢×•×ª

```python
call.play_message([
    ("text", "×©×œ×•× ×•×‘×¨×›×”"),           # ×˜×§×¡×˜
    ("file", "welcome"),              # ×§×•×‘×¥ ×©××¢
    ("digits", "12345"),             # ×¡×¤×¨×•×ª
    ("number", "150"),               # ××¡×¤×¨ (×××” ×•×—××™×©×™×)
    ("alpha", "abc"),                # ××•×ª×™×•×ª
])
```

#### ğŸ¹ read - ×§×‘×œ×ª ×§×œ×˜×™×

```python
# ×”×§×©×•×ª ××§×œ×“×ª
result = await call.read([('text', '×”×§×© ××¡×¤×¨')], 
                        val_name="user_input",
                        max_digits=3,
                        min_digits=1,
                        digits_allowed="123456789",
                        sec_wait=10)

# ×–×™×”×•×™ ×“×™×‘×•×¨
speech = await call.read([('text', '×“×‘×¨ ×¢×›×©×™×•')], 
                        mode="stt",
                        val_name="speech",
                        lang="he-IL")

# ×”×§×œ×˜×”
recording = await call.read([('text', '×ª×ª×—×™×œ ×”×§×œ×˜×”')], 
                           mode="record",
                           val_name="recording",
                           max_length=60,
                           path="/recordings/")
```

#### ğŸ”„ × ×™×•×•×˜

```python
call.goto("sales")      # ××¢×‘×¨ ×œ×©×œ×•×—×”
call.goto("")           # ×—×–×¨×” ×œ×¨××©×™×ª  
call.hangup()           # × ×™×ª×•×§ ×”×©×™×—×”
```

---

## ğŸŒ FastAPI Support

```python
from fastapi import FastAPI, Request, Response
from yemot_flow import Flow, Call

app = FastAPI()
flow = Flow()

@flow.get("")
async def root(call: Call):
    name = await call.read([('text', '××” ×©××š?')], mode="stt", val_name="name")
    call.play_message([('text', f'×©×œ×•× {name} ×-FastAPI!')])
    call.hangup()

@app.api_route("/yemot", methods=["GET", "POST"])
async def yemot_entry(request: Request):
    if request.method == "POST":
        params = await request.form()
    else:
        params = request.query_params
    
    resp = flow.handle_request(dict(params))
    return Response(resp, media_type="text/plain; charset=utf-8")

# ×”×¤×¢×œ×” ×¢× uvicorn ×¨×’×™×œ
# uvicorn main:app --host 0.0.0.0 --port 8000

# ×”×¤×¢×œ×” ×¢× uv (××•××œ×¥)  
# uv run uvicorn main:app --host 0.0.0.0 --port 8000
```

---

## ğŸ§ª ×“×•×’×××•×ª × ×•×¡×¤×•×ª

×¨××” ×ª×™×§×™×™×ª `examples/` ×œ×“×•×’×××•×ª ××œ××•×ª:

- **minimal_example.py** - ×“×•×’××” ×¤×©×•×˜×” ×‘×™×•×ª×¨
- **flask_basic_example.py** - Flask ××ª×§×“× ×¢× ×ª×¤×¨×™×˜×™×
- **fastapi_basic_example.py** - FastAPI ×¢× async handlers
- **restaurant_ordering_system.py** - ××¢×¨×›×ª ×”×–×× ×•×ª ××¡×¢×“×” ××œ××”
- **hebrew_no_encoding_example.py** - ×¢×‘×¨×™×ª ×œ×œ× ×‘×¢×™×•×ª ×§×™×“×•×“

---

## ğŸ› ï¸ ×¤×™×ª×•×— ×•×ª×¨×•××”

### ğŸ ×¢× pip

```bash
# Clone + setup
git clone https://github.com/davidTheDeveloperY/yemot-flow
cd yemot-flow
pip install -e .

# ×”×¨×¦×ª ×‘×“×™×§×•×ª
pytest tests/

# ×‘×“×™×§×ª examples
python examples/minimal_example.py
```

### âš¡ ×¢× uv (××•××œ×¥ ×œ××¤×ª×—×™×)

```bash
# Clone + setup
git clone https://github.com/davidTheDeveloperY/yemot-flow
cd yemot-flow
uv sync

# ×”×¨×¦×ª ×‘×“×™×§×•×ª
uv run pytest tests/

# ×‘×“×™×§×ª examples
uv run python examples/minimal_example.py

# ×¤×™×ª×•×— ×¢× hot reload
uv run python examples/flask_basic_example.py

# ×‘× ×™×™×” ×•×¤×¨×¡×•×
uv build
uv publish
```

---

## ğŸ› ×¤×ª×¨×•×Ÿ ×‘×¢×™×•×ª × ×¤×•×¦×•×ª

### âŒ ×©×’×™××ª ×—×™×‘×•×¨
- ×•×•×“× ×©×”×©×¨×ª ×¨×¥ ×¢×œ IP ×—×™×¦×•× ×™ (`host="0.0.0.0"`)
- ×‘×“×•×§ firewall/router settings
- ×”×©×ª××© ×‘×˜×¨××™× ×œ: `curl "http://your-server:5000/yemot?ApiCallId=test"`

### âŒ ×¢×‘×¨×™×ª ×œ× ×¢×•×‘×“×ª
- ×”×•×¡×£ `charset=utf-8` ×œ-Response
- ×”×©×ª××© ×‘-`url_encode=True` ×‘-play_message ×× ×™×© ×‘×¢×™×•×ª

### âŒ ×”×©×™×—×” × ×ª×§×¢×ª
- ×‘×“×•×§ ×©×™×© `val_name` ×™×™×—×•×“×™ ×œ×›×œ `read()`
- ×•×“× ×©-`digits_allowed` ××›×™×œ ××ª ×”×¡×¤×¨×•×ª ×”× ×›×•× ×•×ª
- ×”×•×¡×£ `print_log=True` ×œ-Flow ×œ×¨××•×ª ××” ×§×•×¨×”

---

## ğŸ“‹ Changelog

### v0.2.18 (× ×•×›×—×™)
- ğŸ“š README ××•×©×œ× ×•××¤×•×¨×˜
- ğŸ¯ ×“×•×’×××•×ª async/await ××œ××•×ª
- ğŸ”§ ×ª×™×§×•× ×™ ×ª×™×¢×•×“ ×•×¡×“×¨

### v0.2.17
- âœ¨ ×ª××™×›×” ××œ××” ×‘-async/await 
- ğŸ”§ ×”××©×›×™×•×ª ××•×˜×•××˜×™×ª ×©×œ handlers
- ğŸš€ ×‘×™×¦×•×¢×™× ××©×•×¤×¨×™×
- ğŸ“š ×“×•×’×××•×ª ××¢×•×“×›× ×•×ª

### v0.2.16
- ğŸ› ×ª×™×§×•× ×™ ×‘××’×™× ×‘×™×¦×™×‘×•×ª
- ğŸ“ ×©×™×¤×•×¨×™ ×ª×™×¢×•×“

---

## ğŸ¤ ×ª××™×›×” ×•×¢×–×¨×”

- **GitHub Issues**: [yemot-flow/issues](https://github.com/davidTheDeveloperY/yemot-flow/issues)
- **×“×•×’×××•×ª**: ×¨××” ×ª×™×§×™×™×ª `examples/`
- **×¤×•×¨×•× ×™××•×ª**: ×—×¤×© "yemot-flow" 

---

## ğŸ“„ ×¨×™×©×™×•×Ÿ

MIT License - ×—×•×¤×©×™ ×œ×©×™××•×© ××¡×—×¨×™ ×•××™×©×™

---

<p align="center">
  <b>ğŸ’ × ×”× ×ª ××”×¡×¤×¨×™×™×”? ×ª×Ÿ ×œ× ×• â­ ×‘-GitHub!</b><br>
  Made with â¤ï¸ by davidTheDeveloper
</p>