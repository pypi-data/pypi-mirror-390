[project]
name = "arch-blueprint"
version = "0.1.5"
description = "Render your project components automatically in plantuml"
authors = [{ name = "Nick Khitrov", email = "khitrov34@gmail.com" }]
readme = "README.md"
keywords = ["graphs", "plantuml", "architecture", "diagrams"]
classifiers = ["Topic :: Multimedia :: Graphics", "Topic :: Utilities"]

requires-python = ">=3.9"
dependencies = ["grimp>=3.13"]

[project.urls]
Homepage = "https://github.com/nkhitrov/arch-blueprint"
Repository = "https://github.com/nkhitrov/arch-blueprint"

[project.scripts]
arch_blueprint = "arch_blueprint.__main__:main"

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[tool.hatch.build.targets.wheel]
packages = ["src/arch_blueprint"]

[[tool.uv.index]]
name = "testpypi"
url = "https://test.pypi.org/simple/"
publish-url = "https://test.pypi.org/legacy/"
explicit = true

[dependency-groups]
dev = [
  "mypy>=1.18.2",
  "pre-commit>=4.3.0",
	"ruff>=0.14.3",
]

[tool.isort]
profile = "black"
multi_line_output = 3

[tool.mypy]
strict = true
ignore_missing_imports = true
allow_subclassing_any = true
allow_untyped_calls = true
pretty = true
show_error_codes = true
implicit_reexport = true
allow_untyped_decorators = true

[tool.pytest.ini_options]
log_level = 'INFO'
anyio_mode = "auto"

[tool.ruff]
target-version = "py39"
# List of enabled rulsets.
# See https://docs.astral.sh/ruff/rules/ for more information.
lint.select = [
	"E",     # Error
	"F",     # Pyflakes
	"W",     # Pycodestyle
	"C90",   # McCabe complexity
	"I",     # Isort
	"N",     # pep8-naming
	"D",     # Pydocstyle
	"ANN",   # Pytype annotations
	"S",     # Bandit
	"B",     # Bugbear
	"COM",   # Commas
	"C4",    # Comprehensions
	"ISC",   # Implicit string concat
	"PIE",   # Unnecessary code
	"T20",   # Catch prints
	"PYI",   # validate pyi files
	"Q",     # Checks for quotes
	"RSE",   # Checks raise statements
	"RET",   # Checks return statements
	"SLF",   # Self checks
	"SIM",   # Simplificator
	"PTH",   # Pathlib checks
	"ERA",   # Checks for commented out code
	"PL",    # PyLint checks
	"RUF",   # Specific to Ruff checks
	"FA102", # Future annotations
]
lint.ignore = [
	"D105",    # Missing docstring in magic method
	"D107",    # Missing docstring in __init__
	"D212",    # Multi-line docstring summary should start at the first line
	"D401",    # First line should be in imperative mood
	"D104",    # Missing docstring in public package
	"D100",    # Missing docstring in public module
	"ANN401",  # typing.Any are disallowed in `**kwargs
	"PLR0913", # Too many arguments for function call
	"D106",    # Missing docstring in public nested class
	"D102",    # Missing docstring in public method
]
lint.mccabe = { max-complexity = 10 }
exclude = [".venv/"]
line-length = 88

[tool.ruff.lint.per-file-ignores]
"tests/*" = [
	"S101",   # Use of assert detected
	"S301",   # Use of pickle detected
	"D103",   # Missing docstring in public function
	"SLF001", # Private member accessed
	"S311",   # Standard pseudo-random generators are not suitable for security/cryptographic purposes
	"D101",   # Missing docstring in public class
	"D102",   # Missing docstring in public method
]

[tool.ruff.lint.pydocstyle]
convention = "pep257"
ignore-decorators = ["typing.overload"]

[tool.ruff.lint.pylint]
allow-magic-value-types = ["int", "str", "float"]

[tool.ruff.lint.flake8-bugbear]
extend-immutable-calls = ["taskiq_dependencies.Depends", "taskiq.TaskiqDepends"]

[tool.typos.files]
extend-exclude = [
	"docs/README.md", # because of identifier in head section
]
