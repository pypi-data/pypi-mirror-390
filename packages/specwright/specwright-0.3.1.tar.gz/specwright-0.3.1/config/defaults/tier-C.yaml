risk: "low"

lifecycle_scope: ["planning", "prompting", "coding", "testing", "governance"]

budget:
  max_tokens: 500000
  max_usd: 50.00
  currency: "USD"

plan:
  - type: "agent"
    name: "Quick Plan"
    description: "Agent creates lightweight implementation plan"
    models: ["claude-3-5-sonnet"]
    output_artifacts: ["plan.md"]

prompt:
  - type: "agent"
    name: "Quick Design"
    description: "Agent creates basic design notes"
    models: ["claude-3-5-sonnet"]
    output_artifacts: ["design.md"]

code:
  - type: "agent"
    name: "Implementation"
    description: "Agent implements solution"
    models: ["claude-3-5-sonnet"]
    tools: ["pytest", "ruff"]
    output_artifacts: ["src/**/*.py", "tests/**/*.py"]

test:
  - type: "agent"
    name: "Testing"
    description: "Agent runs automated tests"
    models: ["claude-3-5-sonnet"]
    tools: ["pytest"]
    output_artifacts: ["test-results.xml"]

govern:
  - type: "agent"
    name: "Auto-Deploy"
    description: "Agent performs automated deployment"
    output_artifacts: ["deployment-log.txt"]

gates:
  G0:
    name: "Plan Approval Gate"
    description: "Auto-approved plan validation"
    sla_hours: 8
    deliverables:
      - "plan.md"
    approver: "automated"
    approval_type: "auto-approved"
    criteria:
      - "Plan document exists"
      - "Basic structure valid"

  G1:
    name: "Code Readiness Gate"
    description: "Auto-approved code validation via static analysis"
    sla_hours: 4
    deliverables:
      - "src/**/*.py"
      - "tests/**/*.py"
    approver: "automated"
    approval_type: "auto-approved"
    criteria:
      - "Static analysis passed"
      - "Unit tests passing"
      - "Coverage â‰¥70%"

  G2:
    name: "Pre-Release Gate"
    description: "Peer review before release (only non-auto gate for Tier C)"
    sla_hours: 8
    deliverables:
      - "test-results.xml"
    approver: "peer-developer"
    approval_type: "peer-review"
    criteria:
      - "Tests passing"
      - "No obvious issues"

  G3:
    name: "Deployment Approval Gate"
    description: "Auto-approved deployment to staging/dev"
    sla_hours: 1
    deliverables:
      - "deployment-log.txt"
    approver: "automated"
    approval_type: "auto-approved"
    criteria:
      - "Deployment script succeeds"
      - "Health checks pass"

  G4:
    name: "Post-Implementation Gate"
    description: "Auto-verified deployment health"
    sla_hours: 24
    deliverables:
      - "monitoring-summary.md"
    approver: "automated"
    approval_type: "auto-approved"
    criteria:
      - "No errors in first hour"
      - "Health checks passing"

metrics:
  targets:
    coverage_min: 0.70
    time_to_green_hours: 48
    defect_density_max: 2.0
  emit: ["coverage", "time_to_green"]

governance:
  approval_required: false
  audit_trail: true
