# -*- coding: utf-8 -*-

"""
payrix

This file was automatically generated by APIMATIC v3.0 (
 https://www.apimatic.io ).
"""

from payrix.api_helper import APIHelper
from payrix.configuration import Server
from payrix.utilities.file_wrapper import FileWrapper
from payrix.controllers.base_controller import BaseController
from apimatic_core.request_builder import RequestBuilder
from apimatic_core.response_handler import ResponseHandler
from apimatic_core.types.parameter import Parameter
from payrix.http.http_method_enum import HttpMethodEnum
from apimatic_core.authentication.multiple.single_auth import Single
from apimatic_core.authentication.multiple.or_auth_group import Or
from payrix.models.apple_domains_mass_enablement_csv_response_result import AppleDomainsMassEnablementCsvResponseResult
from payrix.models.apple_domains_mass_enablement_for_merchant_list_response_result import AppleDomainsMassEnablementForMerchantListResponseResult
from payrix.models.update_apple_pay_domain_response_result import UpdateApplePayDomainResponseResult
from payrix.exceptions.error_four_hundred_exception import ErrorFourHundredException


class AppleDomainsMassEnablementController(BaseController):

    """A Controller to access Endpoints in the payrix API."""
    def __init__(self, config):
        super(AppleDomainsMassEnablementController, self).__init__(config)

    def post_apple_pay_for_csv(self,
                               id,
                               files,
                               token=None,
                               request_token=None):
        """Does a POST request to /entities/{id}/enableApplePayForCsv.

        "Registers Apple Pay domains for multiple merchants using a CSV file.
        The uploaded CSV must include at least two columns: `"domain"` and
        `"merchant_id"`. All other columns are ignored. The file is parsed
        using the header row, and any data rows with missing or extra columns
        are also rejected.
        For each merchant-domain pair, the system creates an `appleDomains`
        record. Domains not already registered are marked as `registering`,
        and asynchronous processing begins. If verification succeeds, the
        status updates to `registered`. If verification fails, the status
        changes to `failed_registration`, with an `errorNote` explaining the
        reason.
        This endpoint is idempotent for previously registered domains,
        allowing repeated submissions without adverse effects. You can
        resubmit the same CSV to retry failed registrations after resolving
        any issues.
        Upload the CSV file as a form-data field named files. All domains must
        be fully qualified domain names (FQDNs) and must host the Apple Pay
        verification file at:
        https://{merchantDomain}/.well-known/apple-developer-merchantid-domain-
        association

        Args:
            id (str): The Payrix Pro Entity ID for the Partner initiating
                domain verification for one or more Merchants.
            files (typing.BinaryIO): The `multipart/form-data` field used to
                upload the CSV file containing merchant-domain pairs for Apple
                Pay domain verification.  The CSV file must include a header
                row with at least two columns: `"domain"` and `"merchant_id"`.
            token (str, optional): A single-use, limited authentication layer
                in addition to an API Key or Session Key to authorize
                sensitive operations. <a
                href="/apis/payrix/dev-int-guide/references/authentication/auth
                -tokens" target="_blank">Auth Tokens</a> add security by
                requiring one-time approval for specific actions.
            request_token (str, optional): A custom, one-time identifier for
                any API request (GET, PUT, POST, or DELETE). Blocks future
                requests with the same token for 48 hours, ensuring only the
                first request is processed. Valid values can contain 1-100
                alphanumeric and special characters. See <a
                href="/apis/payrix/dev-int-guide/references/request-tokens"
                target="_blank">Request Tokens</a>  for more information.

        Returns:
            AppleDomainsMassEnablementCsvResponseResult: Response from the
                API. Confirms successful registration of merchant-domain pairs
                submitted for Apple Pay domain verification.

        Raises:
            APIException: When an error occurs while fetching the data from
                the remote API. This exception includes the HTTP Response
                code, an error message, and the HTTP body that was received in
                the request.

        """

        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.PAYRIX)
            .path('/entities/{id}/enableApplePayForCsv')
            .http_method(HttpMethodEnum.POST)
            .template_param(Parameter()
                            .key('id')
                            .value(id)
                            .should_encode(True))
            .multipart_param(Parameter()
                             .key('files')
                             .value(files)
                             .default_content_type('application/octet-stream'))
            .header_param(Parameter()
                          .key('token')
                          .value(token))
            .header_param(Parameter()
                          .key('request-token')
                          .value(request_token))
            .header_param(Parameter()
                          .key('accept')
                          .value('application/json'))
            .auth(Or(Single('apiKey'), Single('sessionKey'), Single('txnSessionKey')))
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(AppleDomainsMassEnablementCsvResponseResult.from_dictionary)
            .local_error('400', 'Error', ErrorFourHundredException)
        ).execute()

    def post_apple_pay_for_merchant_list(self,
                                         id,
                                         body,
                                         request_token=None,
                                         token=None):
        """Does a POST request to /entities/{id}/enableApplePayForMerchantList.

        Registers Apple Pay domains for a list of merchants using a JSON
        request body. For each merchant-domain pair, the system creates an
        `appleDomains` record. Domains not already registered update their
        status to `registering`, and asynchronous verification begins. If
        verification succeeds, the status updates to `registered`. If
        verification fails, the status changes to `failed_registration`, with
        an `errorNote` explaining the reason.
        This endpoint is idempotent, allowing repeated submissions of the same
        request body without adverse effects. Only failed registrations are
        retried.
        All domains must be fully qualified domain names (FQDNs) and must host
        the Apple Pay verification file at:
        https://{merchantDomain}/.well-known/apple-developer-merchantid-domain-
        association

        Args:
            id (str): The Payrix Pro Entity ID for the Partner initiating
                domain verification for one or more Merchants.
            body (ApplePayForMerchantListPostRequest): The request body
                parameter.
            request_token (str, optional): A custom, one-time identifier for
                any API request (GET, PUT, POST, or DELETE). Blocks future
                requests with the same token for 48 hours, ensuring only the
                first request is processed. Valid values can contain 1-100
                alphanumeric and special characters. See <a
                href="/apis/payrix/dev-int-guide/references/request-tokens"
                target="_blank">Request Tokens</a>  for more information.
            token (str, optional): A single-use, limited authentication layer
                in addition to an API Key or Session Key to authorize
                sensitive operations. <a
                href="/apis/payrix/dev-int-guide/references/authentication/auth
                -tokens" target="_blank">Auth Tokens</a> add security by
                requiring one-time approval for specific actions.

        Returns:
            AppleDomainsMassEnablementForMerchantListResponseResult: Response
                from the API. Confirms successful registration of
                merchant-domain pairs submitted for Apple Pay domain
                verification.

        Raises:
            APIException: When an error occurs while fetching the data from
                the remote API. This exception includes the HTTP Response
                code, an error message, and the HTTP body that was received in
                the request.

        """

        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.PAYRIX)
            .path('/entities/{id}/enableApplePayForMerchantList')
            .http_method(HttpMethodEnum.POST)
            .template_param(Parameter()
                            .key('id')
                            .value(id)
                            .should_encode(True))
            .header_param(Parameter()
                          .key('Content-Type')
                          .value('application/json'))
            .body_param(Parameter()
                        .value(body))
            .header_param(Parameter()
                          .key('request-token')
                          .value(request_token))
            .header_param(Parameter()
                          .key('token')
                          .value(token))
            .header_param(Parameter()
                          .key('accept')
                          .value('application/json'))
            .body_serializer(APIHelper.json_serialize)
            .auth(Or(Single('apiKey'), Single('sessionKey'), Single('txnSessionKey')))
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(AppleDomainsMassEnablementForMerchantListResponseResult.from_dictionary)
            .local_error('400', 'Error', ErrorFourHundredException)
        ).execute()

    def post_apple_pay_for_merchant_list_disable(self,
                                                 id,
                                                 body,
                                                 request_token=None,
                                                 token=None):
        """Does a POST request to /entities/{id}/disableApplePayForMerchantList.

        Unregisters Apple Pay domains for a list of merchants using a JSON
        request body. For each merchant-domain pair, the system updates the
        corresponding appleDomains record to reflect the `unregistered`
        status. Domains not yet unregistered are marked as `unregistering`,
        and asynchronous processing begins. If unregistration succeeds, the
        status updates to `unregistered`. If unregistration fails, the status
        reverts back to `registered`, with an `errorNote` explaining the
        reason.
        This endpoint is idempotent, allowing repeated submissions of the same
        request body without adverse effects. Only failed de-registrations are
        retried.
        All domains must be fully qualified domain names (FQDNs) and must have
        previously been registered for Apple Pay and verified.

        Args:
            id (str): The Payrix Pro Entity ID for the Partner initiating
                unregistration for one or more Merchants.
            body (ApplePayForMerchantListPostRequest): The request body
                parameter.
            request_token (str, optional): A custom, one-time identifier for
                any API request (GET, PUT, POST, or DELETE). Blocks future
                requests with the same token for 48 hours, ensuring only the
                first request is processed. Valid values can contain 1-100
                alphanumeric and special characters. See <a
                href="/apis/payrix/dev-int-guide/references/request-tokens"
                target="_blank">Request Tokens</a>  for more information.
            token (str, optional): A single-use, limited authentication layer
                in addition to an API Key or Session Key to authorize
                sensitive operations. <a
                href="/apis/payrix/dev-int-guide/references/authentication/auth
                -tokens" target="_blank">Auth Tokens</a> add security by
                requiring one-time approval for specific actions.

        Returns:
            AppleDomainsMassEnablementForMerchantListResponseResult: Response
                from the API. Confirms successful unregistration of
                merchant-domains pairs for Apple Pay.

        Raises:
            APIException: When an error occurs while fetching the data from
                the remote API. This exception includes the HTTP Response
                code, an error message, and the HTTP body that was received in
                the request.

        """

        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.PAYRIX)
            .path('/entities/{id}/disableApplePayForMerchantList')
            .http_method(HttpMethodEnum.POST)
            .template_param(Parameter()
                            .key('id')
                            .value(id)
                            .should_encode(True))
            .header_param(Parameter()
                          .key('Content-Type')
                          .value('application/json'))
            .body_param(Parameter()
                        .value(body))
            .header_param(Parameter()
                          .key('request-token')
                          .value(request_token))
            .header_param(Parameter()
                          .key('token')
                          .value(token))
            .header_param(Parameter()
                          .key('accept')
                          .value('application/json'))
            .body_serializer(APIHelper.json_serialize)
            .auth(Or(Single('apiKey'), Single('sessionKey'), Single('txnSessionKey')))
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(AppleDomainsMassEnablementForMerchantListResponseResult.from_dictionary)
            .local_error('400', 'Error', ErrorFourHundredException)
        ).execute()

    def post_update_apple_pay_domain(self,
                                     id,
                                     body,
                                     request_token=None,
                                     token=None):
        """Does a POST request to /merchants/{id}/updateApplePayDomain.

        Verifies a remote Apple Pay configuration file. 
        The configuration file must be stored on the merchant's or vendor's
        domain, but accessible to the Payrix systems. 
        This endpoint can be used to ensure the configuration file is in the
        correct location with the correct rights for remote access. 
        It is meant to validate one configuration file with the provided Fully
        Qualified Domain Name (fqdn). 
        This endpoint does not do any action towards registration. It only
        verifies access to the remote file.

        Args:
            id (str): The Payrix Pro Merchant ID for the Partner initiating
                verification for the listed domain.
            body (UpdateApplePayDomainPostRequest): The request body parameter.
            request_token (str, optional): A custom, one-time identifier for
                any API request (GET, PUT, POST, or DELETE). Blocks future
                requests with the same token for 48 hours, ensuring only the
                first request is processed. Valid values can contain 1-100
                alphanumeric and special characters. See <a
                href="/apis/payrix/dev-int-guide/references/request-tokens"
                target="_blank">Request Tokens</a>  for more information.
            token (str, optional): A single-use, limited authentication layer
                in addition to an API Key or Session Key to authorize
                sensitive operations. <a
                href="/apis/payrix/dev-int-guide/references/authentication/auth
                -tokens" target="_blank">Auth Tokens</a> add security by
                requiring one-time approval for specific actions.

        Returns:
            UpdateApplePayDomainResponseResult: Response from the API.
                Confirms successful verifications of the domain sent for Apple
                Pay.

        Raises:
            APIException: When an error occurs while fetching the data from
                the remote API. This exception includes the HTTP Response
                code, an error message, and the HTTP body that was received in
                the request.

        """

        return super().new_api_call_builder.request(
            RequestBuilder().server(Server.PAYRIX)
            .path('/merchants/{id}/updateApplePayDomain')
            .http_method(HttpMethodEnum.POST)
            .template_param(Parameter()
                            .key('id')
                            .value(id)
                            .should_encode(True))
            .header_param(Parameter()
                          .key('Content-Type')
                          .value('application/json'))
            .body_param(Parameter()
                        .value(body))
            .header_param(Parameter()
                          .key('request-token')
                          .value(request_token))
            .header_param(Parameter()
                          .key('token')
                          .value(token))
            .header_param(Parameter()
                          .key('accept')
                          .value('application/json'))
            .body_serializer(APIHelper.json_serialize)
            .auth(Or(Single('apiKey'), Single('sessionKey'), Single('txnSessionKey')))
        ).response(
            ResponseHandler()
            .deserializer(APIHelper.json_deserialize)
            .deserialize_into(UpdateApplePayDomainResponseResult.from_dictionary)
            .local_error('400', 'Error', ErrorFourHundredException)
        ).execute()
