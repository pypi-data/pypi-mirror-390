{% macro dataclass_fields(fields) %}
{% if fields %}
{% for field in fields %}
{{ field.name }}: {{ field.annotation }}{% if field.default_expr is not none %} = {{ field.default_expr }}{% endif %}

{% endfor %}
{% else %}
pass
{% endif %}
{% endmacro %}

{% macro typed_dict_fields(fields) %}
{% if fields %}
{% for field in fields %}
{{ field.name }}: {{ field.annotation }}
{% endfor %}
{% else %}
pass
{% endif %}
{% endmacro %}

{% macro where_fields(fields) %}
{% if fields %}
{% for field in fields %}
{{ field.name }}: {{ field.annotation }}
{% endfor %}
{% else %}
pass
{% endif %}
{% endmacro %}

{% macro where_fields(fields) -%}
{% if fields %}
{% for field in fields %}
{{ field.name }}: {{ field.annotation }}
{% endfor %}
{% else %}
pass
{% endif %}
{% endmacro %}

{% macro column_specs(column_specs) -%}
{%- if column_specs -%}
column_specs: tuple[ColumnSpec, ...] = (
{% for spec in column_specs %}
    ColumnSpec(name={{ spec.name_repr }}, optional={{ spec.optional }}, auto_increment={{ spec.auto_increment }}, has_default={{ spec.has_default }}, has_default_factory={{ spec.has_default_factory }}),
{% endfor %}
)
{%- else -%}
column_specs: tuple[ColumnSpec, ...] = ()
{%- endif %}
{%- endmacro %}

{% macro foreign_keys(foreign_keys) -%}
{% if foreign_keys %}
foreign_keys: tuple[ForeignKeySpec, ...] = (
{% for fk in foreign_keys %}
    ForeignKeySpec(
        local_columns={{ fk.local_columns_literal }},
        remote_model={{ fk.remote_model }},
        remote_columns={{ fk.remote_columns_literal }},
        backref={{ fk.backref_repr }},
    ),
{% endfor %}
)
{% else %}
foreign_keys: tuple[ForeignKeySpec, ...] = ()
{% endif %}
{% endmacro %}

{% macro relations(relations) -%}
{% if relations %}
relations: tuple[RelationSpec, ...] = (
    {% for rel in relations %}
    RelationSpec(name={{ rel.name_repr }}, table_name={{ rel.table_name_repr }}, table_module={{ rel.table_module_expr }}, many={{ rel.many }}, mapping={{ rel.mapping_literal }}, table_factory={{ rel.table_factory_expr }}),
    {% endfor %}
)
{% else %}
relations: tuple[RelationSpec, ...] = ()
{% endif %}
{% endmacro %}

