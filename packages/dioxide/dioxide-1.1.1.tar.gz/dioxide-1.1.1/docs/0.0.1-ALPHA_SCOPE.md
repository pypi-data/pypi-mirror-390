# dioxide 0.0.1-alpha Release Scope

**Release Goal**: First functional alpha release with core DI features, 100% test coverage, and automated CI/CD pipeline.

**Target Date**: TBD
**Status**: Planning
**Release Manager**: @mikelane

---

## Executive Summary

The 0.0.1-alpha release establishes dioxide as a **working, tested, and deployable** dependency injection framework for Python. This is the foundation for all future development.

**Success Criteria**:
- ✅ All BDD acceptance criteria passing
- ✅ 100% test coverage (line and branch)
- ✅ Full CI/CD pipeline operational
- ✅ Documentation complete for alpha users
- ✅ Package published to PyPI (test instance)

---

## Release Scope

### Core Features (MUST HAVE)

#### 1. @component Decorator Auto-Discovery ✅
**Status**: Complete
**Feature File**: `features/component-decorator.feature`

- Decorator marks classes for DI
- Supports SINGLETON and FACTORY scopes
- Global registry tracks decorated classes
- Can be used with/without parentheses

#### 2. Container.scan() Auto-Registration ✅
**Status**: Complete (with bugs)
**Feature File**: `features/container-scan.feature`

- Discovers all @component classes
- Inspects __init__ type hints for dependencies
- Creates auto-injecting factory functions
- Handles classes with/without parameters

#### 3. Constructor Dependency Injection ✅
**Status**: Complete
**Feature File**: `features/dependency-injection.feature`

- Auto-injects constructor parameters based on type hints
- Resolves multi-level dependency chains
- Supports multiple dependencies per constructor
- Fixed in Issue #19

#### 4. Singleton Scope Caching ✅
**Status**: COMPLETE (Fixed in #19)
**Feature File**: `features/singleton-caching.feature`
**GitHub Issue**: #19

**Previous Behavior**: Factory providers were called multiple times instead of cached
**Current Behavior**: SINGLETON components instantiated once and cached ✅
**Impact**: FIXED in commit b7b2e4d

**Test Status**:
- `it_calls_singleton_factory_only_once` - PASS ✅
- `it_allows_singleton_to_depend_on_transient` - PASS ✅
- `it_allows_transient_to_depend_on_singleton` - PASS ✅
- `it_caches_singletons_in_deep_chains` - PASS ✅

#### 5. Manual Provider Registration ✅
**Status**: Complete (Issue #20)
**Feature File**: `features/manual-registration.feature`

Manual registration via:
- `container.register_singleton(Type, factory_fn)`
- `container.register_factory(Type, factory_fn)`

**Completed**: Oct 26, 2025

#### 6. Type Safety with mypy ✅
**Status**: Complete (Issue #21)
**Feature File**: `features/type-safety.feature`

- Container.resolve() has proper type hints
- Works with generic types
- Invalid resolutions caught by mypy
- Decorators preserve type information

**Completed**: Oct 26, 2025

---

### Quality Gates (MUST HAVE)

#### Test Coverage
- **Current**: 100% (29/32 tests passing, 3 skipped)
- **Target**: 100% line coverage, 100% branch coverage ✅
- **Status**: All tests passing, coverage goals achieved

#### Code Quality
- Ruff formatting: ✅ Passing
- Ruff linting: ✅ Passing
- mypy type checking: ✅ Passing
- Cargo clippy: ✅ Passing

#### Documentation
- [x] README.md
- [x] COVERAGE.md
- [x] CLAUDE.md
- [x] BDD feature files (6 files)
- [ ] API documentation (docstrings)
- [ ] CHANGELOG.md for 0.0.1-alpha

---

### CI/CD Pipeline (MUST HAVE)

#### GitHub Actions Workflows

**1. Continuous Integration** (`.github/workflows/ci.yml`)
- Triggered on: Push to main, PR creation/update
- Matrix: Python 3.11, 3.12, 3.13
- Steps:
  - Checkout code
  - Setup Rust toolchain
  - Setup Python with uv
  - Install dependencies (`uv sync --all-extras --all-groups`)
  - Build Rust extension (`uv run maturin develop`)
  - Run tests with coverage (`uv run pytest --cov`)
  - Upload coverage to Codecov
  - Run linters (ruff, mypy, clippy)
  - Type checking

**2. Release Pipeline** (`.github/workflows/release.yml`)
- Triggered on: Git tag push (v*.*.*)
- Steps:
  - Build wheels for multiple platforms (maturin)
  - Run full test suite
  - Publish to PyPI (test instance for alpha)
  - Create GitHub Release with changelog
  - Upload build artifacts

**3. Pre-commit Automation** (`.github/workflows/pre-commit.yml`)
- Triggered on: PR creation/update
- Runs all pre-commit hooks in CI
- Prevents broken code from being merged

---

### Out of Scope (Future Releases)

The following features are **explicitly excluded** from 0.0.1-alpha:

❌ **Circular dependency detection** - Tests are written but skipped
❌ **Named tokens** for disambiguation
❌ **Provider functions** (only factory functions supported)
❌ **Property injection** (constructor injection only)
❌ **Conditional registration**
❌ **Performance benchmarks**
❌ **Documentation site**
❌ **Mutation testing** with mutmut

---

## Issues for 0.0.1-alpha Milestone

### Critical Path Issues

1. ✅ **Issue #19: Fix Singleton Caching Bug** (COMPLETE)
   - Labels: `bug`, `critical`, `0.0.1-alpha`
   - Completed: Oct 26, 2025
   - Design Doc: `docs/design/singleton-caching-fix.md`
   - Commits: 120ef0d (tests), b7b2e4d (fix)

2. ✅ **Issue #20: Implement Manual Provider Registration** (COMPLETE)
   - Labels: `feature`, `0.0.1-alpha`
   - Completed: Oct 26, 2025
   - Commit: 73e4d09

3. ✅ **Issue #21: Type Safety Testing with mypy** (COMPLETE)
   - Labels: `testing`, `type-safety`, `0.0.1-alpha`
   - Completed: Oct 26, 2025
   - Commit: 08bae41

### Infrastructure Issues

4. ⚠️ **Issue #22: GitHub Actions CI Workflow** (IN PROGRESS)
   - Labels: `ci-cd`, `infrastructure`, `0.0.1-alpha`
   - Status: Partially complete, needs fixes
   - Design Doc: `docs/design/github-actions-ci.md`
   - Recent work: Commits 680017e, dcd28ca, 2e912f0, a318625

5. **Issue #23: GitHub Actions Release Workflow** (TODO)
   - Labels: `ci-cd`, `infrastructure`, `0.0.1-alpha`
   - Status: Not started
   - Design Doc: `docs/design/github-actions-release.md`
   - Estimated Effort: 1 day

### Documentation Issues

6. **Issue #24: Complete API Documentation** (TODO)
   - Labels: `documentation`, `0.0.1-alpha`
   - Status: Not started
   - Requirements: Docstrings for all public API
   - Estimated Effort: 0.5 days

---

## Risk Assessment

### High Risks

**Risk 1: Singleton Caching Fix Complexity**
- **Impact**: Blocks entire release
- **Mitigation**: Prioritize as Issue #1, assign to senior-developer immediately
- **Contingency**: If Rust fix is complex, implement Python-side caching as temporary workaround

**Risk 2: PyO3/Maturin Build Complexity in CI**
- **Impact**: CI pipeline unreliable
- **Mitigation**: Use proven GitHub Actions (actions-rs/toolchain, PyO3/maturin-action)
- **Contingency**: Simplify matrix (fewer Python versions) if build time excessive

### Medium Risks

**Risk 3: Type Safety Testing Complexity**
- **Impact**: Delayed release
- **Mitigation**: Focus on core resolve() type hints, defer advanced generics if needed
- **Contingency**: Reduce type-safety scenarios for alpha

---

## Release Checklist

**Phase 1: Fix Core Bugs** (Week 1)
- [ ] Issue #1: Fix singleton caching bug
- [ ] All 23 tests passing
- [ ] Coverage at 100%

**Phase 2: Complete Features** (Week 1-2)
- [ ] Issue #2: Manual provider registration
- [ ] Issue #3: Type safety testing
- [ ] All BDD scenarios passing

**Phase 3: Infrastructure** (Week 2)
- [ ] Issue #4: CI workflow operational
- [ ] Issue #5: Release workflow tested
- [ ] Pre-commit hooks in CI

**Phase 4: Documentation** (Week 2-3)
- [ ] Issue #6: API documentation complete
- [ ] CHANGELOG.md for 0.0.1-alpha
- [ ] README updated with alpha status

**Phase 5: Release** (Week 3)
- [ ] Tag v0.0.1-alpha
- [ ] Publish to Test PyPI
- [ ] Create GitHub Release
- [ ] Announce in discussions

---

## Definition of Done

For 0.0.1-alpha to be **DONE**:

✅ **Functionality**
- All 6 feature files have passing scenarios
- Manual provider registration works
- Type hints verified with mypy

✅ **Quality**
- 100% test coverage (line and branch)
- All linters passing (ruff, mypy, clippy)
- Pre-commit hooks passing

✅ **Infrastructure**
- CI workflow runs on every PR
- Release workflow tested (dry run)
- Build succeeds on Python 3.11, 3.12, 3.13

✅ **Documentation**
- All public API has docstrings
- CHANGELOG.md documents alpha release
- README reflects current state

✅ **Release**
- Package built successfully
- Published to Test PyPI
- GitHub Release created
- Installation verified: `pip install -i https://test.pypi.org/simple/ dioxide`

---

## Post-Alpha Retrospective Questions

After releasing 0.0.1-alpha, the team should discuss:

1. **What went well?** What should we keep doing?
2. **What didn't go well?** What should we change?
3. **What did we learn** about the Rust/Python hybrid architecture?
4. **What surprised us?** Unexpected challenges or wins?
5. **What's the priority** for 0.0.2-alpha?

---

## Approval

**Product Lead**: @mikelane
**Technical Lead**: @mikelane
**Status**: Awaiting implementation

---

*This scope document is a living document and may be updated as we learn more during implementation.*
