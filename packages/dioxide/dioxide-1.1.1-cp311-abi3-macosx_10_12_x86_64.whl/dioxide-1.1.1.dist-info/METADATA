Metadata-Version: 2.4
Name: dioxide
Version: 1.1.1
Classifier: Development Status :: 3 - Alpha
Classifier: Intended Audience :: Developers
Classifier: License :: OSI Approved :: MIT License
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.11
Classifier: Programming Language :: Python :: 3.12
Classifier: Programming Language :: Python :: 3.13
Classifier: Programming Language :: Python :: 3.14
Classifier: Programming Language :: Rust
Classifier: Topic :: Software Development :: Libraries :: Python Modules
Classifier: Typing :: Typed
Requires-Dist: maturin>=1.0,<2.0 ; extra == 'dev'
Requires-Dist: pytest>=8.0 ; extra == 'dev'
Requires-Dist: pytest-cov>=4.1 ; extra == 'dev'
Requires-Dist: behave>=1.2.6 ; extra == 'dev'
Requires-Dist: mypy>=1.8 ; extra == 'dev'
Requires-Dist: ruff>=0.1 ; extra == 'dev'
Requires-Dist: isort>=5.13 ; extra == 'dev'
Requires-Dist: tox>=4.0 ; extra == 'dev'
Requires-Dist: pre-commit>=3.0 ; extra == 'dev'
Requires-Dist: mutmut>=2.4 ; extra == 'dev'
Provides-Extra: dev
License-File: LICENSE
Summary: Fast, Rust-backed declarative dependency injection for Python
Keywords: dependency-injection,di,ioc,rust,container
Author-email: Mike Lane <mikelane@gmail.com>
License: MIT
Requires-Python: >=3.11
Description-Content-Type: text/markdown; charset=UTF-8; variant=GFM
Project-URL: Homepage, https://github.com/mikelane/dioxide
Project-URL: Repository, https://github.com/mikelane/dioxide
Project-URL: Issues, https://github.com/mikelane/dioxide/issues

# dioxide

**Fast, Rust-backed declarative dependency injection for Python**

[![CI](https://github.com/mikelane/dioxide/workflows/CI/badge.svg)](https://github.com/mikelane/dioxide/actions)
[![Release](https://github.com/mikelane/dioxide/actions/workflows/release-automated.yml/badge.svg)](https://github.com/mikelane/dioxide/actions/workflows/release-automated.yml)
[![PyPI version](https://badge.fury.io/py/dioxide.svg)](https://pypi.org/project/dioxide/)
[![Python Versions](https://img.shields.io/pypi/pyversions/dioxide.svg)](https://pypi.org/project/dioxide/)
[![Platform Support](https://img.shields.io/badge/platform-Linux%20%7C%20macOS%20%7C%20Windows-blue)](https://github.com/mikelane/dioxide)
[![Architecture](https://img.shields.io/badge/arch-x86__64%20%7C%20aarch64-green)](https://github.com/mikelane/dioxide)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

---

## Overview

`dioxide` is a dependency injection framework for Python that combines:

- **Declarative Python API** - Simple decorators and type hints
- **Rust-backed performance** - Fast graph construction and resolution via PyO3
- **Type safety** - Full support for mypy and type checkers
- **Clean architecture** - Encourages loose coupling and testability

## Installation

```bash
pip install dioxide
```

### Platform Support

| Platform | x86_64 | ARM64/aarch64 |
|----------|--------|---------------|
| Linux    | âœ…     | âœ…            |
| macOS    | âœ…     | âœ… (M1/M2/M3) |
| Windows  | âœ…     | âŒ            |

**Python Versions**: 3.11, 3.12, 3.13, 3.14

## Status

ğŸš§ **Work in Progress** - Currently implementing the v0.1 Walking Skeleton.

See [Issues](https://github.com/mikelane/dioxide/issues) and [Milestones](https://github.com/mikelane/dioxide/milestones) for current progress.

## Vision

Traditional Python DI frameworks like `dependency-injector` are feature-rich but can be slow with large dependency graphs. `dioxide` aims to provide:

1. **Fast graph construction** using Rust's `petgraph`
2. **Type-based resolution** via Python's `__annotations__`
3. **Lifecycle management** with proper shutdown ordering
4. **Clear error messages** for missing dependencies and cycles

## Quick Start (Planned API)

```python
from dioxide import Container, Scope, component

@component(scope=Scope.SINGLETON)
class DatabaseConnection:
    def __init__(self, connection_string: str):
        self.connection_string = connection_string

@component(scope=Scope.SINGLETON)
class UserRepository:
    def __init__(self, db: DatabaseConnection):
        self.db = db

# Create container and register components
container = Container()
container.register_value('connection_string', 'postgresql://localhost/mydb')
container.register(DatabaseConnection)
container.register(UserRepository)

# Resolve dependencies
repo = container.resolve(UserRepository)
# repo.db is automatically injected

# Clean shutdown
container.shutdown()
```

## Features

### v0.1 Walking Skeleton (In Progress)
- [x] Basic project structure
- [ ] Type-based dependency resolution
- [ ] Singleton and factory scopes
- [ ] Value injection by parameter name
- [ ] Duplicate registration prevention
- [ ] Clear error messages

### v0.2 Core Features (Planned)
- [ ] Named tokens for disambiguation
- [ ] Circular dependency detection
- [ ] Graceful shutdown with reverse ordering
- [ ] Comprehensive test coverage (>95%)
- [ ] Mutation testing with `mutmut`

### Future Enhancements (Backlog)
- [ ] Conditional registration
- [ ] Provider functions
- [ ] Property injection
- [ ] Performance benchmarks vs. `dependency-injector`
- [ ] Documentation site

## Development

### Prerequisites

- Python 3.11+
- Rust 1.70+
- [uv](https://github.com/astral-sh/uv) for Python package management
- [maturin](https://github.com/PyO3/maturin) for building Rust extensions

### Setup

```bash
# Clone the repository
git clone https://github.com/mikelane/dioxide.git
cd dioxide

# Install dependencies with uv
uv venv
source .venv/bin/activate  # or `.venv\Scripts\activate` on Windows
uv pip install -e ".[dev]"

# Build the Rust extension
maturin develop

# Run tests
pytest

# Run all quality checks
tox
```

### Development Workflow

```bash
# Format code
tox -e format

# Lint
tox -e lint

# Type check
tox -e type

# Run tests for all Python versions
tox

# Run tests with coverage
tox -e cov

# Mutation testing
tox -e mutate
```

### Pre-commit Hooks

Install pre-commit hooks to ensure code quality:

```bash
pre-commit install
```

## Architecture

```
dioxide/
â”œâ”€â”€ python/dioxide/       # Python API
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ container.py       # Main Container class
â”‚   â”œâ”€â”€ decorators.py      # @component decorator
â”‚   â””â”€â”€ scope.py           # Scope enum
â”œâ”€â”€ rust/src/              # Rust core
â”‚   â””â”€â”€ lib.rs             # PyO3 bindings and graph logic
â”œâ”€â”€ tests/                 # Python tests
â””â”€â”€ pyproject.toml         # Project configuration
```

### Key Design Decisions

1. **Rust for graph operations** - Dependency graphs can get complex; Rust's performance and safety help scale
2. **Python-first API** - Developers work in pure Python; Rust is an implementation detail
3. **Type hints as the contract** - Leverage Python's type system for DI metadata
4. **Explicit over implicit** - Registration is manual to avoid surprises
5. **Test-driven development** - Every feature starts with failing tests

## Comparison to Other Frameworks

| Feature | dioxide | dependency-injector | injector |
|---------|----------|---------------------|----------|
| Type-based DI | âœ… | âœ… | âœ… |
| Rust-backed | âœ… | âŒ | âŒ |
| Scopes | âœ… | âœ… | âœ… |
| Lifecycle | âœ… | âœ… | âŒ |
| Cycle detection | âœ… (planned) | âŒ | âŒ |
| Performance* | ğŸš€ (goal) | âš¡ | âš¡ |

*Benchmarks coming in v0.2

## Contributing

Contributions are welcome! Please see [CONTRIBUTING.md](CONTRIBUTING.md) for guidelines.

### Roadmap

- v0.1: Walking skeleton with basic DI
- v0.2: Production-ready core features
- v0.3: Performance optimization and benchmarks
- v1.0: Stable API

## License

MIT License - see [LICENSE](LICENSE) for details.

## Acknowledgments

- Inspired by [dependency-injector](https://github.com/ets-labs/python-dependency-injector) and Spring Framework
- Built with [PyO3](https://github.com/PyO3/pyo3) and [maturin](https://github.com/PyO3/maturin)
- Graph algorithms powered by [petgraph](https://github.com/petgraph/petgraph)

---

**Note**: This project is under active development. APIs may change before v1.0.

