[project]
name = "miseqinteropreader"
dynamic = ["version"]
description = "Python parser for Illumina MiSeq InterOp binary files"
authors = [
    { name = "drickett", email = "drickett@bccfe.ca" },
    { name = "Vitaliy Mysak", email = "vmysak@bccfe.ca" },
]
requires-python = ">=3.11,<3.13"
readme = "README.md"
license = {text = "MIT"}
classifiers = [
    "License :: OSI Approved :: MIT License",
    "Programming Language :: Python",
    "Programming Language :: Python :: 3",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
    "Operating System :: OS Independent",
    "Development Status :: 4 - Beta",
    "Intended Audience :: Science/Research",
    "Intended Audience :: Developers",
    "Topic :: Scientific/Engineering :: Bio-Informatics",
]

dependencies = [
    "pydantic>=2.8.2,<3.0.0",
    "pandas>=2.2.2,<3.0.0",
    "pyarrow>=16.0.0",
]

[project.optional-dependencies]
dev = [
    "pytest>=8.2.2",
    "pytest-cov>=5.0.0",
    "pytest-html>=4.1.1",
    "mypy>=1.10.1",
    "mypy-extensions>=1.0.0",
    "ruff>=0.5.1",
    "pandas-stubs>=2.2.2.240603",
    "uv>=0.5.0",
    "codecov==2.1.13",  # For reporting the code coverage.
]

[project.scripts]
miseq-interop = "miseqinteropreader.cli:main"

[tool.hatch.version]
source = "vcs"

[tool.hatch.version.raw-options]
# Never fail: use this if there is no Git repository / tags
fallback_version = "0.dev0"

[tool.hatch.build]
exclude = [
    "tests/",
]
skip-excluded-dirs = true

[tool.hatch.build.targets.wheel]
packages = ["src/miseqinteropreader"]

[build-system]
requires = ["hatchling", "hatch-vcs"]
build-backend = "hatchling.build"

[tool.hatch.metadata]
allow-direct-references = true

# [tool.isort]
# profile = "black"

# [tool.black]
# target-version = ['py310']
# line-length = 120

[tool.pytest.ini_options]
pythonpath = ['src']
minversion = "6.0"
render_collapsed = "true"
addopts = "-p no:cacheproviders -vra --strict-markers --cov=src/miseqinteropreader --cov-report xml:coverage.xml --cov-report term --no-cov-on-fail"
filterwarnings = []

[tool.ruff]
line-length = 88

[tool.ruff.lint]
# pyflakes, pycodestyle, isort
select = ["I001"]
# fixable = ["ALL"]

[tool.coverage.run]
branch = true
parallel = true
omit = ["**/__init__.py"]

[tool.coverage.report]
exclude_lines = ["no cov", "if __name__ == .__main__.:", "if TYPE_CHECKING:"]
