"use strict";(self.webpackChunkjupyterlab_refresh_view_extension=self.webpackChunkjupyterlab_refresh_view_extension||[]).push([[509],{509:(e,t,o)=>{o.r(t),o.d(t,{default:()=>l});var r=o(986),n=o(249);const l={id:"jupyterlab_refresh_view_extension:plugin",description:"A JupyterLab to allow context menu option to refresh markdown or notebook",autoStart:!0,requires:[o(138).IDocumentManager],optional:[r.ICommandPalette,n.IFileBrowserFactory],activate:(e,t,o,r)=>{console.log("JupyterLab extension jupyterlab_refresh_view_extension is activated!");const{commands:n}=e,l="jupyterlab_refresh_view:refresh";n.addCommand(l,{label:"Refresh View",caption:"Refresh the current document view without scrolling",execute:async()=>{const o=e.shell.currentWidget;if(!o)return;const r=t.contextForWidget(o);if(!r)return;const n=o.node.querySelector(".jp-WindowedPanel-outer")||o.node.querySelector(".jp-RenderedMarkdown")||o.node.querySelector(".jp-FileEditor");let l=0,c=0,i=-1,s=0;if(n){l=n.scrollTop,c=n.scrollLeft;const e=Array.from(o.node.querySelectorAll(".jp-Cell"));if(e.length>0){const t=n.getBoundingClientRect();for(let o=0;o<e.length;o++){const r=e[o].getBoundingClientRect(),n=r.top-t.top;if(n>=-r.height&&n<=t.height){i=o,s=n;break}}}}try{if(await r.revert(),n&&(i>=0||l>0)){const e=()=>{if(i>=0){const e=Array.from(o.node.querySelectorAll(".jp-Cell"));if(i<e.length){const t=e[i],o=n.getBoundingClientRect(),r=t.getBoundingClientRect().top-o.top;return n.scrollTop+=r-s,n.scrollLeft=c,!0}}return n.scrollTop=l,n.scrollLeft=c,!1};e();let t=0,r=0;const a=50,d=setInterval(()=>{const o=n.scrollTop,c=e()?n.scrollTop:l;if(Math.abs(o-c)<1){if(r++,r>=3)return void clearInterval(d)}else r=0;t++,t>=a&&clearInterval(d)},100)}}catch(e){console.error("Failed to refresh document:",e)}},isEnabled:()=>{const o=e.shell.currentWidget;return!!o&&void 0!==t.contextForWidget(o)}}),o&&o.addItem({command:l,category:"File Operations"}),e.contextMenu.addItem({command:l,selector:".jp-Document",rank:0}),console.log("Context menu items registered for refresh view extension")}}}}]);