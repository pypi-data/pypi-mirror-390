import dotenv
import typer

from tencent_cloud_hackathon_intelligent_pentest_competition_api_server.client_sdk import APIClient
dotenv.load_dotenv()
app = typer.Typer()

client = APIClient.get_client()


@app.command()
def get_challenges():
    """Get the challenges"""
    print(client.get_challenges().model_dump_json(indent=4))


@app.command()
def get_challenge_hint(challenge_code: str):
    """Get the hint for a challenge"""
    print(
        client.get_challenge_hint(
            challenge_code=challenge_code,
        ).model_dump_json(indent=4),
    )


@app.command()
def submit_answer(challenge_code: str, answer: str):
    """Submit an answer for a challenge"""
    print(
        client.submit_answer(
            challenge_code=challenge_code,
            answer=answer,
        ).model_dump_json(indent=4),
    )


if __name__ == '__main__':
    app()
