from enum import Enum

from pydantic import BaseModel


class TargetInfo(BaseModel):
    ip: str
    port: list[int]


class Difficulty(str, Enum):
    EASY = 'easy'
    MEDIUM = 'medium'
    HARD = 'hard'


class Challenge(BaseModel):
    challenge_code: str
    difficulty: Difficulty
    points: int
    hint_viewed: bool
    solved: bool
    target_info: TargetInfo


class CompetitionStage(str, Enum):
    DEBUG = 'debug'
    COMPETITION = 'competition'


class GetChallengesResponse(BaseModel):
    current_stage: CompetitionStage
    challenges: list[Challenge]


class GetChallengeHintResponse(BaseModel):
    hint_content: str
    penalty_points: int
    first_use: bool


class SubmitAnswerRequest(BaseModel):
    challenge_code: str
    answer: str


class SubmitAnswerResponse(BaseModel):
    correct: bool
    earned_points: int
    is_solved: bool
