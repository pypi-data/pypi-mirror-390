{
  "VasopressorNeed": "exists union(\n  Norepinephrine,\n  Epinephrine,\n  Vasopressin,\n  Dopamine,\n  Phenylephrine\n) from #now + 12 h to #now + 24 h every 4 h from ((SepsisOnset where #value < Discharge) impute Admission) to min(Discharge, Admission + 14 days)",
  "SOFA": "sofa - shift(sofa, -3)\nwith sofa as (\n(case when pf_ratio >= 400 then 0\n    when pf_ratio >= 300 then 1\n    when pf_ratio >= 200 then 2\n    when not exists InvasiveVentilation from #now - 24 h to #now then 2\n    when pf_ratio >= 100 then 3\n    else 4 end) +\n(case when platelets >= 150 then 0\n    when platelets >= 100 then 1\n    when platelets >= 50 then 2\n    when platelets >= 20 then 3\n    else 4 end) + \n(case when bili < 1.2 then 0\n    when bili < 2 then 1\n    when bili < 6 then 2\n    when bili < 12 then 3\n    else 4 end) +\n(case when dopa > 15 or epi > 0.1 then 4\n    when dopa > 5 or epi > 0 then 3\n    when dopa > 0 then 2\n    when (min MeanBP from #now - 24 h to #now) < 70 then 1 \n    else 0 end) + \n(case when gcs > 14 then 0\n    when gcs > 12 then 1\n    when gcs > 9 then 2\n    when gcs > 5 then 3\n    else 4 end) + \n(case when creat < 1.2 then 0\n    when creat < 2 then 1\n    when creat < 3.5 then 2\n    when creat < 5 or uop < 500 then 3\n    else 4 end)\nimpute 0\n)\nwith dopa as (\n    max Dopamine / 30 from #now - 24 h to #now impute 0\n)\nwith epi as (\n    max union(Epinephrine, Norepinephrine) / 30 from #now - 24 h to #now impute 0\n)\nwith gcs as (\n   (last GCSTotal from #now - 4 h to #now carry 24 hours) impute (\n      (last GCSEye from #now - 4 h to #now impute mean) + \n      (last GCSMotor from #now - 4 h to #now impute mean) +\n      (last GCSVerbal from #now - 4 h to #now impute mean)\n    carry 24 hours\n   )\n)\nwith pf_ratio as (\n    ((last PaO2 from #now - 24 h to #now) / \n    (max(last FiO2 from #now - 24 h to #now, 0.2))) * 100\n    carry 24 hours\n    impute mean\n)\nwith platelets as (\n    last Platelets from #now - 24 h to #now carry 24 h impute mean\n)\nwith bili as (\n    last TotalBili from #now - 24 h to #now carry 24 h impute mean\n)\nwith creat as (\n    last Creatinine from #now - 24 h to #now carry 24 h impute mean\n)\nwith uop as (\n    (sum Output from #now - 24 h to #now impute 0)\n)\nevery 4 h from ((SepsisOnset where #value < Discharge) impute Admission) to min(Discharge, Admission + 14 days)",
  "Mortality": "HospitalMortality every 4 h from ((SepsisOnset where #value < Discharge) impute Admission) to min(Discharge, Admission + 14 days)",
  "DischargeTime": "(min((Discharge - #now) as hours, 14 * 24)\nevery 4 h \n  from ((SepsisOnset where #value < Discharge) impute Admission)\n  to min(Discharge, Admission + 14 days))"
}
