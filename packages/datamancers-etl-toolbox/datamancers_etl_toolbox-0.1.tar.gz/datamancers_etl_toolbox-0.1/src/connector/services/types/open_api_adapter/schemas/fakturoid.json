{
  "openapi": "3.0.3",
  "info": {
    "title": "Fakturoid API v3",
    "description": "Complete API for Fakturoid accounting system. All requests must be made via HTTPS. Rate limit: 400 requests per 60 seconds. Documentation: https://www.fakturoid.cz/api/v3",
    "version": "3.0.0",
    "contact": {
      "name": "Fakturoid Support",
      "email": "podpora@fakturoid.cz",
      "url": "https://www.fakturoid.cz/api/v3"
    }
  },
  "servers": [
    {
      "url": "https://app.fakturoid.cz/api/v3",
      "description": "Fakturoid API v3 Production Server"
    }
  ],
  "paths": {
    "/oauth/token": {
      "post": {
        "summary": "Obtain OAuth 2.0 Access Token",
        "description": "Get access token using Client Credentials Flow. Requires Client ID and Secret from Fakturoid user settings. Access token expires after 2 hours (7200 seconds).",
        "operationId": "getOAuthToken",
        "tags": ["OAuth"],
        "security": [],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "HTTP Basic authentication with base64-encoded client_id:client_secret",
            "schema": {
              "type": "string",
              "example": "Basic Y2xpZW50X2lkOmNsaWVudF9zZWNyZXQ="
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "grant_type": {
                    "type": "string",
                    "enum": ["client_credentials"],
                    "description": "OAuth 2.0 grant type"
                  }
                },
                "required": ["grant_type"]
              },
              "example": {
                "grant_type": "client_credentials"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully obtained access token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "access_token": {
                      "type": "string",
                      "description": "Bearer token to use in API requests",
                      "example": "26e53aa3244b4c0aed56cb54a0223484e9c4aea49b09a03e4600ba995811b6af"
                    },
                    "token_type": {
                      "type": "string",
                      "enum": ["Bearer"],
                      "example": "Bearer"
                    },
                    "expires_in": {
                      "type": "integer",
                      "description": "Token lifetime in seconds",
                      "example": 7200
                    }
                  },
                  "required": ["access_token", "token_type", "expires_in"]
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/BadRequest"
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          }
        }
      }
    },
    "/user.json": {
      "get": {
        "summary": "Get Current User",
        "description": "Returns information about the current authenticated user including list of accessible accounts",
        "operationId": "getCurrentUser",
        "tags": ["Users"],
        "responses": {
          "200": {
            "description": "Successfully retrieved current user",
            "headers": {
              "X-RateLimit-Policy": {
                "$ref": "#/components/headers/X-RateLimit-Policy"
              },
              "X-RateLimit": {
                "$ref": "#/components/headers/X-RateLimit"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/User"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/Unauthorized"
          },
          "429": {
            "$ref": "#/components/responses/TooManyRequests"
          }
        }
      }
    },
    "/accounts/{slug}.json": {
      "get": {
        "summary": "Get Account Details",
        "description": "Returns details about the specified account",
        "operationId": "getAccount",
        "tags": ["Account"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved account",
            "headers": {
              "X-RateLimit-Policy": {
                "$ref": "#/components/headers/X-RateLimit-Policy"
              },
              "X-RateLimit": {
                "$ref": "#/components/headers/X-RateLimit"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Account"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/accounts/{slug}/subjects.json": {
      "get": {
        "summary": "List Subjects",
        "description": "Retrieve a list of subjects (customers and suppliers)",
        "operationId": "listSubjects",
        "tags": ["Subjects"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "$ref": "#/components/parameters/Page"
          },
          {
            "name": "since",
            "in": "query",
            "description": "Filter subjects updated since the specified date (ISO 8601 format)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2023-01-01T00:00:00+01:00"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved subjects",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Subject"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create Subject",
        "description": "Create a new subject (customer or supplier)",
        "operationId": "createSubject",
        "tags": ["Subjects"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          }
        ],
        "requestBody": {
            "required": true,
          "content": {
            "application/json": {
            "schema": {
                "$ref": "#/components/schemas/CreateSubjectRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Subject successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Subject"
                }
              }
            }
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/accounts/{slug}/subjects/{id}.json": {
      "get": {
        "summary": "Get Subject",
        "description": "Get a specific subject by ID",
        "operationId": "getSubject",
        "tags": ["Subjects"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "$ref": "#/components/parameters/Id"
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved subject",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Subject"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      },
      "patch": {
        "summary": "Update Subject",
        "description": "Update an existing subject",
        "operationId": "updateSubject",
        "tags": ["Subjects"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "$ref": "#/components/parameters/Id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateSubjectRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Subject successfully updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Subject"
                }
              }
            }
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      },
      "delete": {
        "summary": "Delete Subject",
        "description": "Delete a subject",
        "operationId": "deleteSubject",
        "tags": ["Subjects"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "$ref": "#/components/parameters/Id"
          }
        ],
        "responses": {
          "204": {
            "description": "Subject successfully deleted"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
              }
            }
          }
        },
    "/accounts/{slug}/invoices.json": {
      "get": {
        "summary": "List Invoices",
        "description": "Retrieve a list of invoices",
        "operationId": "listInvoices",
        "tags": ["Invoices"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "$ref": "#/components/parameters/Page"
          },
          {
            "name": "since",
            "in": "query",
            "description": "Filter invoices updated since the specified date",
            "schema": {
              "type": "string",
              "format": "date-time"
            }
          },
          {
            "name": "status",
            "in": "query",
            "description": "Filter by invoice status",
            "schema": {
              "type": "string",
              "enum": ["open", "sent", "overdue", "paid", "cancelled"]
            }
          },
          {
            "name": "subject_id",
            "in": "query",
            "description": "Filter by subject ID",
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved invoices",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Invoice"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create Invoice",
        "description": "Create a new invoice",
        "operationId": "createInvoice",
        "tags": ["Invoices"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateInvoiceRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Invoice successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Invoice"
                }
              }
            }
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/accounts/{slug}/invoices/{id}.json": {
      "get": {
        "summary": "Get Invoice",
        "description": "Get a specific invoice by ID",
        "operationId": "getInvoice",
        "tags": ["Invoices"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "$ref": "#/components/parameters/Id"
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved invoice",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Invoice"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      },
      "patch": {
        "summary": "Update Invoice",
        "description": "Update an existing invoice",
        "operationId": "updateInvoice",
        "tags": ["Invoices"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "$ref": "#/components/parameters/Id"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UpdateInvoiceRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Invoice successfully updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Invoice"
          }
        }
      }
    },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      },
      "delete": {
        "summary": "Delete Invoice",
        "description": "Delete an invoice",
        "operationId": "deleteInvoice",
        "tags": ["Invoices"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "$ref": "#/components/parameters/Id"
          }
        ],
        "responses": {
          "204": {
            "description": "Invoice successfully deleted"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/accounts/{slug}/expenses.json": {
      "get": {
        "summary": "List Expenses",
        "description": "Retrieve a list of expenses for the specified account",
        "operationId": "listExpenses",
        "tags": ["Expenses"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "$ref": "#/components/parameters/Page"
          },
          {
            "name": "since",
            "in": "query",
            "required": false,
            "description": "Filter by updated_at date (ISO 8601 format)",
            "schema": {
              "type": "string",
              "format": "date-time",
              "example": "2023-12-01T00:00:00+01:00"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved expenses",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Expense"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create Expense",
        "description": "Create a new expense document",
        "operationId": "createExpense",
        "tags": ["Expenses"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          }
        ],
        "requestBody": {
            "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateExpenseRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Expense successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Expense"
                }
              }
            }
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/accounts/{slug}/expenses/search.json": {
      "get": {
        "summary": "Fulltext Search Expenses",
        "description": "Search expenses by number, variable_symbol, original_number, supplier_name, supplier_registration_no, supplier_vat_no, description, private_note, and lines",
        "operationId": "searchExpenses",
        "tags": ["Expenses"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "name": "query",
            "in": "query",
            "required": false,
            "description": "Search query string",
            "schema": {
              "type": "string",
              "example": "Search string"
            }
          },
          {
            "name": "tags",
            "in": "query",
            "required": false,
            "description": "Search in tags",
            "schema": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "example": ["PPC"]
            }
          },
          {
            "$ref": "#/components/parameters/Page"
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved search results",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Expense"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/accounts/{slug}/expenses/{id}.json": {
      "get": {
        "summary": "Get Expense Detail",
        "description": "Retrieve detailed information about a specific expense",
        "operationId": "getExpense",
        "tags": ["Expenses"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "$ref": "#/components/parameters/Id"
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved expense details",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Expense"
                }
              }
            }
          }
        }
      },
      "patch": {
        "summary": "Update Expense",
        "description": "Update an existing expense document",
        "operationId": "updateExpense",
        "tags": ["Expenses"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "$ref": "#/components/parameters/Id"
          }
        ],
        "requestBody": {
            "required": true,
          "content": {
            "application/json": {
            "schema": {
                "$ref": "#/components/schemas/UpdateExpenseRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Expense successfully updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Expense"
                }
              }
            }
          },
          "403": {
            "$ref": "#/components/responses/LockedError"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      },
      "delete": {
        "summary": "Delete Expense",
        "description": "Permanently delete an expense document",
        "operationId": "deleteExpense",
        "tags": ["Expenses"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "$ref": "#/components/parameters/Id"
          }
        ],
        "responses": {
          "204": {
            "description": "Expense successfully deleted"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/accounts/{slug}/expenses/{expense_id}/attachments/{id}/download": {
      "get": {
        "summary": "Download Expense Attachment",
        "description": "Download the binary content of an expense attachment",
        "operationId": "downloadExpenseAttachment",
        "tags": ["Expenses"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "name": "expense_id",
            "in": "path",
            "required": true,
            "description": "Expense ID",
            "schema": {
              "type": "integer",
              "example": 1
            }
          },
          {
            "$ref": "#/components/parameters/Id"
          }
        ],
        "responses": {
          "200": {
            "description": "Attachment content",
            "content": {
              "application/pdf": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          },
          "204": {
            "description": "File cannot be downloaded"
          }
        }
      }
    },
    "/accounts/{slug}/expenses/{id}/fire.json": {
      "post": {
        "summary": "Fire Expense Action",
        "description": "Perform an action on an expense (lock or unlock)",
        "operationId": "fireExpenseAction",
        "tags": ["Expenses"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "$ref": "#/components/parameters/Id"
          },
          {
            "name": "event",
            "in": "query",
            "required": true,
            "description": "Event name",
                "schema": {
                  "type": "string",
              "enum": ["lock", "unlock"],
              "example": "lock"
            }
          }
        ],
        "responses": {
          "204": {
            "description": "Action successfully fired"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/accounts/{slug}/inbox_files.json": {
      "get": {
        "summary": "List Inbox Files",
        "description": "Retrieve a list of inbox files for the specified account",
        "operationId": "listInboxFiles",
        "tags": ["Inbox Files"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "$ref": "#/components/parameters/Page"
          }
        ],
        "responses": {
          "200": {
            "description": "Successfully retrieved inbox files",
            "headers": {
              "X-RateLimit-Policy": {
                "$ref": "#/components/headers/X-RateLimit-Policy"
              },
              "X-RateLimit": {
                "$ref": "#/components/headers/X-RateLimit"
              }
            },
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/InboxFile"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Create Inbox File",
        "description": "Upload a new file to the inbox",
        "operationId": "createInboxFile",
        "tags": ["Inbox Files"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateInboxFileRequest"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "File successfully created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/InboxFile"
                }
              }
            }
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    },
    "/accounts/{slug}/inbox_files/{id}/send_to_ocr.json": {
      "post": {
        "summary": "Send Inbox File to OCR",
        "description": "Send an inbox file for OCR processing",
        "operationId": "sendInboxFileToOcr",
        "tags": ["Inbox Files"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "$ref": "#/components/parameters/Id"
          }
        ],
        "responses": {
          "204": {
            "description": "File successfully sent to OCR"
          },
          "403": {
            "$ref": "#/components/responses/QuotaExhausted"
          }
        }
      }
    },
    "/accounts/{slug}/inbox_files/{id}/download": {
      "get": {
        "summary": "Download Inbox File",
        "description": "Download the binary content of an inbox file",
        "operationId": "downloadInboxFile",
        "tags": ["Inbox Files"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "$ref": "#/components/parameters/Id"
          }
        ],
        "responses": {
          "200": {
            "description": "File content",
            "content": {
              "application/pdf": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              },
              "image/png": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              },
              "image/jpeg": {
                "schema": {
                  "type": "string",
                  "format": "binary"
                }
              }
            }
          }
        }
      }
    },
    "/accounts/{slug}/inbox_files/{id}.json": {
      "delete": {
        "summary": "Delete Inbox File",
        "description": "Permanently delete an inbox file",
        "operationId": "deleteInboxFile",
        "tags": ["Inbox Files"],
        "parameters": [
          {
            "$ref": "#/components/parameters/Slug"
          },
          {
            "$ref": "#/components/parameters/Id"
          }
        ],
        "responses": {
          "204": {
            "description": "File successfully deleted"
          },
          "422": {
            "$ref": "#/components/responses/ValidationError"
          }
        }
      }
    }
  },
  "components": {
    "securitySchemes": {
      "OAuth2ClientCredentials": {
        "type": "oauth2",
        "description": "OAuth 2.0 Client Credentials Flow. Get Client ID and Secret from Fakturoid user settings (Settings → User account). Access token expires after 2 hours. See: https://www.fakturoid.cz/api/v3/authorization#client-credentials-flow",
        "flows": {
          "clientCredentials": {
            "tokenUrl": "https://app.fakturoid.cz/api/v3/oauth/token",
            "scopes": {}
          }
        }
      }
    },
    "parameters": {
      "Slug": {
            "name": "slug",
            "in": "path",
            "required": true,
        "description": "Account name/slug",
            "schema": {
              "type": "string",
              "example": "applecorp"
            }
          },
      "Id": {
            "name": "id",
            "in": "path",
            "required": true,
        "description": "Resource ID",
            "schema": {
              "type": "integer",
              "example": 1
            }
      },
      "Page": {
        "name": "page",
        "in": "query",
        "required": false,
        "description": "Page number (40 records per page)",
        "schema": {
          "type": "integer",
          "minimum": 1,
          "default": 1,
          "example": 2
        }
      },
      "UserAgent": {
        "name": "User-Agent",
        "in": "header",
        "required": true,
        "description": "Application identifier with contact email. Required for all requests.",
        "schema": {
          "type": "string",
          "example": "YourApp (yourname@example.com)"
        }
      }
    },
    "headers": {
      "X-RateLimit-Policy": {
        "description": "Rate limit policy information",
        "schema": {
          "type": "string",
          "example": "default;q=400;w=60"
        }
      },
      "X-RateLimit": {
        "description": "Current rate limit status",
        "schema": {
          "type": "string",
          "example": "default;r=398;t=55"
        }
      }
    },
        "responses": {
      "BadRequest": {
        "description": "Bad request (e.g., missing User-Agent header)",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": "invalid_request",
              "error_description": "Required header \"User-Agent\" is missing"
            }
          }
        }
      },
      "Unauthorized": {
        "description": "Unauthorized - invalid or missing API key",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "NotFound": {
        "description": "Resource not found",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            }
          }
        }
      },
      "ValidationError": {
        "description": "Invalid data provided",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ValidationError"
            }
          }
        }
      },
      "TooManyRequests": {
        "description": "Rate limit exceeded. Wait until rate limit resets.",
        "headers": {
          "X-RateLimit-Policy": {
            "$ref": "#/components/headers/X-RateLimit-Policy"
          },
          "X-RateLimit": {
            "$ref": "#/components/headers/X-RateLimit"
          }
        },
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
                },
                "example": {
              "error": "rate_limit_exceeded",
              "error_description": "Rate limit exceeded. Please wait and retry."
            }
          }
        }
      },
      "QuotaExhausted": {
        "description": "OCR quota exhausted",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/QuotaError"
            },
            "example": {
              "error": "quota_exhausted",
              "error_description": "Number of available extractions exhausted"
            }
          }
        }
      },
      "LockedError": {
        "description": "Document locked error",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/LockedError"
            },
            "example": {
              "error": "document_locked",
              "error_description": "Document first needs to be unlocked to perform the action"
            }
          }
        }
      }
    },
    "schemas": {
      "User": {
        "type": "object",
        "description": "Current authenticated user",
        "properties": {
          "id": {
            "type": "integer",
            "description": "User ID",
            "example": 12345
          },
          "email": {
            "type": "string",
            "format": "email",
            "example": "user@example.com"
          },
          "full_name": {
            "type": "string",
            "example": "John Doe"
          },
          "accounts": {
            "type": "array",
            "description": "List of accessible accounts",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "integer"
                },
                "name": {
                  "type": "string"
                },
                "slug": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "Account": {
        "type": "object",
        "description": "Fakturoid account details",
        "properties": {
          "id": {
            "type": "integer",
            "example": 1
          },
          "name": {
            "type": "string",
            "example": "Apple Corp"
          },
          "slug": {
            "type": "string",
            "example": "applecorp"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "phone": {
            "type": "string"
          },
          "web": {
            "type": "string",
            "format": "uri"
          }
        }
      },
      "Subject": {
        "type": "object",
        "description": "Customer or supplier",
        "properties": {
          "id": {
            "type": "integer",
            "example": 1
          },
          "custom_id": {
            "type": "string",
            "nullable": true
          },
          "type": {
            "type": "string",
            "enum": ["customer", "supplier", "both"],
            "example": "customer"
          },
          "name": {
            "type": "string",
            "example": "Apple Inc."
          },
          "email": {
            "type": "string",
            "format": "email",
            "nullable": true
          },
          "registration_no": {
            "type": "string",
            "description": "IČO (company registration number)",
            "nullable": true
          },
          "vat_no": {
            "type": "string",
            "description": "DIČ (VAT number)",
            "nullable": true
          },
          "street": {
            "type": "string",
            "nullable": true
          },
          "city": {
            "type": "string",
            "nullable": true
          },
          "zip": {
            "type": "string",
            "nullable": true
          },
          "country": {
            "type": "string",
            "example": "CZ",
            "nullable": true
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        },
        "required": ["id", "name", "created_at", "updated_at"]
      },
      "CreateSubjectRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string",
            "description": "Subject name (required)"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "registration_no": {
            "type": "string"
          },
          "vat_no": {
            "type": "string"
          },
          "street": {
            "type": "string"
          },
          "city": {
            "type": "string"
          },
          "zip": {
            "type": "string"
          },
          "country": {
            "type": "string"
          }
        },
        "required": ["name"]
      },
      "UpdateSubjectRequest": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "email": {
            "type": "string",
            "format": "email"
          },
          "registration_no": {
            "type": "string"
          },
          "vat_no": {
            "type": "string"
          }
        }
      },
      "Invoice": {
        "type": "object",
        "description": "Invoice document",
        "properties": {
          "id": {
            "type": "integer"
          },
          "custom_id": {
            "type": "string",
            "nullable": true
          },
          "number": {
            "type": "string",
            "example": "2023-0001"
          },
          "subject_id": {
            "type": "integer"
          },
          "subject_name": {
            "type": "string"
          },
          "status": {
            "type": "string",
            "enum": ["open", "sent", "overdue", "paid", "cancelled"]
          },
          "issued_on": {
            "type": "string",
            "format": "date"
          },
          "due_on": {
            "type": "string",
            "format": "date"
          },
          "total": {
            "type": "number",
            "format": "decimal",
            "description": "Total amount including VAT"
          },
          "currency": {
            "type": "string",
            "example": "CZK"
          },
          "lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/InvoiceLine"
            }
          },
          "created_at": {
            "type": "string",
            "format": "date-time"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time"
          }
        }
      },
      "InvoiceLine": {
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "quantity": {
            "type": "number"
          },
          "unit_price": {
            "type": "number"
          },
          "vat_rate": {
            "type": "number",
            "description": "VAT rate in percent"
          }
        }
      },
      "CreateInvoiceRequest": {
        "type": "object",
        "properties": {
          "subject_id": {
            "type": "integer",
            "description": "Subject (customer) ID"
          },
          "number": {
            "type": "string",
            "description": "Invoice number (auto-generated if not provided)"
          },
          "issued_on": {
            "type": "string",
            "format": "date"
          },
          "due_on": {
            "type": "string",
            "format": "date"
          },
          "lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/InvoiceLine"
            }
          }
        },
        "required": ["subject_id", "lines"]
      },
      "UpdateInvoiceRequest": {
        "type": "object",
        "properties": {
          "subject_id": {
            "type": "integer"
          },
          "issued_on": {
            "type": "string",
            "format": "date"
          },
          "due_on": {
            "type": "string",
            "format": "date"
          },
          "lines": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/InvoiceLine"
            }
          }
        }
      },
      "Expense": {
        "type": "object",
        "description": "Represents an expense document in Fakturoid",
        "properties": {
          "id": {
            "type": "integer",
            "description": "Unique identifier in Fakturoid",
            "readOnly": true,
            "example": 209
          },
          "custom_id": {
            "type": "string",
            "description": "Identifier in your application",
            "nullable": true,
            "example": "ORD87968"
          },
          "number": {
            "type": "string",
            "description": "Expense number",
            "example": "N20231201"
          },
          "original_number": {
            "type": "string",
            "description": "Original expense number",
            "example": "AB14"
          },
          "variable_symbol": {
            "type": "string",
            "description": "Variable symbol",
            "example": "VS123"
          },
          "supplier_name": {
            "type": "string",
            "description": "Subject company name",
            "readOnly": true
          },
          "supplier_street": {
            "type": "string",
            "description": "Subject address street",
            "readOnly": true
          },
          "supplier_city": {
            "type": "string",
            "description": "Subject address city",
            "readOnly": true
          },
          "supplier_zip": {
            "type": "string",
            "description": "Subject address postal code",
            "readOnly": true
          },
          "supplier_country": {
            "type": "string",
            "description": "Subject address country (ISO Code)",
            "readOnly": true
          },
          "supplier_registration_no": {
            "type": "string",
            "description": "Subject registration number (IČO)",
            "readOnly": true
          },
          "supplier_vat_no": {
            "type": "string",
            "description": "Subject VAT number (DIČ)",
            "readOnly": true
          },
          "subject_id": {
            "type": "integer",
            "description": "Subject ID"
          },
          "status": {
            "type": "string",
            "description": "Current state of the expense",
            "enum": ["open", "overdue", "paid"],
            "readOnly": true
          },
          "document_type": {
            "type": "string",
            "description": "Type of expense document",
            "enum": ["invoice", "bill", "other"],
            "default": "invoice"
          },
          "issued_on": {
            "type": "string",
            "format": "date",
            "description": "Date of issue"
          },
          "taxable_fulfillment_due": {
            "type": "string",
            "format": "date",
            "description": "Chargeable event date"
          },
          "received_on": {
            "type": "string",
            "format": "date",
            "description": "Date when you received the expense from your supplier"
          },
          "due_on": {
            "type": "string",
            "format": "date",
            "description": "Date when the expense becomes overdue"
          },
          "remind_due_date": {
            "type": "boolean",
            "description": "Remind the upcoming due date with a Todo",
            "default": true
          },
          "paid_on": {
            "type": "string",
            "format": "date",
            "description": "Date when the expense was marked as paid",
            "readOnly": true,
            "nullable": true
          },
          "locked_at": {
            "type": "string",
            "format": "date-time",
            "description": "Date and time when the expense was locked",
            "readOnly": true,
            "nullable": true
          },
          "description": {
            "type": "string",
            "description": "Expense description"
          },
          "private_note": {
            "type": "string",
            "description": "Private note"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of tags"
          },
          "bank_account": {
            "type": "string",
            "description": "Bank account number"
          },
          "iban": {
            "type": "string",
            "description": "IBAN"
          },
          "swift_bic": {
            "type": "string",
            "description": "SWIFT/BIC"
          },
          "payment_method": {
            "type": "string",
            "description": "Payment method",
            "enum": ["bank", "cash", "card", "cod"]
          },
          "currency": {
            "type": "string",
            "description": "Currency code (ISO 4217)"
          },
          "exchange_rate": {
            "type": "string",
            "description": "Exchange rate"
          },
          "lines": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "integer"
                },
                "name": {
                  "type": "string"
                },
                "quantity": {
                  "type": "string"
                },
                "unit_name": {
                  "type": "string"
                },
                "unit_price": {
                  "type": "string"
                },
                "vat_rate": {
                  "type": "integer"
                },
                "unit_price_without_vat": {
                  "type": "string"
                },
                "unit_price_with_vat": {
                  "type": "string"
                },
                "total_price_without_vat": {
                  "type": "string"
                },
                "total_vat": {
                  "type": "string"
                },
                "native_total_price_without_vat": {
                  "type": "string"
                },
                "native_total_vat": {
                  "type": "string"
                }
              }
            }
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "The date and time of expense creation",
            "readOnly": true
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "The date and time of last expense update",
            "readOnly": true
          }
        },
        "required": ["id", "subject_id"]
      },
      "CreateExpenseRequest": {
        "type": "object",
        "description": "Request payload for creating an expense",
        "properties": {
          "custom_id": {
            "type": "string",
            "description": "Identifier in your application",
            "example": "ORD87968"
          },
          "subject_id": {
            "type": "integer",
            "description": "Subject ID (required)",
            "example": 16
          },
          "number": {
            "type": "string",
            "description": "Expense number"
          },
          "original_number": {
            "type": "string",
            "description": "Original expense number"
          },
          "variable_symbol": {
            "type": "string",
            "description": "Variable symbol"
          },
          "document_type": {
            "type": "string",
            "description": "Type of expense document",
            "enum": ["invoice", "bill", "other"],
            "default": "invoice"
          },
          "issued_on": {
            "type": "string",
            "format": "date",
            "description": "Date of issue"
          },
          "taxable_fulfillment_due": {
            "type": "string",
            "format": "date",
            "description": "Chargeable event date"
          },
          "received_on": {
            "type": "string",
            "format": "date",
            "description": "Date when you received the expense"
          },
          "due_on": {
            "type": "string",
            "format": "date",
            "description": "Due date"
          },
          "description": {
            "type": "string",
            "description": "Expense description"
          },
          "private_note": {
            "type": "string",
            "description": "Private note"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of tags"
          },
          "bank_account": {
            "type": "string",
            "description": "Bank account number"
          },
          "iban": {
            "type": "string",
            "description": "IBAN"
          },
          "payment_method": {
            "type": "string",
            "description": "Payment method",
            "enum": ["bank", "cash", "card", "cod"]
          },
          "currency": {
            "type": "string",
            "description": "Currency code (ISO 4217)"
          },
          "lines": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string",
                  "description": "Line item name"
                },
                "quantity": {
                  "type": "string",
                  "description": "Quantity"
                },
                "unit_name": {
                  "type": "string",
                  "description": "Unit name"
                },
                "unit_price": {
                  "type": "string",
                  "description": "Unit price"
                },
                "vat_rate": {
                  "type": "integer",
                  "description": "VAT rate"
                }
              },
              "required": ["name", "quantity", "unit_price", "vat_rate"]
            },
            "description": "Line items"
          }
        },
        "required": ["subject_id"]
      },
      "UpdateExpenseRequest": {
        "type": "object",
        "description": "Request payload for updating an expense",
        "properties": {
          "custom_id": {
            "type": "string",
            "description": "Identifier in your application"
          },
          "number": {
            "type": "string",
            "description": "Expense number"
          },
          "original_number": {
            "type": "string",
            "description": "Original expense number"
          },
          "variable_symbol": {
            "type": "string",
            "description": "Variable symbol"
          },
          "document_type": {
            "type": "string",
            "description": "Type of expense document",
            "enum": ["invoice", "bill", "other"]
          },
          "issued_on": {
            "type": "string",
            "format": "date",
            "description": "Date of issue"
          },
          "taxable_fulfillment_due": {
            "type": "string",
            "format": "date",
            "description": "Chargeable event date"
          },
          "received_on": {
            "type": "string",
            "format": "date",
            "description": "Date when you received the expense"
          },
          "due_on": {
            "type": "string",
            "format": "date",
            "description": "Due date"
          },
          "description": {
            "type": "string",
            "description": "Expense description"
          },
          "private_note": {
            "type": "string",
            "description": "Private note"
          },
          "tags": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "List of tags"
          },
          "lines": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "name": {
                  "type": "string"
                },
                "quantity": {
                  "type": "string"
                },
                "unit_name": {
                  "type": "string"
                },
                "unit_price": {
                  "type": "string"
                },
                "vat_rate": {
                  "type": "integer"
                }
              }
            }
          }
        }
      },
      "InboxFile": {
        "type": "object",
        "description": "Represents an inbox file in Fakturoid",
        "properties": {
          "id": {
            "type": "integer",
            "description": "Unique identifier in Fakturoid",
            "readOnly": true,
            "example": 51
          },
          "filename": {
            "type": "string",
            "description": "File name (with extension)",
            "example": "INV123654.png"
          },
          "bytesize": {
            "type": "integer",
            "description": "File size in bytes",
            "readOnly": true,
            "example": 1304
          },
          "send_to_ocr": {
            "type": "boolean",
            "description": "The file will be sent to OCR",
            "example": false
          },
          "sent_to_ocr_at": {
            "type": "string",
            "format": "date-time",
            "description": "The date and time the file was sent to OCR",
            "readOnly": true,
            "nullable": true,
            "example": "2023-12-20T16:34:19.704+01:00"
          },
          "ocr_status": {
            "type": "string",
            "enum": ["created", "processing", "processing_failed", "processing_rejected", "processed"],
            "description": "OCR file processing status",
            "readOnly": true,
            "nullable": true,
            "example": "created"
          },
          "ocr_completed_at": {
            "type": "string",
            "format": "date-time",
            "description": "The date and time the OCR file was completed",
            "readOnly": true,
            "nullable": true,
            "example": "2023-12-20T16:35:19.704+01:00"
          },
          "download_url": {
            "type": "string",
            "format": "uri",
            "description": "URL to download the file",
            "readOnly": true,
            "example": "https://app.fakturoid.cz/api/v3/accounts/applecorp/inbox_files/51/download"
          },
          "created_at": {
            "type": "string",
            "format": "date-time",
            "description": "The date and time of file creation",
            "readOnly": true,
            "example": "2023-12-04T09:49:58.188+01:00"
          },
          "updated_at": {
            "type": "string",
            "format": "date-time",
            "description": "The date and time of last file update",
            "readOnly": true,
            "example": "2023-12-04T09:49:58.237+01:00"
          }
        },
        "required": ["id", "filename", "bytesize", "send_to_ocr", "download_url", "created_at", "updated_at"]
      },
      "CreateInboxFileRequest": {
        "type": "object",
        "description": "Request payload for creating an inbox file",
        "properties": {
          "attachment": {
            "type": "string",
            "description": "Base64 encoded file content with MIME type prefix",
            "example": "data:application/pdf;base64,JVBERi0xLjQKJY8KMiAwIG9…E1CiUlRU9GCg=="
          },
          "filename": {
            "type": "string",
            "description": "File name (optional, will be generated if not provided)",
            "example": "INV123654.png"
          },
          "send_to_ocr": {
            "type": "boolean",
            "description": "Whether to send the file to OCR processing",
            "default": false,
            "example": true
          }
        },
        "required": ["attachment"]
      },
      "Error": {
        "type": "object",
        "description": "Generic error response",
        "properties": {
          "error": {
            "type": "string",
            "description": "Error code",
            "example": "invalid_request"
          },
          "error_description": {
            "type": "string",
            "description": "Human-readable error description",
            "example": "Required header \"User-Agent\" is missing"
          }
        },
        "required": ["error", "error_description"]
      },
      "ValidationError": {
        "type": "object",
        "description": "Validation error response (422)",
        "properties": {
          "errors": {
            "type": "object",
            "description": "Object containing field-specific error messages",
            "additionalProperties": {
              "type": "array",
              "items": {
                "type": "string"
              }
            },
            "example": {
              "name": ["can't be blank"],
              "email": ["is not a valid email address"]
            }
          }
        },
        "required": ["errors"]
      },
      "QuotaError": {
        "type": "object",
        "description": "Quota exhaustion error response",
        "properties": {
          "error": {
            "type": "string",
            "description": "Error code",
            "example": "quota_exhausted"
          },
          "error_description": {
            "type": "string",
            "description": "Human-readable error description",
            "example": "Number of available extractions exhausted"
          }
        },
        "required": ["error", "error_description"]
      },
      "LockedError": {
        "type": "object",
        "description": "Document locked error response",
        "properties": {
          "error": {
          "type": "string",
            "description": "Error code",
            "example": "document_locked"
          },
          "error_description": {
            "type": "string",
            "description": "Human-readable error description",
            "example": "Document first needs to be unlocked to perform the action"
          }
        },
        "required": ["error", "error_description"]
      }
    }
  },
  "security": [
    {
      "OAuth2ClientCredentials": []
    }
  ],
  "tags": [
    {
      "name": "OAuth",
      "description": "OAuth 2.0 authentication and token management"
    },
    {
      "name": "Users",
      "description": "User operations"
    },
    {
      "name": "Account",
      "description": "Account information"
    },
    {
      "name": "Subjects",
      "description": "Customer and supplier management"
    },
    {
      "name": "Invoices",
      "description": "Invoice management"
    },
    {
      "name": "Expenses",
      "description": "Expense document management"
    },
    {
      "name": "Inbox Files",
      "description": "Inbox file operations with OCR support"
    }
  ]
}
