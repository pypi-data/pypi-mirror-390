{% extends base_template|default:"bank_transaction_bridge/base.html" %}
{% load static %}
{% block title %}Import bank statement{% endblock %}
{% block body %}
    {% if nomapping %}
        <a href="{{ import_mapping_create_url }}" class="btn btn-accent mb-5">Add Import Mapping</a>
        <div class="text-warning">
            You need first at least one import mapping object (ImportMapping) to be able to import a file.
        </div>
    {% endif %}
    {% if form %}
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{ form }}
            <input type="submit" class="btn btn-accent btn-outline mt-5">
        </form>
    {% endif %}
    {% if result %}
        <div class="pb-2">{{ result.get_message }}</div>
        {% with result.get_errors as errors %}
            {% if errors %}
                <div class="grid grid-cols-5 gap-4 font-semibold border-b pb-2">
                    <div>Type</div>
                    <div>Field</div>
                    <div>Message</div>
                    <div>Input</div>
                </div>
                {% for error in errors %}
                    <div class="grid grid-cols-5 gap-4 py-2 border-b">
                        <div class="overflow-auto whitespace-nowrap">{{ error.type }}</div>
                        <div class="overflow-auto whitespace-nowrap">{{ error.field }}</div>
                        <div class="overflow-auto whitespace-nowrap">{{ error.message }}</div>
                        <div class="overflow-auto whitespace-nowrap">{{ error.input }}</div>
                    </div>
                {% endfor %}
            {% endif %}
        {% endwith %}
    {% endif %}
{% endblock %}
