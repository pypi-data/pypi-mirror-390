"use strict";(self.webpackChunkjupyterlab_zip_extension=self.webpackChunkjupyterlab_zip_extension||[]).push([[675],{675:(e,t,r)=>{r.r(t),r.d(t,{default:()=>u});var o=r(986),n=r(249),a=r(560),i=r(297),c=r(860);async function s(e="",t={}){const r=c.ServerConnection.makeSettings(),o=i.URLExt.join(r.baseUrl,"jupyterlab-zip",e);let n;try{n=await c.ServerConnection.makeRequest(o,t,r)}catch(e){throw new c.ServerConnection.NetworkError(e)}let a=await n.text();if(a.length>0)try{a=JSON.parse(a)}catch(e){console.log("Not a JSON response body.",n)}if(!n.ok)throw new c.ServerConnection.ResponseError(n,a.message||a);return a}const l="jupyterlab_zip_extension:plugin",d="filebrowser:unzip-file",p="filebrowser:zip-files";function m(e){return"zip"===e.toLowerCase().split(".").pop()}const u={id:l,description:"A JupyterLab extension to zip/unzip files in the file browser.",autoStart:!0,requires:[n.IFileBrowserFactory],optional:[o.ICommandPalette,a.ISettingRegistry],activate:(e,t,r,n)=>{console.log("JupyterLab Zip/Unzip Extension is activated!");const{commands:a}=e,{tracker:i}=t;let c=!0;n&&n.load(l).then(e=>{c=e.get("extractToNamedFolder").composite,console.log(`Zip extension settings loaded: extractToNamedFolder=${c}`),e.changed.connect(()=>{c=e.get("extractToNamedFolder").composite,console.log(`Zip extension settings changed: extractToNamedFolder=${c}`)})}).catch(e=>{console.error("Failed to load settings for jupyterlab-zip-extension.",e)}),a.addCommand(d,{label:"Extract Archive",caption:"Extract the selected archive file",iconClass:"jp-FolderOpenIcon",execute:async()=>{const e=i.currentWidget;if(!e)return void console.warn("No file browser widget active");const t=Array.from(e.selectedItems());if(1!==t.length)return void console.warn("Please select exactly one archive file");const r=t[0];if(m(r.name))try{console.log(`Extracting ${r.name}...`);const t=await s("unzip",{method:"POST",body:JSON.stringify({archive_path:r.path,extract_to_named_folder:c})});t.success?(console.log(`Successfully extracted to: ${t.extract_path}`),await e.model.refresh()):console.error(`Extraction failed: ${t.error}`)}catch(e){console.error("Error extracting archive:",e)}else console.warn("Selected file is not a supported archive format (.zip)")},isEnabled:()=>{const e=i.currentWidget;if(!e)return!1;const t=Array.from(e.selectedItems());return 1===t.length&&m(t[0].name)},isVisible:()=>{const e=i.currentWidget;if(!e)return!1;const t=Array.from(e.selectedItems());return 1===t.length&&m(t[0].name)}}),a.addCommand(p,{label:"Create Archive",caption:"Create a zip archive from selected files/folders",iconClass:"jp-DownloadIcon",execute:async()=>{const e=i.currentWidget;if(!e)return;const t=Array.from(e.selectedItems());if(0===t.length)return;const r=1===t.length?`${t[0].name}.zip`:"archive.zip",n=await o.InputDialog.getText({title:"Create Archive",text:r,label:"Archive name:"});if(n.button.accept&&n.value){let r=n.value;r.endsWith(".zip")||(r+=".zip");try{console.log(`Creating archive ${r}...`);const o=t.map(e=>e.path),n=await s("zip",{method:"POST",body:JSON.stringify({archive_name:r,paths:o})});n.success?(console.log(`Successfully created archive: ${n.archive_path}`),await e.model.refresh()):console.error(`Archive creation failed: ${n.error}`)}catch(e){console.error("Error creating archive:",e)}}},isEnabled:()=>{const e=i.currentWidget;return!!e&&Array.from(e.selectedItems()).length>0}}),e.contextMenu.addItem({command:d,selector:".jp-DirListing-item",rank:11}),e.contextMenu.addItem({command:p,selector:".jp-DirListing-item",rank:11}),r&&(r.addItem({command:d,category:"File Operations"}),r.addItem({command:p,category:"File Operations"}))}}}}]);