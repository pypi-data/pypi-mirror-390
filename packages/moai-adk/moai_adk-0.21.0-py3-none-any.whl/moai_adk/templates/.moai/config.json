{
  "_meta": {
    "@CODE:CONFIG-STRUCTURE-001": "@DOC:JSON-CONFIG-001",
    "@SPEC:PROJECT-CONFIG-001": "@SPEC:MOAI-CONFIG-001"
  },
  "moai": {
    "version": "{{MOAI_VERSION}}",
    "update_check_frequency": "daily",
    "version_check": {
      "enabled": true,
      "cache_ttl_hours": 24
    }
  },
  "constitution": {
    "enforce_tdd": true,
    "principles": {
      "simplicity": {
        "max_projects": 5,
        "notes": "Default recommendation. Adjust in .moai/config.json or via SPEC/ADR with documented rationale based on project size."
      }
    },
    "require_tags": true,
    "simplicity_threshold": 5,
    "test_coverage_target": 85
  },
  "git_strategy": {
    "personal": {
      "auto_checkpoint": "event-driven",
      "checkpoint_events": [
        "delete",
        "refactor",
        "merge",
        "script",
        "critical-file"
      ],
      "checkpoint_type": "local-branch",
      "max_checkpoints": 10,
      "cleanup_days": 7,
      "push_to_remote": false,
      "auto_commit": true,
      "branch_prefix": "feature/",
      "develop_branch": "develop",
      "main_branch": "main"
    },
    "team": {
      "auto_pr": true,
      "develop_branch": "develop",
      "draft_pr": true,
      "feature_prefix": "feature/SPEC-",
      "main_branch": "main",
      "use_gitflow": true,
      "default_pr_base": "develop",
      "prevent_main_direct_merge": true
    }
  },
  "pipeline": {
    "available_commands": [
      "/alfred:0-project",
      "/alfred:1-plan",
      "/alfred:2-run",
      "/alfred:3-sync"
    ],
    "current_stage": "initialized"
  },
  "language": {
    "conversation_language": "{{CONVERSATION_LANGUAGE}}",
    "conversation_language_name": "{{CONVERSATION_LANGUAGE_NAME}}",
    "agent_prompt_language": "{{AGENT_PROMPT_LANGUAGE}}",
    "agent_prompt_language_description": "Language for sub-agent internal prompts (english=global standard, localized=user's conversation language)"
  },
  "project": {
    "name": "{{PROJECT_NAME}}",
    "description": "{{PROJECT_DESCRIPTION}}",
    "owner": "{{PROJECT_OWNER}}",
    "mode": "{{PROJECT_MODE}}",
    "locale": "{{CONVERSATION_LANGUAGE}}",
    "language": "{{CODEBASE_LANGUAGE}}",
    "created_at": "{{CREATION_TIMESTAMP}}",
    "initialized": true,
    "optimized": false
  },
  "tags": {
    "auto_sync": true,
    "storage_type": "code_scan",
    "categories": [
      "REQ",
      "DESIGN",
      "TASK",
      "TEST",
      "FEATURE",
      "API",
      "UI",
      "DATA"
    ],
    "code_scan_policy": {
      "no_intermediate_cache": true,
      "realtime_validation": true,
      "scan_tools": [
        "rg",
        "grep"
      ],
      "scan_command": "rg '@TAG' -n",
      "philosophy": "The source of truth for TAGs lives in the code itself"
    },
    "policy": {
      "enforcement_mode": "strict",
      "require_spec_before_code": true,
      "require_test_for_code": true,
      "enforce_chains": true,
      "mandatory_directories": [
        "src/",
        "tests/",
        ".moai/specs/"
      ],
      "optional_directories": [
        "CLAUDE.md",
        "README.md",
        "CHANGELOG.md",
        "CONTRIBUTING.md",
        ".claude/",
        ".moai/docs/",
        ".moai/reports/",
        ".moai/analysis/",
        "docs/",
        "templates/",
        "examples/"
      ],
      "code_directories": {
        "detection_mode": "auto",
        "patterns": [],
        "exclude_patterns": [
          "tests/",
          "test/",
          "__tests__/",
          "spec/",
          "specs/",
          "node_modules/",
          "dist/",
          "build/",
          ".next/",
          ".nuxt/",
          "examples/",
          "docs/",
          "documentation/"
        ],
        "merge_exclude_patterns": true,
        "auto_detect_from_language": true,
        "notes": "Language-based code directory detection. detection_mode: auto (language-based), manual (custom only), hybrid (language + custom)"
      },
      "auto_correction": {
        "enabled": true,
        "confidence_threshold": 0.8,
        "create_missing_specs": false,
        "create_missing_tests": false,
        "remove_duplicates": true,
        "backup_before_fix": true,
        "auto_fix_levels": {
          "safe": true,
          "medium_risk": false,
          "high_risk": false
        },
        "user_approval_required": {
          "safe": false,
          "medium_risk": true,
          "high_risk": true
        }
      },
      "auto_spec_generation": {
        "enabled": true,
        "mode": "template",
        "confidence_threshold": 0.6,
        "require_user_edit": true,
        "open_in_editor": true,
        "block_until_edited": true,
        "notes": "Auto-generate SPEC templates when users forget to create SPEC before code. Requires user approval to proceed."
      },
      "realtime_validation": {
        "enabled": true,
        "validation_timeout": 5,
        "enforce_chains": true,
        "quick_scan_max_files": 30
      }
    }
  },
  "hooks": {
    "timeout_ms": 2000,
    "graceful_degradation": true,
    "notes": "Hook execution timeout (milliseconds). Set graceful_degradation to true to continue even if a hook fails. Optimized to 2 seconds for faster performance."
  },
  "session_end": {
    "enabled": true,
    "metrics": {
      "enabled": true,
      "save_location": ".moai/logs/sessions/"
    },
    "work_state": {
      "enabled": true,
      "save_location": ".moai/memory/last-session-state.json"
    },
    "cleanup": {
      "enabled": true,
      "temp_files": true,
      "cache_files": true,
      "patterns": [
        ".moai/temp/*",
        ".moai/cache/*.tmp"
      ]
    },
    "warnings": {
      "uncommitted_changes": true
    },
    "summary": {
      "enabled": true,
      "max_lines": 5
    },
    "notes": "SessionEnd hook configuration. Executed when Claude Code session ends. Controls metrics saving, work state preservation, cleanup, warnings, and summary generation."
  },
  "auto_cleanup": {
    "enabled": true,
    "cleanup_days": 7,
    "max_reports": 10,
    "cleanup_targets": [
      ".moai/reports/*.json",
      ".moai/reports/*.md",
      ".moai/cache/*",
      ".moai/temp/*"
    ]
  },
  "daily_analysis": {
    "enabled": true,
    "analysis_time": "00:00",
    "analyze_sessions": true,
    "analyze_tools": true,
    "analyze_errors": true,
    "analyze_permissions": true,
    "auto_optimize": false,
    "report_location": ".moai/reports/daily-"
  },
  "report_generation": {
    "enabled": true,
    "auto_create": false,
    "warn_user": true,
    "user_choice": "Minimal",
    "configured_at": "{{CREATION_TIMESTAMP}}",
    "allowed_locations": [
      ".moai/docs/",
      ".moai/reports/",
      ".moai/analysis/",
      ".moai/specs/SPEC-*/"
    ],
    "notes": "Control automatic report generation. 'enabled': turn on/off, 'auto_create': full (true) vs minimal (false) reports. Helps reduce token usage."
  },
  "github": {
    "@CODE:GITHUB-CONFIG-001": "@DOC:GITHUB-TEMPLATES-001",
    "templates": {
      "enable_trust_5": true,
      "enable_tag_system": true,
      "enable_alfred_commands": true,
      "spec_directory": ".moai/specs",
      "docs_directory": ".moai/docs",
      "test_directory": "tests",
      "notes": "Configure GitHub templates for project customization. When enable_* flags are false, corresponding MoAI-specific sections are omitted from templates."
    },
    "auto_delete_branches": null,
    "auto_delete_branches_checked": false,
    "auto_delete_branches_rationale": "Not configured",
    "spec_git_workflow": "per_spec",
    "spec_git_workflow_configured": false,
    "spec_git_workflow_rationale": "Ask per SPEC (flexible, user controls each workflow)",
    "notes_new_fields": "auto_delete_branches: whether to auto-delete feature branches after merge. spec_git_workflow: 'feature_branch' (auto), 'develop_direct' (direct), 'per_spec' (ask per SPEC)"
  }
}