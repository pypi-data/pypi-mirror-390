import{s as L,r as a,a4 as D,u as U,a5 as I,e as k,j as n,l as H,Q as B,T as j,P as O,W as _,a6 as K,x as $,a7 as q}from"./index.BdyNlJmi.js";import{u as w}from"./uniqueId.CEM45bzv.js";import{I as A}from"./InputInstructions.Bi-12QEC.js";import{u as G}from"./useBasicWidgetState.idq3ugjR.js";import{u as N,a as Q,b as J}from"./useUpdateUiValue.BNMWAVP4.js";import{I as M}from"./input.B5K5lEtC.js";import"./FormClearHelper.DS7B0UME.js";import"./inputUtils.CptNuJwn.js";import"./base-input.VJzPmYxC.js";const X=L("div",{target:"e1o1zy6o0"})("position:relative;");function Y({disabled:o,element:t,widgetMgr:s,fragmentId:u}){const[r,c]=a.useState(()=>S(s,t)??null),{width:W,elementRef:T}=D(),[i,p]=a.useState(!1),x=a.useCallback(()=>{c(t.default??null),p(!0)},[t.default]),[y,m]=G({getStateFromWidgetMgr:S,getDefaultStateFromProto:Z,getCurrStateFromProto:tt,updateWidgetMgrState:et,element:t,widgetMgr:s,fragmentId:u,onFormCleared:x});N(y,r,c,i);const[V,g]=a.useState(!1),e=U(),[f]=a.useState(()=>w("text_input_")),{placeholder:C,formId:l,icon:d,maxChars:b}=t,h=a.useCallback(()=>{p(!1),m({value:r,fromUi:!0})},[r,m]),F=I({formId:l})?s.allowFormEnterToSubmit(l):i,E=V&&W>e.breakpoints.hideWidgetDetails,v=a.useCallback(()=>{i&&h(),g(!1)},[i,h]),z=a.useCallback(()=>{g(!0)},[]),P=Q({formId:l,maxChars:b,setDirty:p,setUiValue:c,setValueWithSource:m}),R=J(l,h,i,s,u);return k(X,{className:"stTextInput","data-testid":"stTextInput",ref:T,children:[n(_,{label:t.label,disabled:o,labelVisibility:H(t.labelVisibility?.value),htmlFor:f,children:t.help&&n(B,{children:n(j,{content:t.help,placement:O.TOP_RIGHT})})}),n(M,{value:r??"",placeholder:C,onBlur:v,onFocus:z,onChange:P,onKeyPress:R,"aria-label":t.label,disabled:o,id:f,type:ot(t),autoComplete:t.autocomplete,startEnhancer:d&&n($,{"data-testid":"stTextInputIcon",iconValue:d,size:"lg"}),overrides:{Input:{style:{fontWeight:e.fontWeights.normal,minWidth:0,lineHeight:e.lineHeights.inputWidget,paddingRight:e.spacing.sm,paddingLeft:e.spacing.md,paddingBottom:e.spacing.sm,paddingTop:e.spacing.sm,"::placeholder":{color:e.colors.fadedText60}}},Root:{props:{"data-testid":"stTextInputRootElement"},style:{height:e.sizes.minElementHeight,borderLeftWidth:e.sizes.borderWidth,borderRightWidth:e.sizes.borderWidth,borderTopWidth:e.sizes.borderWidth,borderBottomWidth:e.sizes.borderWidth,paddingLeft:d?e.spacing.sm:0}},StartEnhancer:{style:{paddingLeft:0,paddingRight:0,minWidth:e.iconSizes.lg,color:K(d)?e.colors.fadedText60:"inherit"}}}}),E&&n(A,{dirty:i,value:r??"",maxLength:b,inForm:I({formId:l}),allowEnterToSubmit:F})]})}function S(o,t){return o.getStringValue(t)??null}function Z(o){return o.default??null}function tt(o){return o.value??null}function et(o,t,s,u){t.setStringValue(o,s.value,{fromUi:s.fromUi},u)}function ot(o){return o.type===q.Type.PASSWORD?"password":"text"}const pt=a.memo(Y);export{pt as default};
