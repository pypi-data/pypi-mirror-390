import"./CWj6FrbW.js";import"./CN51-NxK.js";import{g as Je,o as Ke,q as Qe,v as Te,t as x,l as H,a as f,p as Ye,f as G,b as Ze,i as Y,k as g,c as t,w as v,s as m,m as ue,u as B,r as a,z as _e,j as i,aW as $e,B as me,n as Z,d as et,e as tt}from"./CvTLsZlf.js";import{i as P}from"./B3D73U8p.js";import{e as pe,i as fe}from"./uF71e8HK.js";import{i as at,b as it,s as st,d as rt}from"./CPzR4-ix.js";import{i as lt}from"./CNVL70pO.js";import{p as I}from"./DBxQAEQJ.js";import{s as dt,a as ot}from"./DzS5ldT-.js";import{g as vt}from"./D6NHZLWm.js";import{U as nt}from"./BivvhpuX.js";import{X as ct}from"./BFL0NFeS.js";import{B as ge}from"./Ch4IWKao.js";var ut=me('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"></path></svg>'),_t=me('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M6.115 5.19l.319 1.913A6 6 0 008.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 002.288-4.042 1.087 1.087 0 00-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 01-.98-.314l-.295-.295a1.125 1.125 0 010-1.591l.13-.132a1.125 1.125 0 011.3-.21l.603.302a.809.809 0 001.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 001.528-1.732l.146-.292M6.115 5.19A9 9 0 1017.18 4.64M6.115 5.19A8.965 8.965 0 0112 3c1.929 0 3.716.607 5.18 1.64"></path></svg>'),pt=G('<option class=" text-gray-700" selected> </option>'),ft=G('<option class=" text-gray-700"> </option>'),gt=G('<div class="flex items-center gap-3 justify-between text-xs w-full transition"><div class="flex items-center gap-1.5 w-full font-medium"><div><!></div> <div> </div></div> <div class="w-full flex justify-end items-center gap-0.5"><button type="button"><!></button> <button class=" rounded-full p-1 hover:bg-gray-100 dark:hover:bg-gray-850 transition" type="button"><!></button></div></div>'),mt=G('<div class="flex items-center justify-center"><div class="text-gray-500 text-xs text-center py-2 px-10"> </div></div>'),xt=G('<div><div><div class="flex justify-between mb-1.5"><div class="text-sm font-semibold"> </div></div> <div class="mb-1"><div class="flex w-full"><div class="flex flex-1 items-center"><div class="w-full px-0.5"><select><option class=" text-gray-700" disabled selected> </option><!></select></div></div></div></div> <hr class=" border-gray-100 dark:border-gray-700/10 mt-1.5 mb-2.5 w-full"/> <div class="flex flex-col gap-2 mb-1 px-0.5"><!></div></div></div>'),bt=G('<div class=" rounded-lg flex flex-col gap-2"><div><div class=" text-sm font-semibold mb-1.5"> </div> <div class="flex gap-2.5 items-center mb-1"><div><div class=" p-2 bg-black/5 dark:bg-white/5 rounded-full"><!></div></div> <div><select id="models" class="outline-hidden bg-transparent text-sm font-medium rounded-lg block w-fit pr-10 max-w-full placeholder-gray-400"><option class=" text-gray-700" selected> </option><!></select> <div class=" text-xs text-gray-400 font-medium"><!></div></div></div></div> <!></div>');function St(xe,z){Ze(z,!1);const d=()=>ot(he,"$i18n",be),[be,we]=dt(),he=Je("i18n");let k=I(z,"onChange",8,()=>{}),ye=I(z,"accessRoles",24,()=>["read"]),e=I(z,"accessControl",28,()=>({})),V=I(z,"allowPublic",8,!0),h=ue(""),C=ue([]);const $=()=>{!V()&&e()===null&&(e({read:{group_ids:[],user_ids:[]},write:{group_ids:[],user_ids:[]}}),k()(e()))};Ke(async()=>{var s,r,u,y,j,S,W,A;Y(C,await vt(localStorage.token)),e()===null?$():e({read:{group_ids:((r=(s=e())==null?void 0:s.read)==null?void 0:r.group_ids)??[],user_ids:((y=(u=e())==null?void 0:u.read)==null?void 0:y.user_ids)??[]},write:{group_ids:((S=(j=e())==null?void 0:j.write)==null?void 0:S.group_ids)??[],user_ids:((A=(W=e())==null?void 0:W.write)==null?void 0:A.user_ids)??[]}})}),Qe(()=>(B(V()),B(e())),()=>{!V()&&e()===null&&$()}),Te(),lt();var O=bt(),D=t(O),E=t(D),ke=t(E,!0);a(E);var ee=g(E,2),F=t(ee),te=t(F),Ce=t(te);{var je=s=>{var r=ut();f(s,r)},Ae=s=>{var r=_t();f(s,r)};P(Ce,s=>{e()!==null?s(je):s(Ae,!1)})}a(te),a(F);var ae=g(F,2),b=t(ae),R=t(b),Me=t(R,!0);a(R),R.value=R.__value="private";var Be=g(R);{var Pe=s=>{var r=pt(),u=t(r,!0);a(r),r.value=r.__value="public",x(y=>m(u,y),[()=>(d(),v(()=>d().t("Public")))]),f(s,r)};P(Be,s=>{V()&&s(Pe)})}a(b);var ie;at(b);var se=g(b,2),Ge=t(se);{var ze=s=>{var r=_e();x(u=>m(r,u),[()=>(d(),v(()=>d().t("Only select users and groups with permission can access")))]),f(s,r)},Re=s=>{var r=_e();x(u=>m(r,u),[()=>(d(),v(()=>d().t("Accessible to all users")))]),f(s,r)};P(Ge,s=>{e()!==null?s(ze):s(Re,!1)})}a(se),a(ae),a(ee),a(D);var Se=g(D,2);{var qe=s=>{const r=Z(()=>(i(C),B(e()),v(()=>i(C).filter(o=>{var l,n;return(((n=(l=e())==null?void 0:l.read)==null?void 0:n.group_ids)??[]).includes(o.id)}))));var u=xt(),y=t(u),j=t(y),S=t(j),W=t(S,!0);a(S),a(j);var A=g(j,2),re=t(A),le=t(re),de=t(le),q=t(de);x(()=>{i(h),$e(()=>{e(),k(),d(),i(C)})});var L=t(q),Le=t(L,!0);a(L),L.value=L.__value="";var Ne=g(L);pe(Ne,1,()=>(i(C),B(e()),v(()=>i(C).filter(o=>{var l,n;return!(((n=(l=e())==null?void 0:l.read)==null?void 0:n.group_ids)??[]).includes(o.id)}))),fe,(o,l)=>{var n=ft(),N=t(n,!0);a(n);var c={};x(()=>{m(N,(i(l),v(()=>i(l).name))),c!==(c=(i(l),v(()=>i(l).id)))&&(n.value=(n.__value=(i(l),v(()=>i(l).id)))??"")}),f(o,n)}),a(q),a(de),a(le),a(re),a(A);var oe=g(A,4),Ue=t(oe);{var Ve=o=>{var l=et(),n=tt(l);pe(n,1,()=>i(r),fe,(N,c)=>{var J=gt(),K=t(J),Q=t(K),Xe=t(Q);nt(Xe,{className:"size-4"}),a(Q);var ve=g(Q,2),He=t(ve,!0);a(ve),a(K);var ne=g(K,2),X=t(ne),Ie=t(X);{var Oe=_=>{{let p=Z(()=>(d(),v(()=>d().t("Write"))));ge(_,{type:"success",get content(){return i(p)}})}},De=_=>{{let p=Z(()=>(d(),v(()=>d().t("Read"))));ge(_,{type:"info",get content(){return i(p)}})}};P(Ie,_=>{B(e()),i(c),v(()=>{var p,w;return(((w=(p=e())==null?void 0:p.write)==null?void 0:w.group_ids)??[]).includes(i(c).id)})?_(Oe):_(De,!1)})}a(X);var T=g(X,2),Ee=t(T);ct(Ee,{}),a(T),a(ne),a(J),x(()=>m(He,(i(c),v(()=>i(c).name)))),H("click",X,()=>{var _,p,w,U,M,ce;ye().includes("write")&&((((p=(_=e())==null?void 0:_.write)==null?void 0:p.group_ids)??[]).includes(i(c).id)?e(e().write.group_ids=(((U=(w=e())==null?void 0:w.write)==null?void 0:U.group_ids)??[]).filter(Fe=>Fe!==i(c).id),!0):e(e().write.group_ids=[...((ce=(M=e())==null?void 0:M.write)==null?void 0:ce.group_ids)??[],i(c).id],!0),k()(e()))}),H("click",T,()=>{var _,p,w,U;e(e().read.group_ids=(((p=(_=e())==null?void 0:_.read)==null?void 0:p.group_ids)??[]).filter(M=>M!==i(c).id),!0),e(e().write.group_ids=(((U=(w=e())==null?void 0:w.write)==null?void 0:U.group_ids)??[]).filter(M=>M!==i(c).id),!0),k()(e())}),f(N,J)}),f(o,l)},We=o=>{var l=mt(),n=t(l),N=t(n,!0);a(n),a(l),x(c=>m(N,c),[()=>(d(),v(()=>d().t("No groups with access, add a group to grant access")))]),f(o,l)};P(Ue,o=>{B(i(r)),v(()=>i(r).length>0)?o(Ve):o(We,!1)})}a(oe),a(y),a(u),x((o,l)=>{m(W,o),st(q,1,`outline-hidden bg-transparent text-sm rounded-lg block w-full pr-10 max-w-full
									${i(h)?"":"text-gray-500"}
									dark:placeholder-gray-500`),m(Le,l)},[()=>(d(),v(()=>d().t("Groups"))),()=>(d(),v(()=>d().t("Select a group")))]),rt(q,()=>i(h),o=>Y(h,o)),H("change",q,()=>{var o,l;i(h)!==""&&(e(e().read.group_ids=[...((l=(o=e())==null?void 0:o.read)==null?void 0:l.group_ids)??[],i(h)],!0),Y(h,""),k()(e()))}),f(s,u)};P(Se,s=>{e()!==null&&s(qe)})}a(O),x((s,r)=>{m(ke,s),m(Me,r),ie!==(ie=e()!==null?"private":"public")&&(b.value=b.__value=e()!==null?"private":"public",it(b,e()!==null?"private":"public"))},[()=>(d(),v(()=>d().t("Visibility"))),()=>(d(),v(()=>d().t("Private")))]),H("change",b,s=>{s.target.value==="public"?e(null):e({read:{group_ids:[],user_ids:[]},write:{group_ids:[],user_ids:[]}}),k()(e())}),f(xe,O),Ye(),we()}export{St as A};
//# sourceMappingURL=B92zAXG9.js.map
