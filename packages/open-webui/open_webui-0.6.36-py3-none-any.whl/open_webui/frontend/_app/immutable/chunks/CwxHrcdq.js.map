{"version":3,"file":"CwxHrcdq.js","sources":["../../../../../../src/lib/components/icons/Folder.svelte","../../../../../../src/lib/components/icons/ChatBubble.svelte","../../../../../../src/lib/apis/files/index.ts","../../../../../../src/lib/components/common/FileItemModal.svelte","../../../../../../src/lib/components/icons/DocumentPage.svelte","../../../../../../src/lib/components/icons/Database.svelte","../../../../../../src/lib/components/icons/PageEdit.svelte","../../../../../../src/lib/components/common/FileItem.svelte"],"sourcesContent":["<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z\"\n\t/>\n</svg>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n>\n\t<path\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t\td=\"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z\"\n\t/>\n</svg>\n","import { WEBUI_API_BASE_URL } from '$lib/constants';\nimport { splitStream } from '$lib/utils';\n\nexport const uploadFile = async (token: string, file: File, metadata?: object | null) => {\n\tconst data = new FormData();\n\tdata.append('file', file);\n\tif (metadata) {\n\t\tdata.append('metadata', JSON.stringify(metadata));\n\t}\n\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: data\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail || err.message;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\tif (res) {\n\t\tconst status = await getFileProcessStatus(token, res.id);\n\n\t\tif (status && status.ok) {\n\t\t\tconst reader = status.body\n\t\t\t\t.pipeThrough(new TextDecoderStream())\n\t\t\t\t.pipeThrough(splitStream('\\n'))\n\t\t\t\t.getReader();\n\n\t\t\twhile (true) {\n\t\t\t\tconst { value, done } = await reader.read();\n\t\t\t\tif (done) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tlet lines = value.split('\\n');\n\n\t\t\t\t\tfor (const line of lines) {\n\t\t\t\t\t\tif (line !== '') {\n\t\t\t\t\t\t\tconsole.log(line);\n\t\t\t\t\t\t\tif (line === 'data: [DONE]') {\n\t\t\t\t\t\t\t\tconsole.log(line);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tlet data = JSON.parse(line.replace(/^data: /, ''));\n\t\t\t\t\t\t\t\tconsole.log(data);\n\n\t\t\t\t\t\t\t\tif (data?.error) {\n\t\t\t\t\t\t\t\t\tconsole.error(data.error);\n\t\t\t\t\t\t\t\t\tres.error = data.error;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (res?.data) {\n\t\t\t\t\t\t\t\t\tres.data = data;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.log(error);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getFileProcessStatus = async (token: string, id: string) => {\n\tconst queryParams = new URLSearchParams();\n\tqueryParams.append('stream', 'true');\n\n\tlet error = null;\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/${id}/process/status?${queryParams}`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t}).catch((err) => {\n\t\terror = err.detail;\n\t\tconsole.error(err);\n\t\treturn null;\n\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const uploadDir = async (token: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/upload/dir`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getFiles = async (token: string = '') => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getFileById = async (token: string, id: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/${id}`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const updateFileDataContentById = async (token: string, id: string, content: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/${id}/data/content/update`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t},\n\t\tbody: JSON.stringify({\n\t\t\tcontent: content\n\t\t})\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const getFileContentById = async (id: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/${id}/content`, {\n\t\tmethod: 'GET',\n\t\theaders: {\n\t\t\tAccept: 'application/json'\n\t\t},\n\t\tcredentials: 'include'\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn await res.blob();\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const deleteFileById = async (token: string, id: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/${id}`, {\n\t\tmethod: 'DELETE',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n\nexport const deleteAllFiles = async (token: string) => {\n\tlet error = null;\n\n\tconst res = await fetch(`${WEBUI_API_BASE_URL}/files/all`, {\n\t\tmethod: 'DELETE',\n\t\theaders: {\n\t\t\tAccept: 'application/json',\n\t\t\t'Content-Type': 'application/json',\n\t\t\tauthorization: `Bearer ${token}`\n\t\t}\n\t})\n\t\t.then(async (res) => {\n\t\t\tif (!res.ok) throw await res.json();\n\t\t\treturn res.json();\n\t\t})\n\t\t.then((json) => {\n\t\t\treturn json;\n\t\t})\n\t\t.catch((err) => {\n\t\t\terror = err.detail;\n\t\t\tconsole.error(err);\n\t\t\treturn null;\n\t\t});\n\n\tif (error) {\n\t\tthrow error;\n\t}\n\n\treturn res;\n};\n","<script lang=\"ts\">\n\timport { getContext, onMount, tick } from 'svelte';\n\timport { formatFileSize, getLineCount } from '$lib/utils';\n\timport { WEBUI_API_BASE_URL } from '$lib/constants';\n\timport { getKnowledgeById } from '$lib/apis/knowledge';\n\n\tconst i18n = getContext('i18n');\n\n\timport Modal from './Modal.svelte';\n\timport XMark from '../icons/XMark.svelte';\n\timport Info from '../icons/Info.svelte';\n\timport Switch from './Switch.svelte';\n\timport Tooltip from './Tooltip.svelte';\n\timport dayjs from 'dayjs';\n\timport Spinner from './Spinner.svelte';\n\timport { getFileById } from '$lib/apis/files';\n\n\texport let item;\n\texport let show = false;\n\texport let edit = false;\n\n\tlet enableFullContent = false;\n\n\tlet isPdf = false;\n\tlet isAudio = false;\n\tlet loading = false;\n\n\tlet selectedTab = '';\n\n\t$: isPDF =\n\t\titem?.meta?.content_type === 'application/pdf' ||\n\t\t(item?.name && item?.name.toLowerCase().endsWith('.pdf'));\n\n\t$: isAudio =\n\t\t(item?.meta?.content_type ?? '').startsWith('audio/') ||\n\t\t(item?.name && item?.name.toLowerCase().endsWith('.mp3')) ||\n\t\t(item?.name && item?.name.toLowerCase().endsWith('.wav')) ||\n\t\t(item?.name && item?.name.toLowerCase().endsWith('.ogg')) ||\n\t\t(item?.name && item?.name.toLowerCase().endsWith('.m4a')) ||\n\t\t(item?.name && item?.name.toLowerCase().endsWith('.webm'));\n\n\tconst loadContent = async () => {\n\t\tif (item?.type === 'collection') {\n\t\t\tloading = true;\n\n\t\t\tconst knowledge = await getKnowledgeById(localStorage.token, item.id).catch((e) => {\n\t\t\t\tconsole.error('Error fetching knowledge base:', e);\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tif (knowledge) {\n\t\t\t\titem.files = knowledge.files || [];\n\t\t\t}\n\t\t\tloading = false;\n\t\t} else if (item?.type === 'file') {\n\t\t\tloading = true;\n\n\t\t\tconst file = await getFileById(localStorage.token, item.id).catch((e) => {\n\t\t\t\tconsole.error('Error fetching file:', e);\n\t\t\t\treturn null;\n\t\t\t});\n\n\t\t\tif (file) {\n\t\t\t\titem.file = file || {};\n\t\t\t}\n\t\t\tloading = false;\n\t\t}\n\n\t\tawait tick();\n\t};\n\n\t$: if (show) {\n\t\tloadContent();\n\t}\n\n\tonMount(() => {\n\t\tconsole.log(item);\n\t\tif (item?.context === 'full') {\n\t\t\tenableFullContent = true;\n\t\t}\n\t});\n</script>\n\n<Modal bind:show size=\"lg\">\n\t<div class=\"font-primary px-4.5 py-3.5 w-full flex flex-col justify-center dark:text-gray-400\">\n\t\t<div class=\" pb-2\">\n\t\t\t<div class=\"flex items-start justify-between\">\n\t\t\t\t<div>\n\t\t\t\t\t<div class=\" font-medium text-lg dark:text-gray-100\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\thref=\"#\"\n\t\t\t\t\t\t\tclass=\"hover:underline line-clamp-1\"\n\t\t\t\t\t\t\ton:click|preventDefault={() => {\n\t\t\t\t\t\t\t\tif (!isPDF && item.url) {\n\t\t\t\t\t\t\t\t\twindow.open(\n\t\t\t\t\t\t\t\t\t\titem.type === 'file' ? `${item.url}/content` : `${item.url}`,\n\t\t\t\t\t\t\t\t\t\t'_blank'\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{item?.name ?? 'File'}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t\t<button\n\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\tshow = false;\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<XMark />\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div>\n\t\t\t\t<div class=\"flex flex-col items-center md:flex-row gap-1 justify-between w-full\">\n\t\t\t\t\t<div class=\" flex flex-wrap text-xs gap-1 text-gray-500\">\n\t\t\t\t\t\t{#if item?.type === 'collection'}\n\t\t\t\t\t\t\t{#if item?.type}\n\t\t\t\t\t\t\t\t<div class=\"capitalize shrink-0\">{item.type}</div>\n\t\t\t\t\t\t\t\t•\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if item?.description}\n\t\t\t\t\t\t\t\t<div class=\"line-clamp-1\">{item.description}</div>\n\t\t\t\t\t\t\t\t•\n\t\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t\t{#if item?.created_at}\n\t\t\t\t\t\t\t\t<div class=\"capitalize shrink-0\">\n\t\t\t\t\t\t\t\t\t{dayjs(item.created_at * 1000).format('LL')}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if item.size}\n\t\t\t\t\t\t\t<div class=\"capitalize shrink-0\">{formatFileSize(item.size)}</div>\n\t\t\t\t\t\t\t•\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if item?.file?.data?.content}\n\t\t\t\t\t\t\t<div class=\"capitalize shrink-0\">\n\t\t\t\t\t\t\t\t{$i18n.t('{{COUNT}} extracted lines', {\n\t\t\t\t\t\t\t\t\tCOUNT: getLineCount(item?.file?.data?.content ?? '')\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<div class=\"flex items-center gap-1 shrink-0\">\n\t\t\t\t\t\t\t\t• {$i18n.t('Formatting may be inconsistent from source.')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\n\t\t\t\t\t\t{#if item?.knowledge}\n\t\t\t\t\t\t\t<div class=\"capitalize shrink-0\">\n\t\t\t\t\t\t\t\t{$i18n.t('Knowledge Base')}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/if}\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if edit}\n\t\t\t\t\t\t<div class=\" self-end\">\n\t\t\t\t\t\t\t<Tooltip\n\t\t\t\t\t\t\t\tcontent={enableFullContent\n\t\t\t\t\t\t\t\t\t? $i18n.t(\n\t\t\t\t\t\t\t\t\t\t\t'Inject the entire content as context for comprehensive processing, this is recommended for complex queries.'\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t: $i18n.t(\n\t\t\t\t\t\t\t\t\t\t\t'Default to segmented retrieval for focused and relevant content extraction, this is recommended for most cases.'\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"flex items-center gap-1.5 text-xs\">\n\t\t\t\t\t\t\t\t\t{#if enableFullContent}\n\t\t\t\t\t\t\t\t\t\t{$i18n.t('Using Entire Document')}\n\t\t\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t\t\t{$i18n.t('Using Focused Retrieval')}\n\t\t\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\t\t\tbind:state={enableFullContent}\n\t\t\t\t\t\t\t\t\t\ton:change={(e) => {\n\t\t\t\t\t\t\t\t\t\t\titem.context = e.detail ? 'full' : undefined;\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"max-h-[75vh] overflow-auto\">\n\t\t\t{#if !loading}\n\t\t\t\t{#if item?.type === 'collection'}\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{#each item?.files as file}\n\t\t\t\t\t\t\t<div class=\"flex items-center gap-2 mb-2\">\n\t\t\t\t\t\t\t\t<div class=\"flex-shrink-0 text-xs\">\n\t\t\t\t\t\t\t\t\t{file?.meta?.name}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t{:else if isPDF}\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex mb-2.5 scrollbar-none overflow-x-auto w-full border-b border-gray-50 dark:border-gray-850 text-center text-sm font-medium bg-transparent dark:text-gray-200\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"min-w-fit py-1.5 px-4 border-b {selectedTab === ''\n\t\t\t\t\t\t\t\t? ' '\n\t\t\t\t\t\t\t\t: ' border-transparent text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'} transition\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tselectedTab = '';\n\t\t\t\t\t\t\t}}>{$i18n.t('Content')}</button\n\t\t\t\t\t\t>\n\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\tclass=\"min-w-fit py-1.5 px-4 border-b {selectedTab === 'preview'\n\t\t\t\t\t\t\t\t? ' '\n\t\t\t\t\t\t\t\t: ' border-transparent text-gray-300 dark:text-gray-600 hover:text-gray-700 dark:hover:text-white'} transition\"\n\t\t\t\t\t\t\ttype=\"button\"\n\t\t\t\t\t\t\ton:click={() => {\n\t\t\t\t\t\t\t\tselectedTab = 'preview';\n\t\t\t\t\t\t\t}}>{$i18n.t('Preview')}</button\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t{#if selectedTab === 'preview'}\n\t\t\t\t\t\t<iframe\n\t\t\t\t\t\t\ttitle={item?.name}\n\t\t\t\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/files/${item.id}/content`}\n\t\t\t\t\t\t\tclass=\"w-full h-[70vh] border-0 rounded-lg\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<div class=\"max-h-96 overflow-scroll scrollbar-hidden text-xs whitespace-pre-wrap\">\n\t\t\t\t\t\t\t{(item?.file?.data?.content ?? '').trim() || 'No content'}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{:else}\n\t\t\t\t\t{#if isAudio}\n\t\t\t\t\t\t<audio\n\t\t\t\t\t\t\tsrc={`${WEBUI_API_BASE_URL}/files/${item.id}/content`}\n\t\t\t\t\t\t\tclass=\"w-full border-0 rounded-lg mb-2\"\n\t\t\t\t\t\t\tcontrols\n\t\t\t\t\t\t\tplaysinline\n\t\t\t\t\t\t/>\n\t\t\t\t\t{/if}\n\n\t\t\t\t\t{#if item?.file?.data}\n\t\t\t\t\t\t<div class=\"max-h-96 overflow-scroll scrollbar-hidden text-xs whitespace-pre-wrap\">\n\t\t\t\t\t\t\t{(item?.file?.data?.content ?? '').trim() || 'No content'}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/if}\n\t\t\t\t{/if}\n\t\t\t{:else}\n\t\t\t\t<div class=\"flex items-center justify-center py-6\">\n\t\t\t\t\t<Spinner className=\"size-5\" />\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t</div>\n</Modal>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n\t><path\n\t\td=\"M4 21.4V2.6C4 2.26863 4.26863 2 4.6 2H16.2515C16.4106 2 16.5632 2.06321 16.6757 2.17574L19.8243 5.32426C19.9368 5.43679 20 5.5894 20 5.74853V21.4C20 21.7314 19.7314 22 19.4 22H4.6C4.26863 22 4 21.7314 4 21.4Z\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path><path d=\"M8 10L16 10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path\n\t\td=\"M8 18L16 18\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path><path d=\"M8 14L12 14\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></path><path\n\t\td=\"M16 2V5.4C16 5.73137 16.2686 6 16.6 6H20\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path></svg\n>\n","<script lang=\"ts\">\n\texport let className = 'size-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tfill=\"none\"\n\tviewBox=\"0 0 24 24\"\n\tstroke-width={strokeWidth}\n\tstroke=\"currentColor\"\n\tclass={className}\n\t><path d=\"M5 12V18C5 18 5 21 12 21C19 21 19 18 19 18V12\"></path><path\n\t\td=\"M5 6V12C5 12 5 15 12 15C19 15 19 12 19 12V6\"\n\t></path><path d=\"M12 3C19 3 19 6 19 6C19 6 19 9 12 9C5 9 5 6 5 6C5 6 5 3 12 3Z\"></path></svg\n>\n","<script lang=\"ts\">\n\texport let className = 'w-4 h-4';\n\texport let strokeWidth = '1.5';\n</script>\n\n<svg\n\tclass={className}\n\taria-hidden=\"true\"\n\txmlns=\"http://www.w3.org/2000/svg\"\n\tstroke-width={strokeWidth}\n\tfill=\"none\"\n\tstroke=\"currentColor\"\n\tviewBox=\"0 0 24 24\"\n\t><path\n\t\td=\"M20 12V5.74853C20 5.5894 19.9368 5.43679 19.8243 5.32426L16.6757 2.17574C16.5632 2.06321 16.4106 2 16.2515 2H4.6C4.26863 2 4 2.26863 4 2.6V21.4C4 21.7314 4.26863 22 4.6 22H11\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path><path d=\"M8 10H16M8 6H12M8 14H11\" stroke-linecap=\"round\" stroke-linejoin=\"round\"\n\t></path><path\n\t\td=\"M17.9541 16.9394L18.9541 15.9394C19.392 15.5015 20.102 15.5015 20.5399 15.9394V15.9394C20.9778 16.3773 20.9778 17.0873 20.5399 17.5252L19.5399 18.5252M17.9541 16.9394L14.963 19.9305C14.8131 20.0804 14.7147 20.2741 14.6821 20.4835L14.4394 22.0399L15.9957 21.7973C16.2052 21.7646 16.3988 21.6662 16.5487 21.5163L19.5399 18.5252M17.9541 16.9394L19.5399 18.5252\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path><path\n\t\td=\"M16 2V5.4C16 5.73137 16.2686 6 16.6 6H20\"\n\t\tstroke-linecap=\"round\"\n\t\tstroke-linejoin=\"round\"\n\t></path></svg\n>\n","<script lang=\"ts\">\n\timport { createEventDispatcher, getContext } from 'svelte';\n\timport { formatFileSize } from '$lib/utils';\n\n\timport FileItemModal from './FileItemModal.svelte';\n\timport GarbageBin from '../icons/GarbageBin.svelte';\n\timport Spinner from './Spinner.svelte';\n\timport Tooltip from './Tooltip.svelte';\n\timport XMark from '$lib/components/icons/XMark.svelte';\n\timport { settings } from '$lib/stores';\n\n\tconst i18n = getContext('i18n');\n\tconst dispatch = createEventDispatcher();\n\n\texport let className = 'w-60';\n\texport let colorClassName =\n\t\t'bg-white dark:bg-gray-850 border border-gray-50 dark:border-gray-800';\n\texport let url: string | null = null;\n\n\texport let dismissible = false;\n\texport let modal = false;\n\texport let loading = false;\n\n\texport let item = null;\n\texport let edit = false;\n\texport let small = false;\n\n\texport let name: string;\n\texport let type: string;\n\texport let size: number;\n\n\timport DocumentPage from '../icons/DocumentPage.svelte';\n\timport Database from '../icons/Database.svelte';\n\timport PageEdit from '../icons/PageEdit.svelte';\n\timport ChatBubble from '../icons/ChatBubble.svelte';\n\timport Folder from '../icons/Folder.svelte';\n\tlet showModal = false;\n\n\tconst decodeString = (str: string) => {\n\t\ttry {\n\t\t\treturn decodeURIComponent(str);\n\t\t} catch (e) {\n\t\t\treturn str;\n\t\t}\n\t};\n</script>\n\n{#if item}\n\t<FileItemModal bind:show={showModal} bind:item {edit} />\n{/if}\n\n<button\n\tclass=\"relative group p-1.5 {className} flex items-center gap-1 {colorClassName} {small\n\t\t? 'rounded-xl p-2'\n\t\t: 'rounded-2xl'} text-left\"\n\ttype=\"button\"\n\ton:click={async () => {\n\t\tif (item?.file?.data?.content || item?.type === 'file' || modal) {\n\t\t\tshowModal = !showModal;\n\t\t} else {\n\t\t\tif (url) {\n\t\t\t\tif (type === 'file') {\n\t\t\t\t\twindow.open(`${url}/content`, '_blank').focus();\n\t\t\t\t} else {\n\t\t\t\t\twindow.open(`${url}`, '_blank').focus();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdispatch('click');\n\t}}\n>\n\t{#if !small}\n\t\t<div\n\t\t\tclass=\"size-10 shrink-0 flex justify-center items-center bg-black/20 dark:bg-white/10 text-white rounded-xl\"\n\t\t>\n\t\t\t{#if !loading}\n\t\t\t\t<svg\n\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\taria-hidden=\"true\"\n\t\t\t\t\tclass=\" size-4.5\"\n\t\t\t\t>\n\t\t\t\t\t<path\n\t\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\t\td=\"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z\"\n\t\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t\t/>\n\t\t\t\t\t<path\n\t\t\t\t\t\td=\"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z\"\n\t\t\t\t\t/>\n\t\t\t\t</svg>\n\t\t\t{:else}\n\t\t\t\t<Spinner />\n\t\t\t{/if}\n\t\t</div>\n\t{:else}\n\t\t<div class=\"pl-1.5\">\n\t\t\t{#if !loading}\n\t\t\t\t<Tooltip\n\t\t\t\t\tcontent={type === 'collection'\n\t\t\t\t\t\t? $i18n.t('Collection')\n\t\t\t\t\t\t: type === 'note'\n\t\t\t\t\t\t\t? $i18n.t('Note')\n\t\t\t\t\t\t\t: type === 'chat'\n\t\t\t\t\t\t\t\t? $i18n.t('Chat')\n\t\t\t\t\t\t\t\t: type === 'file'\n\t\t\t\t\t\t\t\t\t? $i18n.t('File')\n\t\t\t\t\t\t\t\t\t: $i18n.t('Document')}\n\t\t\t\t\tplacement=\"top\"\n\t\t\t\t>\n\t\t\t\t\t{#if type === 'collection'}\n\t\t\t\t\t\t<Database />\n\t\t\t\t\t{:else if type === 'note'}\n\t\t\t\t\t\t<PageEdit />\n\t\t\t\t\t{:else if type === 'chat'}\n\t\t\t\t\t\t<ChatBubble />\n\t\t\t\t\t{:else if type === 'folder'}\n\t\t\t\t\t\t<Folder />\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<DocumentPage />\n\t\t\t\t\t{/if}\n\t\t\t\t</Tooltip>\n\t\t\t{:else}\n\t\t\t\t<Spinner />\n\t\t\t{/if}\n\t\t</div>\n\t{/if}\n\n\t{#if !small}\n\t\t<div class=\"flex flex-col justify-center -space-y-0.5 px-2.5 w-full\">\n\t\t\t<div class=\" dark:text-gray-100 text-sm font-medium line-clamp-1 mb-1\">\n\t\t\t\t{decodeString(name)}\n\t\t\t</div>\n\n\t\t\t<div\n\t\t\t\tclass=\" flex justify-between text-xs line-clamp-1 {($settings?.highContrastMode ?? false)\n\t\t\t\t\t? 'text-gray-800 dark:text-gray-100'\n\t\t\t\t\t: 'text-gray-500'}\"\n\t\t\t>\n\t\t\t\t{#if type === 'file'}\n\t\t\t\t\t{$i18n.t('File')}\n\t\t\t\t{:else if type === 'note'}\n\t\t\t\t\t{$i18n.t('Note')}\n\t\t\t\t{:else if type === 'doc'}\n\t\t\t\t\t{$i18n.t('Document')}\n\t\t\t\t{:else if type === 'collection'}\n\t\t\t\t\t{$i18n.t('Collection')}\n\t\t\t\t{:else}\n\t\t\t\t\t<span class=\" capitalize line-clamp-1\">{type}</span>\n\t\t\t\t{/if}\n\t\t\t\t{#if size}\n\t\t\t\t\t<span class=\"capitalize\">{formatFileSize(size)}</span>\n\t\t\t\t{/if}\n\t\t\t</div>\n\t\t</div>\n\t{:else}\n\t\t<Tooltip content={decodeString(name)} className=\"flex flex-col w-full\" placement=\"top-start\">\n\t\t\t<div class=\"flex flex-col justify-center -space-y-0.5 px-1 w-full\">\n\t\t\t\t<div class=\" dark:text-gray-100 text-sm flex justify-between items-center\">\n\t\t\t\t\t<div class=\"font-medium line-clamp-1 flex-1 pr-1\">{decodeString(name)}</div>\n\t\t\t\t\t{#if size}\n\t\t\t\t\t\t<div class=\"text-gray-500 text-xs capitalize shrink-0\">{formatFileSize(size)}</div>\n\t\t\t\t\t{:else}\n\t\t\t\t\t\t<div class=\"text-gray-500 text-xs capitalize shrink-0\">{type}</div>\n\t\t\t\t\t{/if}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Tooltip>\n\t{/if}\n\n\t{#if dismissible}\n\t\t<div class=\" absolute -top-1 -right-1\">\n\t\t\t<button\n\t\t\t\taria-label={$i18n.t('Remove File')}\n\t\t\t\tclass=\" bg-white text-black border border-gray-50 rounded-full {($settings?.highContrastMode ??\n\t\t\t\tfalse)\n\t\t\t\t\t? ''\n\t\t\t\t\t: 'outline-hidden focus:outline-hidden group-hover:visible invisible transition'}\"\n\t\t\t\ttype=\"button\"\n\t\t\t\ton:click|stopPropagation={() => {\n\t\t\t\t\tdispatch('dismiss');\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<XMark className={'size-4'} />\n\t\t\t</button>\n\n\t\t\t<!-- <button\n\t\t\t\tclass=\" p-1 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-full group-hover:visible invisible transition\"\n\t\t\t\ttype=\"button\"\n\t\t\t\ton:click={() => {\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<GarbageBin />\n\t\t\t</button> -->\n\t\t</div>\n\t{/if}\n</button>\n"],"names":["className","strokeWidth","uploadFile","token","file","metadata","data","error","res","WEBUI_API_BASE_URL","err","status","getFileProcessStatus","reader","splitStream","value","done","lines","line","id","queryParams","getFileById","json","updateFileDataContentById","content","deleteAllFiles","i18n","getContext","item","$.prop","$$props","show","edit","enableFullContent","isAudio","loading","selectedTab","loadContent","_a","$.set","knowledge","getKnowledgeById","e","_b","tick","onMount","isPDF","_c","_d","_e","_f","_g","_h","_i","_j","_k","_l","$.untrack","$$render","consequent","dayjs","formatFileSize","consequent_4","getLineCount","$i18n","$.get","consequent_7","alternate","$$value","consequent_8","$.each","div_19","$.deep_read_state","$.template_effect","$.set_text","text_10","consequent_10","alternate_1","$.set_class","button_1","button_2","$.event","consequent_12","consequent_11","alternate_2","alternate_4","consequent_14","a","$.preventDefault","button","dispatch","createEventDispatcher","colorClassName","url","dismissible","modal","small","name","type","size","showModal","decodeString","str","consequent_1","consequent_6","consequent_5","alternate_3","consequent_3","alternate_5","alternate_6","consequent_2","alternate_7","alternate_8","consequent_9","alternate_9","alternate_10","$settings","alternate_11","alternate_12","consequent_13","$.stopPropagation","consequent_15"],"mappings":"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"}