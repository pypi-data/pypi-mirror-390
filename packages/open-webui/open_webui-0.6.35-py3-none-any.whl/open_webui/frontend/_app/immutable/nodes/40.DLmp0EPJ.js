import"../chunks/CWj6FrbW.js";import"../chunks/CN51-NxK.js";import{g as q,o as T,d as f,e as d,a as w,p as y,b as W,i as a,j as t,m as l,n as i}from"../chunks/CvTLsZlf.js";import{i as x}from"../chunks/B3D73U8p.js";import{k as B}from"../chunks/BOeiEyRi.js";import{i as D}from"../chunks/CNVL70pO.js";import{s as J,a as M}from"../chunks/DzS5ldT-.js";import{g as P}from"../chunks/BDMvu-7n.js";import{c as Q,g as j}from"../chunks/QK5aiF9L.js";import{T as C}from"../chunks/Ca94avxV.js";import{a as E,t as F}from"../chunks/D6EOiKH3.js";import{e as H,c as L}from"../chunks/D38tgtmh.js";import{t as c}from"../chunks/Cqe-NRGo.js";function ae(v,S){W(S,!1);const m=()=>M(N,"$i18n",I),[I,$]=J(),N=q("i18n");let p=l(!1),u=l(!1),r=l(null);const O=async e=>{const s=H(e.content);if(L((s==null?void 0:s.required_open_webui_version)??"0.0.0",E)){c.error(m().t("Open WebUI version (v{{OPEN_WEBUI_VERSION}}) is lower than required version (v{{REQUIRED_VERSION}})",{OPEN_WEBUI_VERSION:E,REQUIRED_VERSION:(s==null?void 0:s.required_open_webui_version)??"0.0.0"}));return}await Q(localStorage.token,{id:e.id,name:e.name,meta:e.meta,content:e.content,access_control:e.access_control}).catch(n=>(c.error(`${n}`),null))&&(c.success(m().t("Tool created successfully")),F.set(await j(localStorage.token)),await P("/workspace/tools"))};T(()=>{window.addEventListener("message",async e=>{["https://openwebui.com","https://www.openwebui.com","http://localhost:9999"].includes(e.origin)&&(a(r,JSON.parse(e.data)),t(r))}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.tool&&(a(r,JSON.parse(sessionStorage.tool)),sessionStorage.removeItem("tool"),t(r),a(u,!0)),a(p,!0)}),D();var g=f(),h=d(g);{var R=e=>{var s=f(),_=d(s);B(_,()=>{var n;return(n=t(r))==null?void 0:n.content},n=>{{let b=i(()=>{var o;return((o=t(r))==null?void 0:o.id)??""}),k=i(()=>{var o;return((o=t(r))==null?void 0:o.name)??""}),V=i(()=>{var o;return((o=t(r))==null?void 0:o.meta)??{description:""}}),U=i(()=>{var o;return((o=t(r))==null?void 0:o.content)??""});C(n,{get id(){return t(b)},get name(){return t(k)},get meta(){return t(V)},get content(){return t(U)},access_control:null,get clone(){return t(u)},onSave:o=>{O(o)}})}}),w(e,s)};x(h,e=>{t(p)&&e(R)})}w(v,g),y(),$()}export{ae as component};
//# sourceMappingURL=40.DLmp0EPJ.js.map
