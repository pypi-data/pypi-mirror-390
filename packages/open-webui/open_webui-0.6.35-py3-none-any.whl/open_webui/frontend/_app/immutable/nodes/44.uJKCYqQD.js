import"../chunks/CWj6FrbW.js";import"../chunks/CN51-NxK.js";import{g as de,q as X,v as ue,d as ge,h as fe,e as me,a as D,p as ve,b as pe,t as G,$ as he,j as e,w as $,m as c,i as r,x as B,c as a,r as s,k as E,u as _e,s as C,l as xe,f as ye,aX as $e,n as we}from"../chunks/CvTLsZlf.js";import{i as be}from"../chunks/B3D73U8p.js";import{s as Se}from"../chunks/CPzR4-ix.js";import{i as ke}from"../chunks/CNVL70pO.js";import{s as Ie,a as _}from"../chunks/DzS5ldT-.js";import{g as w}from"../chunks/BDMvu-7n.js";import{p as Me}from"../chunks/KihEXLMb.js";import{d as N}from"../chunks/BqAeIAOr.js";import{W as je,d as U,j as K,b as Be,c as Ee}from"../chunks/D6EOiKH3.js";import{l as Ce,b as Ne,d as Ue}from"../chunks/D38tgtmh.js";import{g as Le,c as We}from"../chunks/DQY3XKi0.js";import{M as Ae}from"../chunks/Dx2-k_aS.js";import{g as qe,a as Fe}from"../chunks/F2FbVfzc.js";import{g as Oe}from"../chunks/U3_qXm6Y.js";import{t as Re}from"../chunks/Cqe-NRGo.js";var ze=ye('<div class="h-screen max-h-[100dvh] w-full flex flex-col text-gray-700 dark:text-gray-100 bg-white dark:bg-gray-900"><div class="flex flex-col flex-auto justify-center relative"><div class=" flex flex-col w-full flex-auto overflow-auto h-0" id="messages-container"><div><div class="px-3"><div class=" text-2xl font-semibold line-clamp-1"> </div> <div class="flex text-sm justify-between items-center mt-1"><div class="text-gray-400"> </div></div></div></div> <div class=" h-full w-full flex flex-col py-2"><div class="w-full"><!></div></div></div> <div class="absolute bottom-0 right-0 left-0 flex justify-center w-full bg-linear-to-b from-transparent to-white dark:to-gray-900"><div class="pb-5"><button class="px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-full"> </button></div></div></div></div>');function ot(Q,V){pe(V,!1);const b=()=>_(Me,"$page",m),Y=()=>_(Ee,"$config",m),S=()=>_(U,"$settings",m),L=()=>_(K,"$chatId",m),k=()=>_(je,"$WEBUI_NAME",m),W=()=>_(ee,"$i18n",m),[m,Z]=Ie(),ee=de("i18n");N.extend(Ce);let A=c(!1),I=c(!0),te="",q=c([""]),n=c(null),F=c(null),d=c(""),ae=[],u=c([]),i=c({messages:{},currentId:null});const se=async()=>{var l,x,v,g,y,p;const o=await qe(localStorage.token).catch(t=>null);if(o)U.set(o.ui);else{let t={};try{t=JSON.parse(localStorage.getItem("settings")??"{}")}catch(h){}U.set(t)}if(await Be.set(await Oe(localStorage.token,((x=(l=Y())==null?void 0:l.features)==null?void 0:x.enable_direct_connections)&&(((v=S())==null?void 0:v.directConnections)??null))),await K.set(b().params.id),r(n,await Le(localStorage.token,L()).catch(async t=>(await w("/"),null))),e(n)){r(F,await Fe(localStorage.token,e(n).user_id).catch(h=>null));const t=e(n).chat;return t?(r(q,((t==null?void 0:t.models)??void 0)!==void 0?t.models:[t.models??""]),r(i,((t==null?void 0:t.history)??void 0)!==void 0?t.history:Ue(t.messages)),r(d,t.title),r(I,!0),await B(),e(u).length>0&&((g=e(u).at(-1))!=null&&g.id)&&((y=e(u).at(-1))==null?void 0:y.id)in e(i).messages&&$e(i,e(i).messages[(p=e(u).at(-1))==null?void 0:p.id].done=!0),await B(),!0):null}},re=async()=>{if(!e(n))return;const o=await We(localStorage.token,e(n).id).catch(l=>(Re.error(`${l}`),null));o&&w(`/c/${o.id}`)};X(()=>e(i),()=>{r(u,Ne(e(i),e(i).currentId))}),X(()=>(b(),w),()=>{b().params.id&&(async()=>await se()?(await B(),r(A,!0)):await w("/"))()}),ue(),ke();var O=ge();fe(o=>{G(l=>he.title=`
		${l??""}
	`,[()=>(e(d),k(),$(()=>e(d)?`${e(d).length>30?`${e(d).slice(0,30)}...`:e(d)} â€¢ ${k()}`:`${k()}`))])});var oe=me(O);{var le=o=>{var l=ze(),x=a(l),v=a(x),g=a(v),y=a(g),p=a(y),t=a(p,!0);s(p);var h=E(p,2),R=a(h),ie=a(R,!0);s(R),s(h),s(y),s(g);var z=E(g,2),H=a(z),ne=a(H);{let j=we(()=>$(()=>ae.length>0));Ae(ne,{className:"h-full flex pt-4 pb-8 ",get user(){return e(F)},get chatId(){return L()},readOnly:!0,get selectedModels(){return e(q)},processing:te,get bottomPadding(){return e(j)},sendMessage:()=>{},continueResponse:()=>{},regenerateResponse:()=>{},get history(){return e(i)},set history(f){r(i,f)},get messages(){return e(u)},set messages(f){r(u,f)},get autoScroll(){return e(I)},set autoScroll(f){r(I,f)},$$legacy:!0})}s(H),s(z),s(v);var J=E(v,2),P=a(J),M=a(P),ce=a(M,!0);s(M),s(P),s(J),s(x),s(l),G((j,f)=>{Se(g,1,`pt-5 px-2 w-full ${S(),$(()=>{var T;return((T=S())==null?void 0:T.widescreenMode)??null?"max-w-full":"max-w-5xl"})??""} mx-auto`),C(t,e(d)),C(ie,j),C(ce,f)},[()=>(_e(N),e(n),$(()=>N(e(n).chat.timestamp).format("LLL"))),()=>(W(),$(()=>W().t("Clone Chat")))]),xe("click",M,re),D(o,l)};be(oe,o=>{e(A)&&o(le)})}D(Q,O),ve(),Z()}export{ot as component};
//# sourceMappingURL=44.uJKCYqQD.js.map
