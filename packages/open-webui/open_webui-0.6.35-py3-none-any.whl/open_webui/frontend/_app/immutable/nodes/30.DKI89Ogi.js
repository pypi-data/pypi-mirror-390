import"../chunks/CWj6FrbW.js";import"../chunks/CN51-NxK.js";import{b as Oe,y as pt,g as Ve,j as e,i as v,d as qe,e as Y,c as a,r as t,l as H,a as g,k as i,t as M,w as l,s as w,p as Le,f as S,m as h,n as A,o as gt,q as Ie,v as xt,h as _t,$ as wt,x as Ue,A as ht,z as $t,u as We}from"../chunks/CvTLsZlf.js";import{i as G}from"../chunks/B3D73U8p.js";import{e as bt,i as yt}from"../chunks/uF71e8HK.js";import{r as kt,a as St}from"../chunks/CPzR4-ix.js";import{b as Nt}from"../chunks/BpTtYi1u.js";import{b as Bt}from"../chunks/Cz9Z7v2M.js";import{i as Ge}from"../chunks/CNVL70pO.js";import{a as X,s as He}from"../chunks/DzS5ldT-.js";import{F as jt}from"../chunks/CU2r43ac.js";import{d as fe,r as zt}from"../chunks/BqAeIAOr.js";import{t as me}from"../chunks/Cqe-NRGo.js";import{W as Dt,l as Et,u as Pt}from"../chunks/D6EOiKH3.js";import{a as Ae,d as Ct,g as Kt}from"../chunks/BN8BTzd8.js";import{g as Mt}from"../chunks/BDMvu-7n.js";import{j as Fe}from"../chunks/D38tgtmh.js";import{C as It}from"../chunks/Ch-EHQFf.js";import{s as Ut}from"../chunks/D4SMs5q_.js";import{p as Wt}from"../chunks/DBxQAEQJ.js";import"../chunks/CXLK5pxB.js";import{b as At,c as Ft}from"../chunks/DM-96xXi.js";import{f as Tt}from"../chunks/BjO3HhBo.js";import{D as Ot}from"../chunks/BggWuidE.js";import{G as Vt}from"../chunks/BiTNgcEp.js";import{T as ue}from"../chunks/k6hQMChD.js";import{E as qt}from"../chunks/DEA4EnEJ.js";import{B as Te}from"../chunks/Ch4IWKao.js";import{S as Lt}from"../chunks/B0jU0TkR.js";import{P as Gt}from"../chunks/DbQqwFih.js";import{S as Ht}from"../chunks/DD1zKOTk.js";import{X as Xt}from"../chunks/BFL0NFeS.js";import{V as Yt}from"../chunks/CP-4iS2j.js";var Jt=S('<button class="self-center w-fit text-sm p-1.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl" type="button"><!></button>'),Qt=S('<!> <div class="flex items-center"> </div>',1),Rt=S('<div slot="content"><!></div>');function Zt(I,U){Oe(U,!1);const N=()=>X(Q,"$i18n",r),[r,J]=He(),W=pt(),Q=Ve("i18n");let R=Wt(U,"onClose",8,()=>{}),z=h(!1);Ge(),Ot(I,{align:"end",get show(){return e(z)},set show(d){v(z,d)},$$events:{change:d=>{d.detail===!1&&R()()}},children:(d,F)=>{{let $=A(()=>(N(),l(()=>N().t("More"))));ue(d,{get content(){return e($)},children:(D,x)=>{var b=qe(),y=Y(b);Ut(y,U,"default",{},E=>{var c=Jt(),P=a(c);qt(P,{className:"size-5"}),t(c),H("click",c,B=>{B.stopPropagation(),v(z,!0)}),g(E,c)}),g(D,b)},$$slots:{default:!0}})}},$$slots:{default:!0,content:(d,F)=>{var $=Rt(),D=a($);At(D,{class:"w-full max-w-[170px] rounded-2xl px-1 py-1 border border-gray-100  dark:border-gray-800 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg",side:"bottom",align:"end",get transition(){return Tt},children:(x,b)=>{Ft(x,{class:"flex  gap-2  items-center px-3 py-1.5 text-sm   cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-xl",$$events:{click:()=>{W("delete")}},children:(y,E)=>{var c=Qt(),P=Y(c);Vt(P,{});var B=i(P,2),Z=a(B,!0);t(B),M(T=>w(Z,T),[()=>(N(),l(()=>N().t("Delete")))]),g(y,c)},$$slots:{default:!0}})},$$slots:{default:!0}}),t($),g(d,$)}},$$legacy:!0}),Le(),J()}var ea=S('<div class="self-center pl-1.5 translate-y-[0.5px] rounded-l-xl bg-transparent"><button class="p-0.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-900 transition"><!></button></div>'),ta=S('<button class=" flex space-x-4 cursor-pointer text-left w-full px-3 py-2.5 dark:hover:bg-gray-850/50 hover:bg-gray-50 transition rounded-2xl"><div class=" w-full"><div class=" self-center flex-1"><div class="flex items-center justify-between -my-1"><div class=" flex gap-2 items-center"><div><!></div> <div class=" text-xs text-gray-500 line-clamp-1"> </div></div> <div class="flex items-center gap-2"><div class=" flex self-center"><!></div></div></div> <div class=" flex items-center gap-1 justify-between px-1.5"><div class=" flex items-center gap-2"><div class=" text-sm font-medium line-clamp-1 capitalize"> </div></div> <div><div class="text-xs text-gray-500"><!></div></div></div></div></div></button>'),aa=S('<div class=" my-2 px-3 grid grid-cols-1 lg:grid-cols-2 gap-2"></div>'),ra=S('<div class=" w-full h-full flex flex-col justify-center items-center my-16 mb-24"><div class="max-w-md text-center"><div class=" text-3xl mb-3">ðŸ˜•</div> <div class=" text-lg font-medium mb-1"> </div> <div class=" text-gray-500 text-center text-xs"> </div></div></div>'),sa=S('<!> <div class="flex flex-col gap-1 px-1 mt-1.5 mb-3"><div class="flex justify-between items-center"><div class="flex items-center md:self-center text-xl font-medium px-0.5 gap-2 shrink-0"><div> </div> <div class="text-lg font-medium text-gray-500 dark:text-gray-500"> </div></div> <div class="flex w-full justify-end gap-1.5"><a class=" px-2 py-1.5 rounded-xl bg-black text-white dark:bg-white dark:text-black transition font-medium text-sm flex items-center" href="/workspace/knowledge/create"><!> <div class=" hidden md:block md:ml-1 text-xs"> </div></a></div></div></div> <div class="py-2 bg-white dark:bg-gray-900 rounded-3xl border border-gray-100 dark:border-gray-850"><div class=" flex w-full space-x-2 py-0.5 px-3.5 pb-2"><div class="flex flex-1"><div class=" self-center ml-1 mr-3"><!></div> <input class=" w-full text-sm py-1 rounded-r-xl outline-hidden bg-transparent"/> <!></div></div> <div class="px-3 flex w-full bg-transparent overflow-x-auto scrollbar-none -mx-1"><div class="flex gap-0.5 w-fit text-center text-sm rounded-full bg-transparent px-1.5 whitespace-nowrap"><!></div></div> <!></div> <div class=" text-gray-500 text-xs m-2"> </div>',1),oa=S('<div class="w-full h-full flex justify-center items-center"><!></div>');function la(I,U){Oe(U,!1);const N=()=>X(Pt,"$user",W),r=()=>X(R,"$i18n",W),J=()=>X(Dt,"$WEBUI_NAME",W),[W,Q]=He();fe.extend(zt);const R=Ve("i18n");let z=h(!1),d=h(""),F=h(null),$=h(!1),D=h(),x=h(""),b=h(null),y=h([]),E=[],c=h([]);const P=async()=>{E=e(y).filter(f=>{var p,k;return e(x)===""||e(x)==="created"&&f.user_id===((p=N())==null?void 0:p.id)||e(x)==="shared"&&f.user_id!==((k=N())==null?void 0:k.id)}),v(b,new jt(E,{keys:["name","description","user.name","user.email"],threshold:.3})),await Ue(),B()},B=()=>{v(c,e(d)?e(b).search(e(d)).map(f=>f.item):E)},Z=async f=>{await Ct(localStorage.token,f.id).catch(k=>{me.error(`${k}`)})&&(v(y,await Ae(localStorage.token)),Et.set(await Kt(localStorage.token)),me.success(r().t("Knowledge deleted successfully.")))};gt(async()=>{v(x,(localStorage==null?void 0:localStorage.workspaceViewOption)||""),v(y,await Ae(localStorage.token)),v(z,!0)}),Ie(()=>(e(y),e(x)),()=>{e(y).length>0&&e(x)!==void 0?P():v(b,null)}),Ie(()=>(e(d),e(b)),()=>{e(d)!==void 0&&e(b)&&B()}),xt(),Ge();var T=qe();_t(f=>{M(p=>wt.title=`
		${p??""} â€¢ ${J()??""}
	`,[()=>(r(),l(()=>r().t("Knowledge")))])});var Xe=Y(T);{var Ye=f=>{var p=sa(),k=Y(p);It(k,{get show(){return e($)},set show(s){v($,s)},$$events:{confirm:()=>{Z(e(F))}},$$legacy:!0});var ee=i(k,2),pe=a(ee),te=a(pe),ae=a(te),Qe=a(ae,!0);t(ae);var ge=i(ae,2),Re=a(ge,!0);t(ge),t(te);var xe=i(te,2),_e=a(xe),we=a(_e);Gt(we,{className:"size-3",strokeWidth:"2.5"});var he=i(we,2),Ze=a(he,!0);t(he),t(_e),t(xe),t(pe),t(ee);var re=i(ee,2),se=a(re),$e=a(se),oe=a($e),et=a(oe);Lt(et,{className:"size-3.5"}),t(oe);var O=i(oe,2);kt(O);var tt=i(O,2);{var at=s=>{var m=ea(),_=a(m),o=a(_);Xt(o,{className:"size-3",strokeWidth:"2"}),t(_),t(m),H("click",_,()=>{v(d,"")}),g(s,m)};G(tt,s=>{e(d)&&s(at)})}t($e),t(se);var V=i(se,2),le=a(V),rt=a(le);Yt(rt,{onChange:async s=>{localStorage.workspaceViewOption=s,await Ue()},get value(){return e(x)},set value(s){v(x,s)},$$legacy:!0}),t(le),Bt(le,s=>v(D,s),()=>e(D)),t(V);var st=i(V,2);{var ot=s=>{var m=aa();bt(m,5,()=>e(c),yt,(_,o)=>{{let ie=A(()=>(e(o),l(()=>{var j;return((j=e(o))==null?void 0:j.description)??e(o).name})));ue(_,{get content(){return e(ie)},children:(j,ye)=>{var C=ta(),q=a(C),ke=a(q),de=a(ke),ne=a(de),ve=a(ne),dt=a(ve);{var nt=u=>{{let n=A(()=>(r(),l(()=>r().t("Document"))));Te(u,{type:"muted",get content(){return e(n)}})}},vt=u=>{{let n=A(()=>(r(),l(()=>r().t("Collection"))));Te(u,{type:"success",get content(){return e(n)}})}};G(dt,u=>{e(o),l(()=>{var n,K;return(K=(n=e(o))==null?void 0:n.meta)==null?void 0:K.document})?u(nt):u(vt,!1)})}t(ve);var Se=i(ve,2),ct=a(Se);t(Se),t(ne);var Ne=i(ne,2),Be=a(Ne),ft=a(Be);Zt(ft,{$$events:{delete:()=>{v(F,e(o)),v($,!0)}}}),t(Be),t(Ne),t(de);var je=i(de,2),ce=a(je),ze=a(ce),mt=a(ze,!0);t(ze),t(ce);var De=i(ce,2),Ee=a(De),ut=a(Ee);{let u=A(()=>(e(o),r(),l(()=>{var n,K;return((K=(n=e(o))==null?void 0:n.user)==null?void 0:K.email)??r().t("Deleted User")})));ue(ut,{get content(){return e(u)},className:"flex shrink-0",placement:"top-start",children:(n,K)=>{ht();var Pe=$t();M(L=>w(Pe,L),[()=>(r(),We(Fe),e(o),l(()=>{var L,Ce,Ke,Me;return r().t("By {{name}}",{name:Fe(((Ce=(L=e(o))==null?void 0:L.user)==null?void 0:Ce.name)??((Me=(Ke=e(o))==null?void 0:Ke.user)==null?void 0:Me.email)??r().t("Deleted User"))})}))]),g(n,Pe)},$$slots:{default:!0}})}t(Ee),t(De),t(je),t(ke),t(q),t(C),M((u,n)=>{w(ct,`${u??""}
												${n??""}`),w(mt,(e(o),l(()=>e(o).name)))},[()=>(r(),l(()=>r().t("Updated"))),()=>(We(fe),e(o),l(()=>fe(e(o).updated_at*1e3).fromNow()))]),H("click",C,()=>{var u,n;(n=(u=e(o))==null?void 0:u.meta)!=null&&n.document?me.error(r().t("Only collections can be edited, create a new knowledge base to edit/add documents.")):Mt(`/workspace/knowledge/${e(o).id}`)}),g(j,C)},$$slots:{default:!0}})}}),t(m),g(s,m)},lt=s=>{var m=ra(),_=a(m),o=i(a(_),2),ie=a(o,!0);t(o);var j=i(o,2),ye=a(j,!0);t(j),t(_),t(m),M((C,q)=>{w(ie,C),w(ye,q)},[()=>(r(),l(()=>r().t("No knowledge found"))),()=>(r(),l(()=>r().t("Try adjusting your search or filter to find what you are looking for.")))]),g(s,m)};G(st,s=>{e(c),l(()=>(e(c)??[]).length!==0)?s(ot):s(lt,!1)})}t(re);var be=i(re,2),it=a(be);t(be),M((s,m,_,o)=>{w(Qe,s),w(Re,(e(c),l(()=>e(c).length))),w(Ze,m),St(O,"placeholder",_),w(it,`â“˜ ${o??""}`)},[()=>(r(),l(()=>r().t("Knowledge"))),()=>(r(),l(()=>r().t("New Knowledge"))),()=>(r(),l(()=>r().t("Search Knowledge"))),()=>(r(),l(()=>r().t("Use '#' in the prompt input to load and include your knowledge.")))]),Nt(O,()=>e(d),s=>v(d,s)),H("wheel",V,s=>{s.deltaY!==0&&(s.preventDefault(),s.currentTarget.scrollLeft+=s.deltaY)}),g(f,p)},Je=f=>{var p=oa(),k=a(p);Ht(k,{className:"size-5"}),t(p),g(f,p)};G(Xe,f=>{e(z)?f(Ye):f(Je,!1)})}g(I,T),Le(),Q()}function Fa(I){la(I,{})}export{Fa as component};
//# sourceMappingURL=30.DKI89Ogi.js.map
