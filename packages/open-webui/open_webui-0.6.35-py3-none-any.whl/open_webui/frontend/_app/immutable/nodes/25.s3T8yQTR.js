import"../chunks/CWj6FrbW.js";import"../chunks/CN51-NxK.js";import{t as A,a as d,B as Qe,b as it,g as ht,e as ve,c as o,r,k as _,u as Se,w as c,aW as na,s as ie,j as e,l as ue,p as dt,f as w,A as sa,n as xe,d as Le,o as Yt,i as l,x as lt,m as q,aX as ke,aT as la,y as Ia,q as ea,v as Ma,h as Sa,$ as za}from"../chunks/CvTLsZlf.js";import{a as Ke,s as je,c as et,d as ia,r as Pa}from"../chunks/CPzR4-ix.js";import{i as ct}from"../chunks/CNVL70pO.js";import{a as Ie,s as _t}from"../chunks/DzS5ldT-.js";import{p as Ta}from"../chunks/KihEXLMb.js";import{b as qt,g as Ft,d as Aa,c as Wa,r as ja,W as Oa,m as Ba,u as Ra,e as Ha,s as Lt}from"../chunks/D6EOiKH3.js";import{i as we}from"../chunks/B3D73U8p.js";import{b as Da}from"../chunks/BpTtYi1u.js";import{b as da}from"../chunks/Cz9Z7v2M.js";import{p as v}from"../chunks/DBxQAEQJ.js";import{f as Ua}from"../chunks/dsq8o_n-.js";import{m as Jt,y as ca,i as ta,v as aa,n as Fa,x as La}from"../chunks/D38tgtmh.js";import{t as Ne}from"../chunks/Cqe-NRGo.js";import{g as ra}from"../chunks/BDMvu-7n.js";import{d as ye,r as Ja}from"../chunks/BqAeIAOr.js";import"../chunks/BSaLyK_V.js";import{P as Ya,c as qa}from"../chunks/C2gRXX8V.js";import{d as Za}from"../chunks/DkOAY2Kp.js";import{d as Va,c as ua,P as Xa}from"../chunks/CbDI-1l3.js";import{F as Ga,u as Qa}from"../chunks/B11fDMEM.js";import{c as va,g as Ka}from"../chunks/CJEDGw0G.js";import{N as er,d as tr}from"../chunks/D53_wX3Q.js";import{e as St,i as zt}from"../chunks/uF71e8HK.js";import{X as fa}from"../chunks/BFL0NFeS.js";import{I as ar,M as rr}from"../chunks/B_VtPlnM.js";import"../chunks/CXLK5pxB.js";import{p as or}from"../chunks/Bfc47y5P.js";import{S as nr}from"../chunks/Cgvnmqcj.js";import{P as sr}from"../chunks/B0L9ton2.js";import{T as lr}from"../chunks/VKbJuFMC.js";import{T as Fe}from"../chunks/k6hQMChD.js";import{M as ir}from"../chunks/CYOe7ttP.js";import{s as kt}from"../chunks/D4SMs5q_.js";import{D as dr}from"../chunks/ChrjiQ2X.js";import{A as cr}from"../chunks/rhcdx6PQ.js";import{d as ur,b as vr,u as fr}from"../chunks/BY8Ev7y4.js";import{R as mr,V as gr}from"../chunks/Bzgaa0eC.js";import{S as oa}from"../chunks/DD1zKOTk.js";import{M as pr}from"../chunks/D_bGA0GB.js";import{C as hr}from"../chunks/Ch-EHQFf.js";import"../chunks/B1Io5-Zn.js";import{F as _r}from"../chunks/XG0PCJXd.js";import{M as ma,a as ga,b as pa}from"../chunks/DM-96xXi.js";import{f as ha}from"../chunks/CiB29Aqe.js";import{C as wr}from"../chunks/Bvr1FreS.js";import{E as xr}from"../chunks/DEA4EnEJ.js";import{S as _a}from"../chunks/CbY8xr_8.js";import{S as br}from"../chunks/CcqZwM1Q.js";var yr=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 20.25c4.97 0 9-3.694 9-8.25s-4.03-8.25-9-8.25S3 7.444 3 12c0 2.104.859 4.023 2.273 5.48.432.447.74 1.04.586 1.641a4.483 4.483 0 0 1-.923 1.785A5.969 5.969 0 0 0 6 21c1.282 0 2.47-.402 3.445-1.087.81.22 1.668.337 2.555.337Z"></path></svg>');function wa(S,s){let t=v(s,"className",8,"size-4"),p=v(s,"strokeWidth",8,"1.5");var u=yr();A(()=>{Ke(u,"stroke-width",p()),je(u,0,et(t()))}),d(S,u)}var kr=w('<div class=" text-xs font-medium mb-2"> </div> <div class="flex flex-col gap-1"><!> <div class="flex items-center flex-wrap gap-2 mt-1.5"></div></div> <hr class="my-2 border-gray-50 dark:border-gray-700/10"/>',1),$r=w('<option class="bg-gray-50 dark:bg-gray-700"> </option>'),Cr=w('<div class="flex items-center mb-1.5 pt-1.5"><div class=" mr-1 flex items-center"><button class="p-0.5 bg-transparent transition rounded-lg"><!></button></div> <div class=" font-medium text-base flex items-center gap-1"><div> </div></div></div> <div class="mt-1 px-1.5"><div class="pb-10"><!> <div class=" text-xs font-medium mb-1"> </div> <div class="w-full"><select class="w-full bg-transparent text-sm outline-hidden"><option class="bg-gray-50 dark:bg-gray-700" disabled> </option><!></select></div></div></div>',1);function Nr(S,s){it(s,!1);const t=()=>Ie(b,"$i18n",u),p=()=>Ie(qt,"$models",u),[u,te]=_t(),b=ht("i18n");let B=v(s,"show",12,!1),fe=v(s,"selectedModelId",12,""),z=v(s,"files",28,()=>[]),de=v(s,"onUpdate",8,V=>{});ct();var Q=Cr(),me=ve(Q),R=o(me),H=o(R),be=o(H);fa(be,{className:"size-5",strokeWidth:"2.5"}),r(H),r(R);var k=_(R,2),h=o(k),a=o(h,!0);r(h),r(k),r(me);var x=_(me,2),re=o(x),K=o(re);{var Z=V=>{var ee=kr(),le=ve(ee),Oe=o(le,!0);r(le);var he=_(le,2),Xe=o(he);St(Xe,1,()=>(Se(z()),c(()=>z().filter(ge=>ge.type!=="image"))),zt,(ge,L)=>{{let Be=xe(()=>(e(L),c(()=>{var ut;return(ut=e(L))==null?void 0:ut.size}))),tt=xe(()=>(e(L),c(()=>e(L).status==="uploading")));Ga(ge,{className:"w-full",get item(){return e(L)},small:!0,edit:!0,dismissible:!0,get url(){return e(L),c(()=>e(L).url)},get name(){return e(L),c(()=>e(L).name)},get type(){return e(L),c(()=>e(L).type)},get size(){return e(Be)},get loading(){return e(tt)},$$events:{dismiss:()=>{z(z().filter(ut=>ut.id!==e(L).id)),z(z()),de()(z())},click:()=>{e(L)}}})}});var Je=_(Xe,2);St(Je,5,()=>(Se(z()),c(()=>z().filter(ge=>ge.type==="image"))),zt,(ge,L)=>{ar(ge,{get src(){return e(L),c(()=>e(L).url)},imageClassName:" size-14 rounded-xl object-cover",dismissible:!0,onDismiss:()=>{z(z().filter(Be=>Be.id!==e(L).id)),z(z()),de()(z())}})}),r(Je),r(he),sa(2),A(ge=>ie(Oe,ge),[()=>(t(),c(()=>t().t("Files")))]),d(V,ee)};we(K,V=>{Se(z()),c(()=>z().length>0)&&V(Z)})}var W=_(K,2),m=o(W,!0);r(W);var F=_(W,2),P=o(F);A(()=>{fe(),na(()=>{t(),p()})});var $=o(P),U=o($,!0);r($),$.value=$.__value="";var ce=_($);St(ce,1,()=>(p(),c(()=>p().filter(V=>{var ee,le;return!(((le=(ee=V==null?void 0:V.info)==null?void 0:ee.meta)==null?void 0:le.hidden)??!1)}))),zt,(V,ee)=>{var le=$r(),Oe=o(le,!0);r(le);var he={};A(()=>{ie(Oe,(e(ee),c(()=>e(ee).name))),he!==(he=(e(ee),c(()=>e(ee).id)))&&(le.value=(le.__value=(e(ee),c(()=>e(ee).id)))??"")}),d(V,le)}),r(P),r(F),r(re),r(x),A((V,ee,le)=>{ie(a,V),ie(m,ee),ie(U,le)},[()=>(t(),c(()=>t().t("Controls"))),()=>(t(),c(()=>t().t("Model"))),()=>(t(),c(()=>t().t("Select a model")))]),ue("click",H,()=>{B(!B())}),ia(P,fe),d(S,Q),dt(),te()}var Er=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m19.5 19.5-15-15m0 0v11.25m0-11.25h11.25"></path></svg>');function Ir(S,s){let t=v(s,"className",8,"size-4"),p=v(s,"strokeWidth",8,"1.5");var u=Er();A(()=>{Ke(u,"stroke-width",p()),je(u,0,et(t()))}),d(S,u)}var Mr=w('<button class=" text-transparent group-hover:text-gray-500 dark:hover:text-gray-300 transition"><!></button>'),Sr=w('<button class=" text-transparent group-hover:text-gray-500 dark:hover:text-gray-300 transition"><!></button>'),zr=w('<button class=" text-transparent group-hover:text-gray-500 dark:hover:text-gray-300 transition"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg></button>'),Pr=w("<div><!></div>"),Tr=w('<div class=" markdown-prose-sm text-sm"><!></div>'),Ar=w('<div class="flex flex-col gap-1 group"><div class="flex items-center justify-between pt-1"><div class="py-1 text-sm font-semibold uppercase min-w-[6rem] text-left rounded-lg transition"> </div> <div class="flex items-center gap-2"><!> <!> <!></div></div> <div class="flex-1"><!></div></div>');function Wr(S,s){it(s,!1);const t=()=>Ie(te,"$i18n",p),[p,u]=_t(),te=ht("i18n");let b=v(s,"message",12),B=v(s,"idx",8),fe=v(s,"onDelete",8),z=v(s,"onEdit",8),de=v(s,"onInsert",8);ct();var Q=Ar(),me=o(Q),R=o(me),H=o(R,!0);r(R);var be=_(R,2),k=o(be);{let W=xe(()=>(t(),c(()=>t().t("Insert"))));Fe(k,{placement:"top",get content(){return e(W)},children:(m,F)=>{var P=Mr(),$=o(P);Ir($,{className:"size-3.5",strokeWidth:"2"}),r(P),ue("click",P,()=>{de()()}),d(m,P)},$$slots:{default:!0}})}var h=_(k,2);{let W=xe(()=>(t(),c(()=>t().t("Edit"))));Fe(h,{placement:"top",get content(){return e(W)},children:(m,F)=>{var P=Sr(),$=o(P);sr($,{className:"size-3.5",strokeWidth:"2"}),r(P),ue("click",P,()=>{z()()}),d(m,P)},$$slots:{default:!0}})}var a=_(h,2);{let W=xe(()=>(t(),c(()=>t().t("Delete"))));Fe(a,{placement:"top",get content(){return e(W)},children:(m,F)=>{var P=zr();ue("click",P,()=>{fe()()}),d(m,P)},$$slots:{default:!0}})}r(be),r(me);var x=_(me,2),re=o(x);{var K=W=>{var m=Pr(),F=o(m);nr(F,{size:"sm"}),r(m),d(W,m)},Z=W=>{var m=Le(),F=ve(m);{var P=U=>{{let ce=xe(()=>(t(),Se(b()),c(()=>t().t("Enter {{role}} message here",{role:b().role==="user"?t().t("a user"):t().t("an assistant")}))));lr(U,{className:"w-full bg-transparent outline-hidden text-sm resize-none overflow-hidden",get placeholder(){return e(ce)},onBlur:()=>{b(b().edit=!1,!0)},get value(){return b().content},set value(V){b(b().content=V,!0)},$$legacy:!0})}},$=U=>{var ce=Tr(),V=o(ce);{let ee=xe(()=>`note-message-${B()}`);rr(V,{get id(){return e(ee)},get content(){return Se(b()),c(()=>b().content)}})}r(ce),d(U,ce)};we(F,U=>{Se(b()),c(()=>{var ce;return((ce=b())==null?void 0:ce.edit)===!0})?U(P):U($,!1)},!0)}d(W,m)};we(re,W=>{Se(b()),c(()=>{var m,F;return!(((m=b())==null?void 0:m.done)??!0)&&((F=b())==null?void 0:F.content)===""})?W(K):W(Z,!1)})}r(x),r(Q),A(W=>ie(H,W),[()=>(t(),Se(b()),c(()=>t().t(b().role)))]),d(S,Q),dt(),u()}var jr=w('<div class="space-y-3 pb-12"></div>');function Or(S,s){it(s,!1),ht("i18n");let t=v(s,"messages",28,()=>[]),p=v(s,"onInsert",8,te=>{});ct();var u=jr();St(u,5,t,zt,(te,b,B)=>{Wr(te,{get message(){return e(b)},idx:B,onInsert:()=>{var fe;p()(((fe=e(b))==null?void 0:fe.content)??"")},onEdit:()=>{t(t().map((fe,z)=>z===B?{...fe,edit:!0}:fe))},onDelete:()=>{t(t().filter((fe,z)=>z!==B))}})}),r(u),d(S,u),dt()}var Br=w('<span class="text-gray-500 text-sm"> </span>'),Rr=w('<div class="text-xs rounded-xl px-2.5 py-3 w-full markdown-prose-xs"><blockquote><div class=" line-clamp-3"> </div></blockquote></div>'),Hr=w('<button type="button"><!> <span class="block whitespace-nowrap overflow-hidden text-ellipsis leading-none pr-0.5"> </span></button>'),Dr=w('<option class="bg-gray-50 dark:bg-gray-700"> </option>'),Ur=w('<select class=" bg-transparent rounded-lg py-1 px-2 -mx-0.5 text-sm outline-hidden w-full text-right pr-5"></select>'),Fr=w('<div slot="menu" class="flex items-center justify-between gap-2 w-full pr-1"><div><!></div> <!></div>'),Lr=w('<div class="flex items-center mb-1.5 pt-1.5"><div class="flex items-center mr-1"><button class="p-0.5 bg-transparent transition rounded-lg"><!></button></div> <div class=" font-medium text-base flex items-center gap-1"><div> </div> <div><!></div></div></div> <div class="flex flex-col items-center flex-1 @container"><div class=" flex flex-col justify-between w-full overflow-y-auto h-full"><div class="mx-auto w-full md:px-0 h-full relative"><div class=" flex flex-col h-full"><div class=" pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0 scrollbar-hidden" id="messages-container"><div class=" h-full w-full flex flex-col"><div class="flex-1 p-1"><!></div></div></div> <div class=" pb-[1rem]"><!> <!></div></div></div></div></div>',1);function Jr(S,s){it(s,!1);const t=()=>Ie(fe,"$i18n",u),p=()=>Ie(qt,"$models",u),[u,te]=_t();let b=v(s,"show",12,!1),B=v(s,"selectedModelId",12,"");Jt.use({breaks:!0,gfm:!0,renderer:{list(J,oe,pe){if(J.includes("data-checked="))return`<ul data-type="taskList">${J}</ul>`;const Pe=oe?"ol":"ul",Re=oe&&pe!==1?` start="${pe}"`:"";return`<${Pe}${Re}>${J}</${Pe}>`},listitem(J,oe,pe){return oe?`<li data-type="taskItem" data-checked="${pe?"true":"false"}">${J}</li>`:`<li>${J}</li>`}}});const fe=ht("i18n");let z=v(s,"editor",8,null),de=v(s,"editing",12,!1),Q=v(s,"streaming",12,!1),me=v(s,"stopResponseFlag",12,!1),R=v(s,"note",12,null),H=v(s,"selectedContent",12,null),be=v(s,"files",24,()=>[]),k=v(s,"messages",28,()=>[]),h=v(s,"onInsert",8,J=>{}),a=v(s,"onStop",8,()=>{}),x=v(s,"onEdited",8,()=>{});v(s,"insertNoteHandler",8,()=>{});let re=v(s,"scrollToBottomHandler",8,()=>{}),K=q(!1),Z=q(),W="",m=q(!1),F=q(null);const P=`You are an expert document editor.

## Task
Based on the user's instruction, update and enhance the existing notes or selection by incorporating relevant and accurate information from the provided context in the content's primary language. Ensure all edits strictly follow the user‚Äôs intent.

## Input Structure
- Existing notes: Enclosed within <notes></notes> XML tags.
- Additional context: Enclosed within <context></context> XML tags.
- Current note selection: Enclosed within <selection></selection> XML tags.
- Editing instruction: Provided in the user message.

## Output Instructions
- If a selection is provided, edit **only** the content within <selection></selection>. Leave unselected parts unchanged.
- If no selection is provided, edit the entire notes.
- Deliver a single, rewritten version of the notes in markdown format.
- Integrate information from the context only if it directly supports the user's instruction.
- Use clear, organized markdown elements: headings, lists, task lists ([ ]) where tasks or checklists are strongly implied, bold and italic text as appropriate.
- Focus on improving clarity, completeness, and usefulness of the notes.
- Return only the final, fully-edited markdown notes‚Äîdo not include explanations, reasoning, or XML tags.
`;let $=!0;const U=()=>{e(Z)&&$&&ke(Z,e(Z).scrollTop=e(Z).scrollHeight)},ce=()=>{e(Z)&&($=e(Z).scrollHeight-e(Z).scrollTop<=e(Z).clientHeight+10)},V=async()=>{var mt,Ye,Ee,Me,n,i,f,C,X;if(B()===""){Ne.error(t().t("Please select a model."));return}const J=p().find(N=>N.id===B());if(!J){B("");return}let oe;((mt=k().at(-1))==null?void 0:mt.role)==="assistant"?oe=k().at(-1):(oe={role:"assistant",content:"",done:!1},k().push(oe),k(k())),await lt(),U(),me(!1);let pe={json:null,html:"",md:""};W="",e(m)?W=`${P}

`:W=`You are a helpful assistant. Please answer the user's questions based on the context provided.

`,W+=`<notes>${((Me=(Ee=(Ye=R())==null?void 0:Ye.data)==null?void 0:Ee.content)==null?void 0:Me.md)??""}</notes>`+(be()&&be().length>0?`
<context>${be().map(N=>{var D,E;return`${N.name}: ${((E=(D=N==null?void 0:N.file)==null?void 0:D.data)==null?void 0:E.content)??"Could not extract content"}
`}).join("")}</context>`:"")+(H()?`
<selection>${(n=H())==null?void 0:n.text}</selection>`:"");const Ce=JSON.parse(JSON.stringify([{role:"system",content:`${W}`},...k()])),[Pe,Re]=await va(localStorage.token,{model:J.id,stream:!0,messages:Ce},`${Ft}/api`);await lt(),U();let rt="";if(Pe&&Pe.ok){const N=Pe.body.pipeThrough(new TextDecoderStream).pipeThrough(ca(`
`)).getReader();for(;;){const{value:D,done:E}=await N.read();if(E||me()){me()&&Re.abort("User: Stop Response"),e(m)&&(de(!1),Q(!1),x()());break}try{let j=D.split(`
`);for(const G of j)if(G!=="")if(G==="data: [DONE]")e(m)&&(oe.content=`<status title="${t().t("Edited")}" done="true" />`,H()&&((i=H())!=null&&i.text)&&z()&&(z().commands.insertContentAt({from:H().from,to:H().to},pe.html||pe.md||""),H(null))),oe.done=!0,k(k());else{let ne=JSON.parse(G.replace(/^data: /,"")),se=((C=(f=ne.choices[0])==null?void 0:f.delta)==null?void 0:C.content)??"";if(oe.content==""&&se==`
`)continue;e(m)?(de(!0),Q(!0),pe.md+=se,pe.html=Jt.parse(pe.md),(!H()||!((X=H())!=null&&X.text))&&(R(R().data.content.md=pe.md,!0),R(R().data.content.html=pe.html,!0),R(R().data.content.json=null,!0)),re()(),oe.content=`<status title="${t().t("Editing")}" done="false" />`,k(k())):(rt+=se,oe.content=rt,k(k())),await lt()}}catch(j){}U()}}},ee=async J=>{const{content:oe,data:pe}=J;B()&&oe&&(k().push({role:"user",content:oe}),k(k()),await lt(),U(),l(K,!0),await V(),k(k().map(Ce=>(Ce.done=!0,Ce))),l(K,!1),me(!1))};Yt(async()=>{l(m,localStorage.getItem("noteEditEnabled")==="true"),await lt(),U()}),ct();var le=Lr(),Oe=ve(le),he=o(Oe),Xe=o(he),Je=o(Xe);fa(Je,{className:"size-5",strokeWidth:"2.5"}),r(Xe),r(he);var ge=_(he,2),L=o(ge),Be=o(L,!0);r(L);var tt=_(L,2),ut=o(tt);{let J=xe(()=>(t(),c(()=>t().t("This feature is experimental and may be modified or discontinued without notice."))));Fe(ut,{get content(){return e(J)},position:"top",className:"inline-block",children:(oe,pe)=>{var Ce=Br(),Pe=o(Ce);r(Ce),A(Re=>ie(Pe,`(${Re??""})`),[()=>(t(),c(()=>t().t("Experimental")))]),d(oe,Ce)},$$slots:{default:!0}})}r(tt),r(ge),r(Oe);var wt=_(Oe,2),at=o(wt),Pt=o(at),$t=o(Pt),vt=o($t),Tt=o(vt),At=o(Tt),Wt=o(At);Or(Wt,{get onInsert(){return h()},get messages(){return k()},set messages(J){k(J)},$$legacy:!0}),r(At),r(Tt),r(vt),da(vt,J=>l(Z,J),()=>e(Z));var xt=_(vt,2),jt=o(xt);{var Ct=J=>{var oe=Rr(),pe=o(oe),Ce=o(pe),Pe=o(Ce,!0);r(Ce),r(pe),r(oe),A(()=>ie(Pe,(Se(H()),c(()=>{var Re;return(Re=H())==null?void 0:Re.text})))),d(J,oe)};we(jt,J=>{H()&&J(Ct)})}var Rt=_(jt,2);ir(Rt,{acceptFiles:!1,get inputLoading(){return e(K)},showFormattingToolbar:!1,onSubmit:ee,get onStop(){return a()},get chatInputElement(){return e(F)},set chatInputElement(J){l(F,J)},$$slots:{menu:(J,oe)=>{var pe=Fr(),Ce=o(pe),Pe=o(Ce);{let rt=xe(()=>(t(),c(()=>t().t("Edit"))));Fe(Pe,{get content(){return e(rt)},placement:"top",children:(mt,Ye)=>{var Ee=Hr(),Me=o(Ee);Ya(Me,{className:"size-4",strokeWidth:"1.75"});var n=_(Me,2),i=o(n,!0);r(n),r(Ee),A(f=>{Ee.disabled=Q()||e(K),je(Ee,1,`px-2 @xl:px-2.5 py-2 flex gap-1.5 items-center text-sm rounded-full transition-colors duration-300 focus:outline-hidden max-w-full overflow-hidden hover:bg-gray-50 dark:hover:bg-gray-800 ${e(m)?" text-sky-500 dark:text-sky-300 bg-sky-50 dark:bg-sky-200/5":"bg-transparent text-gray-600 dark:text-gray-300 "} disabled:opacity-50 disabled:pointer-events-none`),ie(i,f)},[()=>(t(),c(()=>t().t("Edit")))]),ue("click",Ee,or(()=>{l(m,!e(m)),localStorage.setItem("noteEditEnabled",e(m)?"true":"false")})),d(mt,Ee)},$$slots:{default:!0}})}r(Ce);var Re=_(Ce,2);Fe(Re,{get content(){return B()},children:(rt,mt)=>{var Ye=Ur();A(()=>{B(),na(()=>{p()})}),St(Ye,5,()=>(p(),c(()=>p().filter(Ee=>{var Me,n;return!(((n=(Me=Ee==null?void 0:Ee.info)==null?void 0:Me.meta)==null?void 0:n.hidden)??!1)}))),zt,(Ee,Me)=>{var n=Dr(),i=o(n,!0);r(n);var f={};A(()=>{ie(i,(e(Me),c(()=>e(Me).name))),f!==(f=(e(Me),c(()=>e(Me).id)))&&(n.value=(n.__value=(e(Me),c(()=>e(Me).id)))??"")}),d(Ee,n)}),r(Ye),ia(Ye,B),d(rt,Ye)},$$slots:{default:!0}}),r(pe),d(J,pe)}},$$legacy:!0}),r(xt),r($t),r(Pt),r(at),r(wt),A(J=>ie(Be,J),[()=>(t(),c(()=>t().t("Chat")))]),ue("click",Xe,()=>{b(!b())}),ue("scroll",vt,ce),d(S,le),dt(),te()}var Yr=w('<div class=" px-3.5 py-2.5 h-screen max-h-dvh flex flex-col"><!></div>'),qr=w('<div class=" absolute -left-1.5 -right-1.5 -top-0 -bottom-0 z-20 cursor-col-resize bg-transparent"></div>'),Zr=w('<div class="flex max-h-full min-h-full"><div class="w-full pt-2 bg-white dark:shadow-lg dark:bg-gray-850 z-40 pointer-events-auto overflow-y-auto scrollbar-hidden flex flex-col px-2"><!></div></div>'),Vr=w("<!> <!>",1);function Xr(S,s){it(s,!1);let t=v(s,"show",12,!1),p=v(s,"pane",12,null),u=v(s,"containerId",8,"note-container"),te,b=q(!1),B=q(0);const fe=async R=>{R.matches?l(b,!0):(l(b,!1),p(null))};Yt(()=>{te=window.matchMedia("(min-width: 1000px)"),te.addEventListener("change",fe),fe(te);const R=document.getElementById(u());l(B,Math.floor(400/R.clientWidth*100)),new ResizeObserver(be=>{for(let k of be){const a=400/k.contentRect.width*100;l(B,Math.floor(a)),t()&&p()&&p().isExpanded()&&p().getSize()<e(B)&&p().resize(e(B))}}).observe(R)}),la(()=>{te.removeEventListener("change",fe)}),ct();var z=Le(),de=ve(z);{var Q=R=>{var H=Le(),be=ve(H);{var k=h=>{dr(h,{get show(){return t()},onClose:()=>{t(!1)},children:(a,x)=>{var re=Yr(),K=o(re);kt(K,s,"default",{},null),r(re),d(a,re)},$$slots:{default:!0}})};we(be,h=>{t()&&h(k)})}d(R,H)},me=R=>{var H=Le(),be=ve(H);{var k=h=>{var a=Vr(),x=ve(a);Va(x,{class:"relative flex items-center justify-center group border-l border-gray-50 dark:border-gray-850 hover:border-gray-200 dark:hover:border-gray-800  transition z-20",id:"controls-resizer",children:(K,Z)=>{var W=qr();d(K,W)},$$slots:{default:!0}});var re=_(x,2);{let K=xe(()=>(e(B),c(()=>Math.max(20,e(B)))));ua(re,{get defaultSize(){return e(K)},get minSize(){return e(B)},onCollapse:()=>{t(!1)},collapsible:!0,class:" z-10 ",get pane(){return p()},set pane(Z){p(Z)},children:(Z,W)=>{var m=Le(),F=ve(m);{var P=$=>{var U=Zr(),ce=o(U),V=o(ce);kt(V,s,"default",{},null),r(ce),r(U),d($,U)};we(F,$=>{t()&&$(P)})}d(Z,m)},$$slots:{default:!0},$$legacy:!0})}d(h,a)};we(be,h=>{t()&&h(k)},!0)}d(R,H)};we(de,R=>{e(b)?R(me,!1):R(Q)})}d(S,z),dt()}var Gr=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"></path></svg>');function Qr(S,s){let t=v(s,"className",8,"size-3"),p=v(s,"strokeWidth",8,"1.5");var u=Gr();A(()=>{Ke(u,"stroke-width",p()),je(u,0,et(t()))}),d(S,u)}var Kr=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 0 0 2.625.372 9.337 9.337 0 0 0 4.121-.952 4.125 4.125 0 0 0-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 0 1 8.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0 1 11.964-3.07M12 6.375a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0Zm8.25 2.25a2.625 2.625 0 1 1-5.25 0 2.625 2.625 0 0 1 5.25 0Z"></path></svg>');function eo(S,s){let t=v(s,"className",8,"size-3"),p=v(s,"strokeWidth",8,"1.5");var u=Kr();A(()=>{Ke(u,"stroke-width",p()),je(u,0,et(t()))}),d(S,u)}var to=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"></path></svg>');function ao(S,s){let t=v(s,"className",8,"size-4"),p=v(s,"strokeWidth",8,"1.5");var u=to();A(()=>{Ke(u,"stroke-width",p()),je(u,0,et(t()))}),d(S,u)}var ro=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.042 21.672 13.684 16.6m0 0-2.51 2.225.569-9.47 5.227 7.917-3.286-.672ZM12 2.25V4.5m5.834.166-1.591 1.591M20.25 10.5H18M7.757 14.743l-1.59 1.59M6 10.5H3.75m4.007-4.243-1.59-1.59"></path></svg>');function oo(S,s){let t=v(s,"className",8,"size-4"),p=v(s,"strokeWidth",8,"1.5");var u=ro();A(()=>{Ke(u,"stroke-width",p()),je(u,0,et(t()))}),d(S,u)}var no=w('<button class="flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"><div class=" self-center mr-2"><!></div> <div class=" self-center truncate"> </div></button> <button class="flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"><div class=" self-center mr-2"><!></div> <div class=" self-center truncate"> </div></button> <button class="flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"><div class=" self-center mr-2"><!></div> <div class=" self-center truncate"> </div></button>',1),so=w("<!> <!>",1);function lo(S,s){it(s,!1);const t=()=>Ie(te,"$i18n",p),[p,u]=_t(),te=ht("i18n");let b=v(s,"show",12,!1),B=v(s,"className",8,"max-w-[170px]"),fe=v(s,"onRecord",8,()=>{}),z=v(s,"onCaptureAudio",8,()=>{}),de=v(s,"onUpload",8,()=>{});const Q=Ia();ct(),ma(S,{onOpenChange:me=>{Q("change",me)},get open(){return b()},set open(me){b(me)},children:(me,R)=>{var H=so(),be=ve(H);ga(be,{children:(h,a)=>{var x=Le(),re=ve(x);kt(re,s,"default",{},null),d(h,x)},$$slots:{default:!0}});var k=_(be,2);kt(k,s,"content",{},h=>{pa(h,{get class(){return`w-full ${B()??""} text-sm rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary`},sideOffset:8,side:"bottom",align:"start",transition:a=>ha(a,{duration:100}),children:(a,x)=>{var re=no(),K=ve(re),Z=o(K),W=o(Z);ao(W,{className:"size-4",strokeWidth:"2"}),r(Z);var m=_(Z,2),F=o(m,!0);r(m),r(K);var P=_(K,2),$=o(P),U=o($);oo(U,{className:"size-4",strokeWidth:"2"}),r($);var ce=_($,2),V=o(ce,!0);r(ce),r(P);var ee=_(P,2),le=o(ee),Oe=o(le);wr(Oe,{className:"size-4",strokeWidth:"2"}),r(le);var he=_(le,2),Xe=o(he,!0);r(he),r(ee),A((Je,ge,L)=>{ie(F,Je),ie(V,ge),ie(Xe,L)},[()=>(t(),c(()=>t().t("Record"))),()=>(t(),c(()=>t().t("Capture Audio"))),()=>(t(),c(()=>t().t("Upload Audio")))]),ue("click",K,async()=>{fe()(),b(!1)}),ue("click",P,()=>{z()(),b(!1)}),ue("click",ee,()=>{de()(),b(!1)}),d(a,re)},$$slots:{default:!0}})}),d(me,H)},$$slots:{default:!0},$$legacy:!0}),dt(),u()}var io=Qe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path fill-rule="evenodd" d="M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z" clip-rule="evenodd"></path></svg>');function co(S,s){let t=v(s,"className",8,"w-4 h-4");v(s,"strokeWidth",8,"1.5");var p=io();A(()=>je(p,0,et(t()))),d(S,p)}var uo=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 15 3 9m0 0 6-6M3 9h12a6 6 0 0 1 0 12h-3"></path></svg>');function vo(S,s){let t=v(s,"className",8,"size-4"),p=v(s,"strokeWidth",8,"1.5");var u=uo();A(()=>{Ke(u,"stroke-width",p()),je(u,0,et(t()))}),d(S,u)}var fo=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="m15 15 6-6m0 0-6-6m6 6H9a6 6 0 0 0 0 12h3"></path></svg>');function mo(S,s){let t=v(s,"className",8,"size-4"),p=v(s,"strokeWidth",8,"1.5");var u=fo();A(()=>{Ke(u,"stroke-width",p()),je(u,0,et(t()))}),d(S,u)}var go=w('<button class="flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"><div class=" self-center mr-2"><!></div> <div class=" self-center truncate"> </div></button> <button class="flex rounded-md py-1.5 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition"><div class=" self-center mr-2"><!></div> <div class=" self-center truncate"> </div></button>',1),po=w("<!> <!>",1);function ho(S,s){it(s,!1);const t=()=>Ie(te,"$i18n",p),[p,u]=_t(),te=ht("i18n");let b=v(s,"show",12,!1),B=v(s,"className",8,"max-w-[170px]"),fe=v(s,"onEdit",8,()=>{}),z=v(s,"onChat",8,()=>{}),de=v(s,"onChange",8,()=>{});ct(),ma(S,{get onOpenChange(){return de()},get open(){return b()},set open(Q){b(Q)},children:(Q,me)=>{var R=po(),H=ve(R);ga(H,{children:(k,h)=>{var a=Le(),x=ve(a);kt(x,s,"default",{},null),d(k,a)},$$slots:{default:!0}});var be=_(H,2);kt(be,s,"content",{},k=>{pa(k,{get class(){return`w-full ${B()??""} text-sm rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-lg font-primary`},sideOffset:8,side:"bottom",align:"end",transition:h=>ha(h,{duration:100}),children:(h,a)=>{var x=go(),re=ve(x),K=o(re),Z=o(K);_a(Z,{className:"size-4",strokeWidth:"2"}),r(K);var W=_(K,2),m=o(W,!0);r(W),r(re);var F=_(re,2),P=o(F),$=o(P);wa($,{className:"size-4",strokeWidth:"2"}),r(P);var U=_(P,2),ce=o(U,!0);r(U),r(F),A((V,ee)=>{ie(m,V),ie(ce,ee)},[()=>(t(),c(()=>t().t("Enhance"))),()=>(t(),c(()=>t().t("Chat")))]),ue("click",re,async()=>{fe()(),b(!1)}),ue("click",F,()=>{z()(),b(!1)}),d(h,x)},$$slots:{default:!0}})}),d(Q,R)},$$slots:{default:!0},$$legacy:!0}),dt(),u()}var _o=Qe('<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"></path></svg>');function wo(S,s){let t=v(s,"className",8,"w-4 h-4"),p=v(s,"strokeWidth",8,"1.5");var u=_o();A(()=>{Ke(u,"stroke-width",p()),je(u,0,et(t()))}),d(S,u)}var xo=w('<div class=" text-sm text-gray-500"> <span class="  font-semibold"> </span>.</div>'),bo=w('<div class=" absolute top-0 bottom-0 left-0 right-0 flex"><div class="m-auto"><!></div></div>'),yo=w('<button id="sidebar-toggle-button" class=" cursor-pointer flex rounded-lg hover:bg-gray-100 dark:hover:bg-gray-850 transition cursor-"><div class=" self-center p-1.5"><!></div></button>'),ko=w("<div><!></div>"),$o=w('<button class=" self-center dark:hover:text-white transition" id="generate-title-button"><!></button>'),Co=w('<div class="flex self-center items-center space-x-1.5 z-10 translate-y-[0.5px] -translate-x-[0.5px] pl-2"><!></div>'),No=w('<div><div class="flex items-center gap-0.5 self-center min-w-fit" dir="ltr"><button class="self-center p-1 hover:enabled:bg-black/5 dark:hover:enabled:bg-white/5 dark:hover:enabled:text-white hover:enabled:text-black rounded-md transition disabled:cursor-not-allowed disabled:text-gray-500 disabled:hover:text-gray-500"><!></button> <button class="self-center p-1 hover:enabled:bg-black/5 dark:hover:enabled:bg-white/5 dark:hover:enabled:text-white hover:enabled:text-black rounded-md transition disabled:cursor-not-allowed disabled:text-gray-500 disabled:hover:text-gray-500"><!></button></div></div>'),Eo=w('<button class="p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg"><!></button>'),Io=w('<button class="p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg"><!></button>'),Mo=w('<div class="p-1 bg-transparent hover:bg-white/5 transition rounded-lg"><!></div>'),So=w("<span> </span>"),zo=w("<span> </span>"),Po=w("<span> </span>"),To=w("<span> </span>"),Ao=w('<div class="flex items-center gap-1 px-1 min-w-fit"><div> </div> <div> </div></div>'),Wo=w("<div></div>"),jo=w('<div><div class="shrink-0 w-full flex justify-between items-center px-3.5 mb-1.5"><div class="w-full flex items-center"><!> <input class="w-full text-2xl font-medium bg-transparent outline-hidden" type="text" required/> <!> <div class="flex items-center gap-0.5 translate-x-1"><!> <!> <!> <!></div></div></div> <div class="  px-2.5"><div class=" flex w-full bg-transparent overflow-x-auto scrollbar-none"><div class="flex gap-1 items-center text-xs font-medium text-gray-500 dark:text-gray-500 w-fit"><button class=" flex items-center gap-1 w-fit py-1 px-1.5 rounded-lg min-w-fit"><!> <!></button> <button class=" flex items-center gap-1 w-fit py-1 px-1.5 rounded-lg min-w-fit"><!> <span> </span></button> <!></div></div></div> <div class=" flex-1 w-full h-full overflow-auto px-3.5 pb-20 relative pt-2.5" id="note-content-container"><!> <!></div></div>'),Oo=w('<div class="flex-1 w-full"><!></div>'),Bo=w('<div class="cursor-pointer p-2.5 flex rounded-full border border-gray-50 bg-white dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition shadow-xl"><!></div>'),Ro=w('<button class="p-2 flex justify-center items-center hover:bg-gray-50 dark:hover:bg-gray-800 rounded-full transition shrink-0" type="button"><!></button>'),Ho=w('<div class="cursor-pointer p-2.5 flex rounded-full border border-gray-50 bg-white dark:border-none dark:bg-gray-850 hover:bg-gray-50 dark:hover:bg-gray-800 transition shadow-xl"><!></div>'),Do=w('<!> <div class="cursor-pointer flex gap-0.5 rounded-full border border-gray-50 dark:border-gray-850 dark:bg-gray-850 transition shadow-xl"><!></div>',1),Uo=w('<div class="relative flex-1 w-full h-full flex justify-center pt-[11px]" id="note-editor"><!></div> <div class="absolute z-20 bottom-0 right-0 p-3.5 max-w-full w-full flex"><div class="flex gap-1 w-full min-w-full justify-between"><!></div></div>',1),Fo=w("<!> <!>",1),Lo=w("<!> <!> <!> <!>",1);function Jo(S,s){it(s,!1);const t=()=>Ie(H,"$i18n",Q),p=()=>Ie(qt,"$models",Q),u=()=>Ie(Aa,"$settings",Q),te=()=>Ie(Wa,"$config",Q),b=()=>Ie(ja,"$socket",Q),B=()=>Ie(Oa,"$WEBUI_NAME",Q),fe=()=>Ie(Ba,"$mobile",Q),z=()=>Ie(Lt,"$showSidebar",Q),de=()=>Ie(Ra,"$user",Q),[Q,me]=_t(),{saveAs:R}=Ua,H=ht("i18n");ye.extend(qa),ye.extend(Za),ye.extend(Ja);async function be(n){for(const i of n)try{ye.locale(i);break}catch(f){`${i}`}}let k=v(s,"id",8,null),h=q(null),a=q(null),x=q([]),re=q([]),K=q(0),Z=q(0),W=q(null),m=q(null),F=q(!1),P=q(!1),$=q(!1),U=q("chat"),ce=q(null),V=q(!1),ee=q(!1),le=q(!1),Oe=q(!1),he=q(!1),Xe=q(!1),Je=q(!1),ge=q(!1),L=q(!1),Be=q(!1),tt=q(null);const ut=async()=>{l(Je,!0);const n=await vr(localStorage.token,k()).catch(i=>(Ne.error(`${i}`),null));if(l(re,[]),n)l(a,n),l(x,n.data.files||[]);else{ra("/");return}l(Je,!1)};let wt=null;const at=()=>{wt&&clearTimeout(wt),wt=setTimeout(async()=>{var n,i;await fr(localStorage.token,k(),{title:((n=e(a))==null?void 0:n.title)===""?t().t("Untitled"):e(a).title,data:{files:e(x)},access_control:(i=e(a))==null?void 0:i.access_control}).catch(f=>{Ne.error(`${f}`)})},200)};function Pt(n,i){return JSON.stringify(n)===JSON.stringify(i)}function $t(n){var C;const i={json:n.data.content.json,html:n.data.content.html,md:n.data.content.md},f=(C=n.data.versions)==null?void 0:C.at(-1);return!f||!Pt(f,i)?(n.data.versions=(n.data.versions??[]).concat(i),!0):!1}const vt=async()=>{e(h)&&e(h).commands.setContent(e(a).data.content.html)},Tt=async()=>{var X,N;const i=`### Task:
Generate a concise, 3-5 word title with an emoji summarizing the content in the content's primary language.
### Guidelines:
- The title should clearly represent the main theme or subject of the content.
- Use emojis that enhance understanding of the topic, but avoid quotation marks or special formatting.
- Write the title in the content's primary language.
- Prioritize accuracy over excessive creativity; keep it clear and simple.
- Your entire response must consist solely of the JSON object, without any introductory or concluding text.
- The output must be a single, raw JSON object, without any markdown code fences or other encapsulating text.
- Ensure no conversational text, affirmations, or explanations precede or follow the raw JSON output, as this will cause direct parsing failure.
### Output:
JSON format: { "title": "your concise title here" }
### Examples:
- { "title": "üìâ Stock Market Trends" },
- { "title": "üç™ Perfect Chocolate Chip Recipe" },
- { "title": "Evolution of Music Streaming" },
- { "title": "Remote Work Productivity Tips" },
- { "title": "Artificial Intelligence in Healthcare" },
- { "title": "üéÆ Video Game Development Insights" }
### Content:
<content>
${e(a).data.content.md}
</content>`,f=JSON.parse(JSON.stringify(e(a).title));ke(a,e(a).title=""),l(he,!0);const C=await Ka(localStorage.token,{model:e(m),stream:!1,messages:[{role:"user",content:i}]},`${Ft}/api`);if(C){const D=((N=(X=C==null?void 0:C.choices[0])==null?void 0:X.message)==null?void 0:N.content)??"";try{const E=D.indexOf("{"),j=D.lastIndexOf("}");if(E!==-1&&j!==-1){const G=D.substring(E,j+1),ne=JSON.parse(G);ne&&ne.title&&ke(a,e(a).title=ne.title.trim())}}catch(E){Ne.error(t().t("Failed to generate title"))}}e(a).title||ke(a,e(a).title=f),l(he,!1),await lt(),at()};async function At(){if(e(m)===""){Ne.error(t().t("Please select a model."));return}const n=p().filter(i=>{var f,C;return i.id===e(m)&&!(((C=(f=i==null?void 0:i.info)==null?void 0:f.meta)==null?void 0:C.hidden)??!1)}).find(i=>i.id===e(m));if(!n){l(m,"");return}l(ge,!0),await pe(n),l(ge,!1),vt(),l(W,null)}const Wt=async()=>{l(Be,!0),e(Be)},xt=async n=>{var C,X,N,D,E,j,G,ne;const i=aa(),f={type:"file",file:"",id:null,url:"",name:n.name,collection_name:"",status:"uploading",size:n.size,error:"",itemId:i};if(f.size==0)return Ne.error(t().t("You cannot upload an empty file.")),null;l(x,[...e(x),f]),l(U,"settings"),e($)||l($,!0);try{let se=null;(n.type.startsWith("audio/")||n.type.startsWith("video/"))&&((N=(X=(C=u())==null?void 0:C.audio)==null?void 0:X.stt)!=null&&N.language)&&(se={language:(j=(E=(D=u())==null?void 0:D.audio)==null?void 0:E.stt)==null?void 0:j.language});const y=await Qa(localStorage.token,n,se);y?(y.id,f.name,(G=y==null?void 0:y.meta)==null||G.collection_name,y.error&&(console.warn("File upload warning:",y.error),Ne.warning(y.error)),f.status="uploaded",f.file=y,f.id=y.id,f.collection_name=((ne=y==null?void 0:y.meta)==null?void 0:ne.collection_name)||(y==null?void 0:y.collection_name),f.url=`${Ha}/files/${y.id}`,l(x,e(x))):l(x,e(x).filter(He=>(He==null?void 0:He.itemId)!==i))}catch(se){Ne.error(`${se}`),l(x,e(x).filter(y=>(y==null?void 0:y.itemId)!==i))}return e(x).length>0?ke(a,e(a).data.files=e(x)):ke(a,e(a).data.files=null),ke(h,e(h).storage.files=e(x)),at(),f},jt=async(n,i={},f={})=>{var j,G,ne,se,y,He;const C=(i==null?void 0:i.imageCompression)??!1,X=((G=(j=f==null?void 0:f.file)==null?void 0:j.image_compression)==null?void 0:G.width)??null,N=((se=(ne=f==null?void 0:f.file)==null?void 0:ne.image_compression)==null?void 0:se.height)??null;if(!C&&!X&&!N)return n;let D=null,E=null;return C&&(D=((y=i==null?void 0:i.imageCompressionSize)==null?void 0:y.width)??null,E=((He=i==null?void 0:i.imageCompressionSize)==null?void 0:He.height)??null),X&&(D===null||D>X)&&(D=X),N&&(E===null||E>N)&&(E=N),D||E?await La(n,D,E):n},Ct=async n=>{var i,f,C,X,N,D,E,j;if(n.name,n.type,n.size,n.name.split(".").at(-1),(((f=(i=te())==null?void 0:i.file)==null?void 0:f.max_size)??null)!==null&&n.size>(((X=(C=te())==null?void 0:C.file)==null?void 0:X.max_size)??0)*1024*1024){n.size,(((D=(N=te())==null?void 0:N.file)==null?void 0:D.max_size)??0)*1024*1024,Ne.error(t().t("File size should not exceed {{maxSize}} MB.",{maxSize:(j=(E=te())==null?void 0:E.file)==null?void 0:j.max_size}));return}return n.type.startsWith("image/")?await new Promise(async(ne,se)=>{let y=new FileReader;y.onload=async He=>{try{let ot=He.target.result;ot=await jt(ot,u(),te());const Ge={id:aa(),type:"image",url:`${ot}`};l(x,[...e(x),Ge]),ke(a,e(a).data.files=e(x)),ke(h,e(h).storage.files=e(x)),at(),ne(Ge)}catch(ot){se(ot)}},y.readAsDataURL(n.type==="image/heic"?await Fa(n):n)}):await xt(n)},Rt=async n=>{if(n==="txt"){const i=new Blob([e(a).data.content.md],{type:"text/plain"});R(i,`${e(a).title}.txt`)}else if(n==="md"){const i=new Blob([e(a).data.content.md],{type:"text/markdown"});R(i,`${e(a).title}.md`)}else if(n==="pdf")try{await tr(e(a))}catch(i){Ne.error(`${i}`)}},J=async n=>{await ur(localStorage.token,n).catch(f=>(Ne.error(`${f}`),null))?(Ne.success(t().t("Note deleted successfully")),ra("/notes")):Ne.error(t().t("Failed to delete note"))},oe=()=>{const n=document.getElementById("note-content-container");n&&(n.scrollTop=n==null?void 0:n.scrollHeight)},pe=async n=>{l(Be,!1);let i={json:null,html:"",md:""};const f=`Enhance existing notes using additional context provided from audio transcription or uploaded file content in the content's primary language. Your task is to make the notes more useful and comprehensive by incorporating relevant information from the provided context.

Input will be provided within <notes> and <context> XML tags, providing a structure for the existing notes and context respectively.

# Output Format

Provide the enhanced notes in markdown format. Use markdown syntax for headings, lists, task lists ([ ]) where tasks or checklists are strongly implied, and emphasis to improve clarity and presentation. Ensure that all integrated content from the context is accurately reflected. Return only the markdown formatted note.
`,[C,X]=await va(localStorage.token,{model:n.id,stream:!0,messages:[{role:"system",content:f},{role:"user",content:`<notes>${e(a).data.content.md}</notes>`+(e(x)&&e(x).length>0?`
<context>${e(x).map(N=>{var D,E;return`${N.name}: ${((E=(D=N==null?void 0:N.file)==null?void 0:D.data)==null?void 0:E.content)??"Could not extract content"}
`}).join("")}</context>`:"")}]},`${Ft}/api`);if(await lt(),l(L,!0),C&&C.ok){const N=C.body.pipeThrough(new TextDecoderStream).pipeThrough(ca(`
`)).getReader();for(;;){const{value:D,done:E}=await N.read();if(E||e(Be)){e(Be)&&X.abort("User: Stop Response"),l(ge,!1),l(L,!1);break}try{let j=D.split(`
`);for(const G of j)if(G!==""&&G!=="data: [DONE]"){let ne=JSON.parse(G.replace(/^data: /,""));if(ne.choices&&ne.choices.length>0){const se=ne.choices[0];se.delta&&se.delta.content&&(i.md+=se.delta.content,i.html=Jt.parse(i.md),ke(a,e(a).data.content.md=i.md),ke(a,e(a).data.content.html=i.html),ke(a,e(a).data.content.json=null),oe())}}}catch(j){}}}l(L,!1)},Ce=n=>{var i;$t(e(a)),(i=e(tt))==null||i.insertContent(n)},Pe=async n=>{if(n.id===k()){n.access_control&&n.access_control!==e(a).access_control&&ke(a,e(a).access_control=n.access_control),n.data&&n.data.files&&(l(x,n.data.files),ke(a,e(a).data.files=e(x))),n.title&&n.title&&ke(a,e(a).title=n.title),ke(h,e(h).storage.files=e(x)),await lt();for(const i of e(x))if(i.type==="image"){const f=new CustomEvent("data",{files:e(x)}),C=document.getElementById(`image:${i.id}`);C&&C.dispatchEvent(f)}}};Yt(async()=>{var n,i,f,C,X,N,D;await lt(),(n=b())==null||n.emit("join-note",{note_id:k(),auth:{token:localStorage.token}}),(i=b())==null||i.on("note-events",Pe),(f=u())!=null&&f.models?l(m,(C=u())==null?void 0:C.models[0]):(X=te())!=null&&X.default_models?l(m,(N=te())==null?void 0:N.default_models.split(",")[0]):l(m,""),e(m)&&(p().filter(j=>{var G,ne;return j.id===e(m)&&!(((ne=(G=j==null?void 0:j.info)==null?void 0:G.meta)==null?void 0:ne.hidden)??!1)}).find(j=>j.id===e(m))||l(m,"")),e(m)||l(m,((D=p().filter(E=>{var j,G;return!(((G=(j=E==null?void 0:E.info)==null?void 0:j.meta)==null?void 0:G.hidden)??!1)}).at(0))==null?void 0:D.id)||""),document.getElementById("note-editor")}),la(()=>{var n;(n=b())==null||n.off("note-events",Pe),document.getElementById("note-editor")}),ea(()=>t(),()=>{be(t().languages)}),ea(()=>Se(k()),()=>{k()&&ut()}),Ma(),ct();var Re=Lo();Sa(n=>{A(i=>za.title=`
		${i??""}
	`,[()=>(e(a),B(),c(()=>{var i,f,C,X;return(i=e(a))!=null&&i.title?`${((f=e(a))==null?void 0:f.title.length)>30?`${(C=e(a))==null?void 0:C.title.slice(0,30)}...`:(X=e(a))==null?void 0:X.title} ‚Ä¢ ${B()}`:`${B()}`}))])});var rt=ve(Re);{var mt=n=>{cr(n,{accessRoles:["read","write"],onChange:()=>{at()},get show(){return e(ee)},set show(i){l(ee,i)},get accessControl(){return e(a).access_control},set accessControl(i){ke(a,e(a).access_control=i)},$$legacy:!0})};we(rt,n=>{e(a)&&n(mt)})}var Ye=_(rt,2);_r(Ye,{get show(){return e(Xe)}});var Ee=_(Ye,2);{let n=xe(()=>(t(),c(()=>t().t("Delete note?"))));hr(Ee,{get title(){return e(n)},get show(){return e(V)},set show(i){l(V,i)},$$events:{confirm:()=>{J(e(a).id),l(V,!1)}},children:(i,f)=>{var C=xo(),X=o(C),N=_(X),D=o(N,!0);r(N),sa(),r(C),A(E=>{ie(X,`${E??""} `),ie(D,(e(a),c(()=>e(a).title)))},[()=>(t(),c(()=>t().t("This will delete")))]),d(i,C)},$$slots:{default:!0},$$legacy:!0})}var Me=_(Ee,2);Xa(Me,{direction:"horizontal",class:"w-full h-full",children:(n,i)=>{var f=Fo(),C=ve(f);ua(C,{defaultSize:70,minSize:30,class:"h-full flex flex-col w-full relative",children:(N,D)=>{var E=Uo(),j=ve(E),G=o(j);{var ne=De=>{var Te=bo(),qe=o(Te),ze=o(qe);oa(ze,{className:"size-5"}),r(qe),r(Te),d(De,Te)},se=De=>{var Te=jo(),qe=o(Te),ze=o(qe),Ot=o(ze);{var Ae=g=>{var I=ko(),Y=o(I);{let O=xe(()=>(z(),t(),c(()=>z()?t().t("Close Sidebar"):t().t("Open Sidebar"))));Fe(Y,{get content(){return e(O)},children:(_e,M)=>{var T=yo(),$e=o(T),ae=o($e);br(ae,{}),r($e),r(T),ue("click",T,()=>{Lt.set(!z())}),d(_e,T)},$$slots:{default:!0}})}r(I),A(()=>je(I,1,`${z()?"md:hidden pl-0.5":""} flex flex-none items-center pr-1 -translate-x-1`)),d(g,I)};we(Ot,g=>{fe()&&g(Ae)})}var We=_(Ot,2);Pa(We);var Ze=_(We,2);{var yt=g=>{var I=Co(),Y=o(I);{let O=xe(()=>(t(),c(()=>t().t("Generate"))));Fe(Y,{get content(){return e(O)},children:(_e,M)=>{var T=$o(),$e=o(T);_a($e,{strokeWidth:"2"}),r(T),A(()=>T.disabled=(e(a),de(),e(he),c(()=>{var ae,Ve,Ue;return((ae=e(a))==null?void 0:ae.user_id)!==((Ve=de())==null?void 0:Ve.id)&&((Ue=de())==null?void 0:Ue.role)!=="admin"||e(he)}))),ue("mouseenter",T,()=>{l(le,!0)}),ue("click",T,ae=>{ae.preventDefault(),ae.stopImmediatePropagation(),ae.stopPropagation(),Tt(),l(Oe,!1)}),d(_e,T)},$$slots:{default:!0}})}r(I),d(g,I)};we(Ze,g=>{e(Oe)&&!e(he)&&g(yt)})}var Nt=_(Ze,2),ft=o(Nt);{var Et=g=>{var I=No(),Y=o(I),O=o(Y),_e=o(O);vo(_e,{className:"size-4"}),r(O);var M=_(O,2),T=o(M);mo(T,{className:"size-4"}),r(M),r(Y),r(I),A(($e,ae)=>{O.disabled=$e,M.disabled=ae,Y.dir=Y.dir},[()=>(e(h),c(()=>!e(h).can().undo())),()=>(e(h),c(()=>!e(h).can().redo()))]),ue("click",O,()=>{e(h).chain().focus().undo().run()}),ue("click",M,()=>{e(h).chain().focus().redo().run()}),d(g,I)};we(ft,g=>{e(h)&&g(Et)})}var nt=_(ft,2);{let g=xe(()=>(t(),c(()=>t().t("Chat"))));Fe(nt,{placement:"top",get content(){return e(g)},className:"cursor-pointer",children:(I,Y)=>{var O=Eo(),_e=o(O);wa(_e,{}),r(O),ue("click",O,()=>{e($)&&e(U)==="chat"?l($,!1):(e($)||l($,!0),l(U,"chat"))}),d(I,O)},$$slots:{default:!0}})}var st=_(nt,2);{let g=xe(()=>(t(),c(()=>t().t("Controls"))));Fe(st,{placement:"top",get content(){return e(g)},className:"cursor-pointer",children:(I,Y)=>{var O=Io(),_e=o(O);wo(_e,{}),r(O),ue("click",O,()=>{e($)&&e(U)==="settings"?l($,!1):(e($)||l($,!0),l(U,"settings"))}),d(I,O)},$$slots:{default:!0}})}var Bt=_(st,2);er(Bt,{onDownload:g=>{Rt(g)},onCopyLink:async()=>{const g=window.location.origin;await ta(`${g}/notes/${e(a).id}`)?Ne.success(t().t("Copied link to clipboard")):Ne.error(t().t("Failed to copy link"))},onCopyToClipboard:async()=>{await ta(e(a).data.content.md,e(a).data.content.html,!0).catch(I=>(Ne.error(`${I}`),null))&&Ne.success(t().t("Copied to clipboard"))},onDelete:()=>{l(V,!0)},children:(g,I)=>{var Y=Mo(),O=o(Y);xr(O,{className:"size-5"}),r(Y),d(g,Y)},$$slots:{default:!0}}),r(Nt),r(ze),r(qe);var gt=_(qe,2),It=o(gt),Zt=o(It),Ht=o(Zt),Vt=o(Ht);Qr(Vt,{className:"size-3.5",strokeWidth:"2"});var xa=_(Vt,2);{var ba=g=>{var I=So(),Y=o(I,!0);r(I),A(O=>ie(Y,O),[()=>(Se(ye),e(a),t(),c(()=>ye(e(a).created_at/1e6).format(t().t("[Today at] h:mm A"))))]),d(g,I)},ya=g=>{var I=Le(),Y=ve(I);{var O=M=>{var T=zo(),$e=o(T,!0);r(T),A(ae=>ie($e,ae),[()=>(Se(ye),e(a),t(),c(()=>ye(e(a).created_at/1e6).format(t().t("[Yesterday at] h:mm A"))))]),d(M,T)},_e=M=>{var T=Le(),$e=ve(T);{var ae=Ue=>{var pt=Po(),Dt=o(pt,!0);r(pt),A(Ut=>ie(Dt,Ut),[()=>(Se(ye),e(a),t(),c(()=>ye(e(a).created_at/1e6).format(t().t("[Last] dddd [at] h:mm A"))))]),d(Ue,pt)},Ve=Ue=>{var pt=To(),Dt=o(pt,!0);r(pt),A(Ut=>ie(Dt,Ut),[()=>(Se(ye),e(a),t(),c(()=>ye(e(a).created_at/1e6).format(t().t("DD/MM/YYYY"))))]),d(Ue,pt)};we($e,Ue=>{Se(ye),e(a),c(()=>ye(e(a).created_at/1e6).isSame(ye().subtract(1,"week"),"week"))?Ue(ae):Ue(Ve,!1)},!0)}d(M,T)};we(Y,M=>{Se(ye),e(a),c(()=>ye(e(a).created_at/1e6).isSame(ye().subtract(1,"day"),"day"))?M(O):M(_e,!1)},!0)}d(g,I)};we(xa,g=>{Se(ye),e(a),c(()=>ye(e(a).created_at/1e6).isSame(ye(),"day"))?g(ba):g(ya,!1)})}r(Ht);var Mt=_(Ht,2),Xt=o(Mt);eo(Xt,{className:"size-3.5",strokeWidth:"2"});var Gt=_(Xt,2),ka=o(Gt,!0);r(Gt),r(Mt);var $a=_(Mt,2);{var Ca=g=>{var I=Ao(),Y=o(I),O=o(Y,!0);r(Y);var _e=_(Y,2),M=o(_e,!0);r(_e),r(I),A((T,$e)=>{ie(O,T),ie(M,$e)},[()=>(t(),e(K),c(()=>t().t("{{COUNT}} words",{COUNT:e(K)}))),()=>(t(),e(Z),c(()=>t().t("{{COUNT}} characters",{COUNT:e(Z)})))]),d(g,I)};we($a,g=>{e(h)&&g(Ca)})}r(Zt),r(It),r(gt);var Qt=_(gt,2),Kt=o(Qt);{var Na=g=>{var I=Wo();A(()=>je(I,1,`w-full h-full fixed top-0 left-0 ${e(L)?"":" backdrop-blur-xs  bg-white/10 dark:bg-gray-900/10"} flex items-center justify-center z-10 cursor-not-allowed`)),d(g,I)};we(Kt,g=>{e(ge)&&g(Na)})}var Ea=_(Kt,2);{let g=xe(()=>(e(a),c(()=>`note-${e(a).id}`))),I=xe(()=>(e(a),c(()=>{var M,T;return(T=(M=e(a).data)==null?void 0:M.content)==null?void 0:T.html}))),Y=xe(()=>(e(a),c(()=>`note:${e(a).id}`))),O=xe(()=>(t(),c(()=>t().t("Write something...")))),_e=xe(()=>e(W)===null&&!e(ge));da(mr(Ea,{get id(){return e(g)},className:"input-prose-sm px-0.5",json:!0,get html(){return e(I)},get documentId(){return e(Y)},collaboration:!0,get socket(){return b()},get user(){return de()},dragHandle:!0,link:!0,image:!0,get files(){return e(x)},get placeholder(){return e(O)},get editable(){return e(_e)},onSelectionUpdate:({editor:M})=>{const{from:T,to:$e}=M.state.selection,ae=M.state.doc.textBetween(T,$e," ");ae.length===0?l(ce,null):l(ce,{text:ae,from:T,to:$e})},onChange:M=>{ke(a,e(a).data.content.html=M.html),ke(a,e(a).data.content.md=M.md),e(h)&&(l(K,e(h).storage.characterCount.words()),l(Z,e(h).storage.characterCount.characters()))},fileHandler:!0,onFileDrop:(M,T,$e)=>{T.forEach(async ae=>{const Ve=await Ct(ae).catch(Ue=>null);Ve.type==="image"&&M.chain().insertContentAt($e,{type:"image",attrs:{src:`data://${Ve.id}`}}).focus().run()})},onFilePaste:()=>{},get editor(){return e(h)},set editor(M){l(h,M)},get value(){return e(a).data.content.json},set value(M){ke(a,e(a).data.content.json=M)},$$events:{paste:async M=>{var $e;M=M.detail.event||M;const T=M.clipboardData||window.clipboardData;if(T&&T.items){T.items;for(const ae of T.items)if(ae.type.indexOf("image")!==-1){const Ve=ae.getAsFile(),Ue=await Ct(Ve);e(h)&&(($e=e(h))==null||$e.chain().insertContentAt(e(h).state.selection.$anchor.pos,{type:"image",attrs:{src:`data://${Ue.id}`}}).focus().run())}else if((ae==null?void 0:ae.kind)==="file"){const Ve=ae.getAsFile();await Ct(Ve),M.preventDefault()}}}},$$legacy:!0}),M=>l(tt,M),()=>e(tt))}r(Qt),r(Te),A((g,I)=>{je(Te,1,` w-full flex flex-col ${e(Je)?"opacity-20":""}`),Ke(We,"placeholder",g),We.disabled=(e(a),de(),e(he),c(()=>{var Y,O,_e;return((Y=e(a))==null?void 0:Y.user_id)!==((O=de())==null?void 0:O.id)&&((_e=de())==null?void 0:_e.role)!=="admin"||e(he)})),Mt.disabled=(e(a),de(),c(()=>{var Y,O,_e;return((Y=e(a))==null?void 0:Y.user_id)!==((O=de())==null?void 0:O.id)&&((_e=de())==null?void 0:_e.role)!=="admin"})),ie(ka,I)},[()=>(e(he),t(),c(()=>e(he)?t().t("Generating..."):t().t("Title"))),()=>(e(a),t(),c(()=>{var g;return(g=e(a))!=null&&g.access_control?t().t("Private"):t().t("Everyone")}))]),Da(We,()=>e(a).title,g=>ke(a,e(a).title=g)),ue("focus",We,()=>{l(Oe,!0)}),ue("blur",We,g=>{if(e(le)){l(le,!1);return}l(Oe,!1),at()}),ue("click",Mt,()=>{l(ee,!0)}),ue("wheel",It,g=>{g.deltaY!==0&&(g.preventDefault(),g.currentTarget.scrollLeft+=g.deltaY)}),d(De,Te)};we(G,De=>{e(Je)?De(ne):De(se,!1)})}r(j);var y=_(j,2),He=o(y),ot=o(He);{var bt=De=>{var Te=Oo(),qe=o(Te);gr(qe,{className:"p-1 w-full max-w-full",transcribe:!1,get displayMedia(){return e(P)},echoCancellation:!1,noiseSuppression:!1,onCancel:()=>{l(F,!1),l(P,!1)},onConfirm:ze=>{ze!=null&&ze.file&&xt(ze==null?void 0:ze.file),l(F,!1),l(P,!1)},get recording(){return e(F)},set recording(ze){l(F,ze)},$$legacy:!0}),r(Te),d(De,Te)},Ge=De=>{var Te=Do(),qe=ve(Te);lo(qe,{onRecord:async()=>{l(P,!1);try{let Ae=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(We){return Ne.error(t().t("Permission denied when accessing microphone: {{error}}",{error:We})),null});Ae&&(l(F,!0),Ae.getTracks().forEach(Ze=>Ze.stop())),Ae=null}catch{Ne.error(t().t("Permission denied when accessing microphone"))}},onCaptureAudio:async()=>{l(P,!0),l(F,!0)},onUpload:async()=>{const Ae=document.createElement("input");Ae.type="file",Ae.accept="audio/*",Ae.multiple=!1,Ae.click(),Ae.onchange=async We=>{const Ze=We.target.files;Ze&&Ze.length>0&&await xt(Ze[0])}},children:(Ae,We)=>{{let Ze=xe(()=>(t(),c(()=>t().t("Record"))));Fe(Ae,{get content(){return e(Ze)},placement:"top",children:(yt,Nt)=>{var ft=Bo(),Et=o(ft);pr(Et,{className:"size-4.5"}),r(ft),d(yt,ft)},$$slots:{default:!0}})}},$$slots:{default:!0}});var ze=_(qe,2),Ot=o(ze);{let Ae=xe(()=>(t(),c(()=>t().t("AI"))));Fe(Ot,{get content(){return e(Ae)},placement:"top",children:(We,Ze)=>{var yt=Le(),Nt=ve(yt);{var ft=nt=>{var st=Ro(),Bt=o(st);oa(Bt,{className:"size-5"}),r(st),ue("click",st,()=>{Wt()}),d(nt,st)},Et=nt=>{ho(nt,{onEdit:()=>{At()},onChat:()=>{l($,!0),l(U,"chat")},children:(st,Bt)=>{var gt=Ho(),It=o(gt);co(It,{}),r(gt),d(st,gt)},$$slots:{default:!0}})};we(Nt,nt=>{e(ge)?nt(ft):nt(Et,!1)})}d(We,yt)},$$slots:{default:!0}})}r(ze),d(De,Te)};we(ot,De=>{e(F)?De(bt):De(Ge,!1)})}r(He),r(y),d(N,E)},$$slots:{default:!0}});var X=_(C,2);Xr(X,{get show(){return e($)},set show(N){l($,N)},children:(N,D)=>{var E=Le(),j=ve(E);{var G=se=>{Jr(se,{get editor(){return e(h)},get inputElement(){return e(tt)},get selectedContent(){return e(ce)},get files(){return e(x)},onInsert:Ce,onStop:Wt,onEdited:vt,insertNoteHandler:()=>{$t(e(a))},scrollToBottomHandler:oe,get show(){return e($)},set show(y){l($,y)},get selectedModelId(){return e(m)},set selectedModelId(y){l(m,y)},get messages(){return e(re)},set messages(y){l(re,y)},get note(){return e(a)},set note(y){l(a,y)},get editing(){return e(ge)},set editing(y){l(ge,y)},get streaming(){return e(L)},set streaming(y){l(L,y)},get stopResponseFlag(){return e(Be)},set stopResponseFlag(y){l(Be,y)},$$legacy:!0})},ne=se=>{var y=Le(),He=ve(y);{var ot=bt=>{Nr(bt,{onUpdate:()=>{at()},get show(){return e($)},set show(Ge){l($,Ge)},get selectedModelId(){return e(m)},set selectedModelId(Ge){l(m,Ge)},get files(){return e(x)},set files(Ge){l(x,Ge)},$$legacy:!0})};we(He,bt=>{e(U)==="settings"&&bt(ot)},!0)}d(se,y)};we(j,se=>{e(U)==="chat"?se(G):se(ne,!1)})}d(N,E)},$$slots:{default:!0},$$legacy:!0}),d(n,f)},$$slots:{default:!0}}),d(S,Re),dt(),me()}var Yo=w('<div id="note-container"><!></div>');function Ln(S,s){it(s,!1);const t=()=>Ie(Lt,"$showSidebar",u),p=()=>Ie(Ta,"$page",u),[u,te]=_t();ct();var b=Yo(),B=o(b);Jo(B,{get id(){return p().params.id}}),r(b),A(()=>je(b,1,`w-full h-full ${t()?"md:max-w-[calc(100%-260px)]":""}`)),d(S,b),dt(),te()}export{Ln as component};
//# sourceMappingURL=25.s3T8yQTR.js.map
