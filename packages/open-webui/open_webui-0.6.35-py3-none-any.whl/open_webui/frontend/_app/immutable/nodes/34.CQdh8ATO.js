import"../chunks/CWj6FrbW.js";import"../chunks/CN51-NxK.js";import{g as E,o as k,d as v,e as D,a as x,p as N,b as A,i as d,m as B,j as g}from"../chunks/CvTLsZlf.js";import{k as C}from"../chunks/BOeiEyRi.js";import{i as J}from"../chunks/CNVL70pO.js";import{s as L,a as r}from"../chunks/DzS5ldT-.js";import{t as a}from"../chunks/Cqe-NRGo.js";import{g as O}from"../chunks/BDMvu-7n.js";import{g as P,b as u,c as U,d as j}from"../chunks/D6EOiKH3.js";import{c as F}from"../chunks/DWkj27XG.js";import{g as R}from"../chunks/U3_qXm6Y.js";import{M as W}from"../chunks/Bk_OkSNc.js";function ee(f,w){A(w,!1);const _=()=>r(u,"$models",s),i=()=>r(b,"$i18n",s),$=()=>r(U,"$config",s),h=()=>r(j,"$settings",s),[s,S]=L(),b=E("i18n"),y=async e=>{var t,m,p;if(_().find(l=>l.id===e.id)){a.error(i().t("Error: A model with the ID '{{modelId}}' already exists. Please select a different ID to proceed.",{modelId:e.id}));return}if(e.id===""){a.error(i().t("Error: Model ID cannot be empty. Please enter a valid ID to proceed."));return}e&&await F(localStorage.token,{...e,meta:{...e.meta,profile_image_url:e.meta.profile_image_url??`${P}/static/favicon.png`,suggestion_prompts:e.meta.suggestion_prompts?e.meta.suggestion_prompts.filter(n=>n.content!==""):null},params:{...e.params}}).catch(n=>(a.error(`${n}`),null))&&(await u.set(await R(localStorage.token,((m=(t=$())==null?void 0:t.features)==null?void 0:m.enable_direct_connections)&&(((p=h())==null?void 0:p.directConnections)??null))),a.success(i().t("Model created successfully!")),await O("/workspace/models"))};let o=B(null);k(async()=>{window.addEventListener("message",async e=>{if(["https://openwebui.com","https://www.openwebui.com","http://localhost:5173"].includes(e.origin))try{let t=JSON.parse(e.data);t!=null&&t.info&&(t=t.info),d(o,t)}catch(t){}}),(window.opener??!1)&&window.opener.postMessage("loaded","*"),sessionStorage.model&&(d(o,JSON.parse(sessionStorage.model)),sessionStorage.removeItem("model"))}),J();var c=v(),M=D(c);C(M,()=>g(o),e=>{W(e,{get model(){return g(o)},onSubmit:y})}),x(f,c),N(),S()}export{ee as component};
//# sourceMappingURL=34.CQdh8ATO.js.map
