import"./CWj6FrbW.js";import"./CN51-NxK.js";import{b as Ae,g as Ee,e as ge,j as r,i as O,k as l,c as e,r as t,t as q,w as m,s as I,l as k,a as u,p as Te,f as p,m as xe,u as D,n as De,d as at,A as rt,aX as st}from"./CvTLsZlf.js";import{i as y}from"./B3D73U8p.js";import{e as lt}from"./uF71e8HK.js";import{s as it}from"./D4SMs5q_.js";import{r as ot,a as Ie,s as Xe}from"./CPzR4-ix.js";import{b as nt}from"./BpTtYi1u.js";import{i as $e}from"./CNVL70pO.js";import{p as g}from"./DBxQAEQJ.js";import{a as qe,s as Fe}from"./DzS5ldT-.js";import{t as We}from"./Cqe-NRGo.js";import{d as Ue}from"./BqAeIAOr.js";import{l as dt,f as je,h as vt}from"./D38tgtmh.js";import{d as ct}from"./DQY3XKi0.js";import{M as ft}from"./B1Io5-Zn.js";import{T as Me}from"./k6hQMChD.js";import{C as ut}from"./Ch-EHQFf.js";import{S as Se}from"./DD1zKOTk.js";import{L as mt}from"./D3B17OuU.js";import{X as pt}from"./BFL0NFeS.js";import{C as pe}from"./D-Tr9fFQ.js";import{C as Re}from"./BzIph71e.js";import{b as gt}from"./Cz9Z7v2M.js";import{m as xt}from"./CovhkEoL.js";import{g as _t}from"./D6EOiKH3.js";var ht=p('<div class="self-center pl-1.5 pr-1 translate-y-[0.5px] rounded-l-xl bg-transparent"><button class="p-0.5 rounded-full hover:bg-gray-100 dark:hover:bg-gray-900 transition"><!></button></div>'),bt=p('<span class="font-normal"><!></span>'),wt=p('<span class="invisible"><!></span>'),yt=p('<span class="font-normal"><!></span>'),kt=p('<span class="invisible"><!></span>'),Ct=p('<div class="flex text-xs font-medium mb-1.5"><button class="px-1.5 py-1 cursor-pointer select-none basis-3/5"><div class="flex gap-1.5 items-center"> <!></div></button> <button class="px-1.5 py-1 cursor-pointer select-none hidden sm:flex sm:basis-2/5 justify-end"><div class="flex gap-1.5 items-center"> <!></div></button></div>'),Lt=p('<div class="text-xs text-gray-500 dark:text-gray-400 text-center px-5 min-h-20 w-full h-full flex justify-center items-center"> </div>'),zt=p("<div> </div>"),Ut=p('<button class="self-center w-fit px-1 text-sm rounded-xl"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-4"><path stroke-linecap="round" stroke-linejoin="round" d="M9 8.25H7.5a2.25 2.25 0 0 0-2.25 2.25v9a2.25 2.25 0 0 0 2.25 2.25h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25H15m0-3-3-3m0 0-3 3m3-3V15"></path></svg></button>'),jt=p('<button class="self-center w-fit px-1 text-sm rounded-xl"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"></path></svg></button>'),It=p('<!> <div class=" w-full flex justify-between items-center rounded-lg text-sm py-2 px-3 hover:bg-gray-50 dark:hover:bg-gray-850" draggable="false"><a class=" basis-3/5"><div class="text-ellipsis line-clamp-1 w-full"> </div></a> <div class="basis-2/5 flex items-center justify-end"><div class="hidden sm:flex text-gray-500 dark:text-gray-400 text-xs"> </div> <div class="flex justify-end pl-2.5 text-gray-600 dark:text-gray-300"><!> <!></div></div></div>',1),Nt=p('<div class="w-full flex justify-center py-1 text-xs animate-pulse items-center gap-2"><!> <div class=" "> </div></div>'),Pt=p('<div class="w-full"><!> <div class="text-left text-sm w-full mb-3 max-h-[22rem] overflow-y-scroll"><!> <!> <!></div> <!></div>'),Bt=p('<div class="w-full h-full flex justify-center items-center min-h-20"><!></div>'),Ht=p('<div><div class=" flex justify-between dark:text-gray-300 px-5 pt-4 pb-1"><div class=" text-lg font-medium self-center"> </div> <button class="self-center"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5"><path fill-rule="evenodd" d="M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z" clip-rule="evenodd"></path></svg></button></div> <div class="flex flex-col w-full px-5 pb-4 dark:text-gray-200"><div class=" flex w-full space-x-2 mb-0.5"><div class="flex flex-1"><div class=" self-center ml-1 mr-3"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg></div> <input class=" w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent"/> <!></div></div> <div class=" flex flex-col w-full sm:flex-row sm:justify-center sm:space-x-6"><!></div></div></div>'),Dt=p("<!> <!>",1);function na(_e,i){Ae(i,!1);const s=()=>qe(we,"$i18n",he),[he,be]=Fe();Ue.extend(dt);const we=Ee("i18n");let b=g(i,"show",12,!1),F=g(i,"title",8,"Chats");g(i,"emptyPlaceholder",8,"");let ne=g(i,"shareUrl",8,!1),C=g(i,"query",12,""),E=g(i,"orderBy",12,"updated_at"),N=g(i,"direction",12,"desc"),L=g(i,"chatList",8,null),Q=g(i,"allChatsLoaded",8,!1),ee=g(i,"chatListLoading",8,!1),T=xe(null),de=xe(0),M=xe(!1),ye=g(i,"onUpdate",8,()=>{}),X=g(i,"loadHandler",8,null),ve=g(i,"unarchiveHandler",8,null);const W=h=>{E()===h?N(N()==="asc"?"desc":"asc"):(E(h),N("asc"))},ke=async h=>{await ct(localStorage.token,h).catch(ce=>{We.error(`${ce}`)}),ye()()};$e();var x=Dt(),z=ge(x);ut(z,{get show(){return r(M)},set show(h){O(M,h)},$$events:{confirm:()=>{r(T)&&(ke(r(T)),O(T,null))}},$$legacy:!0});var G=l(z,2);ft(G,{size:"lg",get show(){return b()},set show(h){b(h)},children:(h,ce)=>{var P=Ht(),S=e(P),te=e(S),ae=e(te,!0);t(te);var K=l(te,2);t(S);var $=l(S,2),re=e($),fe=e(re),V=l(e(fe),2);ot(V);var Ge=l(V,2);{var Ke=w=>{var U=ht(),R=e(U),Ce=e(R);pt(Ce,{className:"size-3",strokeWidth:"2"}),t(R),t(U),k("click",R,()=>{C(""),O(de,0)}),u(w,U)};y(Ge,w=>{C()&&w(Ke)})}t(fe),t(re);var Ne=l(re,2),Ve=e(Ne);{var Ye=w=>{var U=Pt(),R=e(U);{var Ce=o=>{var a=Ct(),_=e(a),j=e(_),A=e(j),Y=l(A);{var Z=d=>{var n=bt(),H=e(n);{var v=f=>{pe(f,{className:"size-2"})},c=f=>{Re(f,{className:"size-2"})};y(H,f=>{N()==="asc"?f(v):f(c,!1)})}t(n),u(d,n)},B=d=>{var n=wt(),H=e(n);pe(H,{className:"size-2"}),t(n),u(d,n)};y(Y,d=>{E()==="title"?d(Z):d(B,!1)})}t(j),t(_);var J=l(_,2),ue=e(J),se=e(ue),le=l(se);{var ze=d=>{var n=yt(),H=e(n);{var v=f=>{pe(f,{className:"size-2"})},c=f=>{Re(f,{className:"size-2"})};y(H,f=>{N()==="asc"?f(v):f(c,!1)})}t(n),u(d,n)},me=d=>{var n=kt(),H=e(n);pe(H,{className:"size-2"}),t(n),u(d,n)};y(le,d=>{E()==="updated_at"?d(ze):d(me,!1)})}t(ue),t(J),t(a),q((d,n)=>{I(A,`${d??""} `),I(se,`${n??""} `)},[()=>(s(),m(()=>s().t("Title"))),()=>(s(),m(()=>s().t("Updated at")))]),k("click",_,()=>W("title")),k("click",J,()=>W("updated_at")),u(o,a)};y(R,o=>{D(L()),m(()=>L().length>0)&&o(Ce)})}var Le=l(R,2),Pe=e(Le);{var Je=o=>{var a=Lt(),_=e(a,!0);t(a),q(j=>I(_,j),[()=>(s(),m(()=>s().t("No results found")))]),u(o,a)};y(Pe,o=>{D(L()),m(()=>L().length===0)&&o(Je)})}var Be=l(Pe,2);lt(Be,3,L,o=>o.id,(o,a,_)=>{var j=It(),A=ge(j);{var Y=v=>{var c=zt(),f=e(c,!0);t(c),q(ie=>{Xe(c,1,`w-full text-xs text-gray-500 dark:text-gray-500 font-medium ${r(_)===0?"":"pt-5"} pb-2 px-2`),I(f,ie)},[()=>(s(),r(a),m(()=>s().t(r(a).time_range)))]),u(v,c)};y(A,v=>{D(r(_)),r(a),D(L()),m(()=>{var c;return(r(_)===0||r(_)>0&&r(a).time_range!==L()[r(_)-1].time_range)&&((c=r(a))==null?void 0:c.time_range)})&&v(Y)})}var Z=l(A,2),B=e(Z),J=e(B),ue=e(J,!0);t(J),t(B);var se=l(B,2),le=e(se),ze=e(le,!0);t(le);var me=l(le,2),d=e(me);{var n=v=>{{let c=De(()=>(s(),m(()=>s().t("Unarchive Chat"))));Me(v,{get content(){return r(c)},children:(f,ie)=>{var oe=Ut();k("click",oe,async He=>{He.stopImmediatePropagation(),He.stopPropagation(),ve()(r(a).id)}),u(f,oe)},$$slots:{default:!0}})}};y(d,v=>{ve()&&v(n)})}var H=l(d,2);{let v=De(()=>(s(),m(()=>s().t("Delete Chat"))));Me(H,{get content(){return r(v)},children:(c,f)=>{var ie=jt();k("click",ie,async oe=>{oe.stopImmediatePropagation(),oe.stopPropagation(),O(T,r(a).id),O(M,!0)}),u(c,ie)},$$slots:{default:!0}})}t(me),t(se),t(Z),q(v=>{Ie(B,"href",(D(ne()),r(a),m(()=>ne()?`/s/${r(a).id}`:`/c/${r(a).id}`))),I(ue,(r(a),m(()=>{var c;return(c=r(a))==null?void 0:c.title}))),I(ze,v)},[()=>(D(Ue),r(a),m(()=>{var v;return Ue(((v=r(a))==null?void 0:v.updated_at)*1e3).calendar()}))]),k("click",B,()=>b(!1)),u(o,j)});var Oe=l(Be,2);{var Qe=o=>{mt(o,{$$events:{visible:a=>{ee()||X()()}},children:(a,_)=>{var j=Nt(),A=e(j);Se(A,{className:" size-4"});var Y=l(A,2),Z=e(Y,!0);t(Y),t(j),q(B=>I(Z,B),[()=>(s(),m(()=>s().t("Loading...")))]),u(a,j)},$$slots:{default:!0}})};y(Oe,o=>{!Q()&&X()&&o(Qe)})}t(Le);var et=l(Le,2);{var tt=o=>{var a=at(),_=ge(a);it(_,i,"footer",{},null),u(o,a)};y(et,o=>{C()===""&&o(tt)})}t(U),u(w,U)},Ze=w=>{var U=Bt(),R=e(U);Se(R,{className:"size-5"}),t(U),u(w,U)};y(Ve,w=>{L()?w(Ye):w(Ze,!1)})}t(Ne),t($),t(P),q(w=>{I(ae,F()),Ie(V,"placeholder",w)},[()=>(s(),m(()=>s().t("Search Chats")))]),k("click",K,()=>{b(!1)}),nt(V,C),u(h,P)},$$slots:{default:!0},$$legacy:!0}),u(_e,x),Te(),be()}var Mt=p('<input id="profile-image-input" type="file" hidden="" accept="image/*"/> <div class="flex flex-col self-start group"><div class="self-center flex"><button class="relative rounded-full dark:bg-gray-700" type="button"><img alt="profile"/> <div class="absolute bottom-0 right-0 opacity-0 group-hover:opacity-100 transition"><div class="p-1 rounded-full bg-white text-black border-gray-100 shadow"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="size-3"><path d="m2.695 14.762-1.262 3.155a.5.5 0 0 0 .65.65l3.155-1.262a4 4 0 0 0 1.343-.886L17.5 5.501a2.121 2.121 0 0 0-3-3L3.58 13.419a4 4 0 0 0-.885 1.343Z"></path></svg></div></div></button></div> <div class="flex flex-col w-full justify-center mt-2"><button class=" text-xs text-center text-gray-500 rounded-lg py-0.5 opacity-0 group-hover:opacity-100 transition-all" type="button"> </button> <button class=" text-xs text-center text-gray-800 dark:text-gray-400 rounded-lg py-0.5 opacity-0 group-hover:opacity-100 transition-all" type="button"> </button> <button class=" text-xs text-center text-gray-800 dark:text-gray-400 rounded-lg py-0.5 opacity-0 group-hover:opacity-100 transition-all" type="button"> </button></div></div>',1);function da(_e,i){Ae(i,!1);const s=()=>qe(we,"$i18n",he),[he,be]=Fe(),we=Ee("i18n");let b=g(i,"profileImageUrl",12),F=g(i,"user",8,null),ne=g(i,"imageClassName",8,"size-14 md:size-18"),C=xe();$e();var E=Mt(),N=ge(E);gt(N,x=>O(C,x),()=>r(C));var L=l(N,2),Q=e(L),ee=e(Q),T=e(ee);rt(2),t(ee),t(Q);var de=l(Q,2),M=e(de),ye=e(M,!0);t(M);var X=l(M,2),ve=e(X,!0);t(X);var W=l(X,2),ke=e(W,!0);t(W),t(de),t(L),q((x,z,G,h)=>{Ie(T,"src",x),Xe(T,1,` rounded-full ${ne()??""} object-cover`),I(ye,z),I(ve,G),I(ke,h)},[()=>(D(b()),D(je),D(F()),m(()=>{var x;return b()!==""?b():je((x=F())==null?void 0:x.name)})),()=>(s(),m(()=>s().t("Remove"))),()=>(s(),m(()=>s().t("Initials"))),()=>(s(),m(()=>s().t("Gravatar")))]),k("change",N,x=>{const z=r(C).files??[];let G=new FileReader;G.onload=h=>{let ce=`${h.target.result}`;const P=new Image;P.src=ce,P.onload=function(){const S=document.createElement("canvas"),te=S.getContext("2d"),ae=P.width/P.height;let K,$;ae>1?(K=250*ae,$=250):(K=250,$=250/ae),S.width=250,S.height=250;const re=(250-K)/2,fe=(250-$)/2;te.drawImage(P,re,fe,K,$);const V=S.toDataURL("image/jpeg");b(V),st(C,r(C).files=null)}},z.length>0&&["image/gif","image/webp","image/jpeg","image/png"].includes(z[0].type)&&G.readAsDataURL(z[0])}),k("click",ee,()=>{r(C).click()}),k("click",M,async()=>{b(`${_t}/user.png`)}),k("click",X,async()=>{var x;vt()?b(je((x=F())==null?void 0:x.name)):We.info(s().t("Fingerprint spoofing detected: Unable to use initials as avatar. Defaulting to default profile image."),{duration:1e3*10})}),k("click",W,async()=>{var z;const x=await xt(localStorage.token,(z=F())==null?void 0:z.email);b(x)}),u(_e,E),Te(),be()}export{na as C,da as U};
//# sourceMappingURL=Bg13iYhn.js.map
