import"./CWj6FrbW.js";import"./CN51-NxK.js";import{b as ze,g as Ae,o as Qe,i as f,c as r,r as t,k as m,u as ie,w as i,t as F,s as w,a as c,p as Te,f as g,m as U,j as e,aX as $,n as X,d as Ee,e as Me,A as He,z as Ce,x as Ja,q as Va,v as Xa,l as de,aW as Vt,aY as Za}from"./CvTLsZlf.js";import{i as P}from"./B3D73U8p.js";import{e as we,i as $e}from"./uF71e8HK.js";import{r as Tt,s as Xt,a as ye,d as Ka,e as Ya}from"./CPzR4-ix.js";import{a as Ga,b as Dt}from"./BpTtYi1u.js";import{b as Qa}from"./Cz9Z7v2M.js";import{p as es}from"./Bfc47y5P.js";import{i as De}from"./CNVL70pO.js";import{p as Y}from"./DBxQAEQJ.js";import{a as me,s as Oe}from"./DzS5ldT-.js";import{t as Ot}from"./Cqe-NRGo.js";import{t as Zt,f as Kt,l as ts,b as as,g as Ge,u as ss}from"./D6EOiKH3.js";import{g as rs}from"./QK5aiF9L.js";import{g as ls}from"./CLryTxFy.js";import{g as is}from"./BN8BTzd8.js";import{K as ds,A as os}from"./C02S878P.js";import{T as ns}from"./C9DUhuBA.js";import{C as Re}from"./5Hz4xsjz.js";import{T as Je}from"./k6hQMChD.js";import{m as rt}from"./D38tgtmh.js";import{T as Yt}from"./VKbJuFMC.js";import{A as vs}from"./VImuq4HP.js";import{S as cs}from"./DD1zKOTk.js";import{X as us}from"./BFL0NFeS.js";var ms=g('<div class=" py-0.5 text-sm w-full capitalize font-medium"> </div>'),fs=g('<div class=" flex items-center gap-2 mr-3"><div class="self-center flex items-center"><!></div> <!></div>'),_s=g('<div class=" flex items-center mt-2 flex-wrap"></div>'),ps=g('<div><div class="flex w-full justify-between mb-1"><div class=" self-center text-sm font-semibold"> </div></div> <div class=" text-xs dark:text-gray-500"> </div> <div class="flex flex-col"><!></div></div>');function gs(se,S){ze(S,!1);const u=()=>me(o,"$i18n",d),[d,G]=Oe();let Q=Y(S,"tools",24,()=>[]),_=U({}),B=Y(S,"selectedToolIds",28,()=>[]);const o=Ae("i18n");Qe(()=>{f(_,Q().reduce((T,h)=>(T[h.id]={...h,selected:B().includes(h.id)},T),{}))}),De();var L=ps(),H=r(L),R=r(H),v=r(R,!0);t(R),t(H);var x=m(H,2),D=r(x,!0);t(x);var k=m(x,2),A=r(k);{var j=T=>{var h=_s();we(h,5,()=>(e(_),i(()=>Object.keys(e(_)))),$e,(p,I)=>{var M=fs(),O=r(M),J=r(O);{let C=X(()=>(e(_),e(I),i(()=>e(_)[e(I)].selected?"checked":"unchecked")));Re(J,{get state(){return e(C)},$$events:{change:N=>{$(_,e(_)[e(I)].selected=N.detail==="checked"),B(Object.keys(e(_)).filter(E=>e(_)[E].selected))}}})}t(O);var a=m(O,2);{let C=X(()=>(e(_),e(I),i(()=>{var N,E;return((E=(N=e(_)[e(I)])==null?void 0:N.meta)==null?void 0:E.description)??e(_)[e(I)].id})));Je(a,{get content(){return e(C)},children:(N,E)=>{var re=ms(),ke=r(re,!0);t(re),F(()=>w(ke,(e(_),e(I),i(()=>e(_)[e(I)].name)))),c(N,re)},$$slots:{default:!0}})}t(M),c(p,M)}),t(h),c(T,h)};P(A,T=>{ie(Q()),i(()=>Q().length>0)&&T(j)})}t(k),t(L),F((T,h)=>{w(v,T),w(D,h)},[()=>(u(),i(()=>u().t("Tools"))),()=>(u(),i(()=>u().t('To select toolkits here, add them to the "Tools" workspace first.')))]),c(se,L),Te(),G()}var bs=g('<div class=" flex items-center gap-2 mr-3"><div class="self-center flex items-center"><!></div> <div class=" py-0.5 text-sm w-full capitalize font-medium"><!></div></div>'),xs=g('<div><div class="flex w-full justify-between mb-1"><div class=" self-center text-sm font-semibold"> </div></div> <div class="flex flex-col"><div class=" flex items-center flex-wrap"></div></div></div>');function hs(se,S){ze(S,!1);const u=()=>me(Q,"$i18n",d),[d,G]=Oe(),Q=Ae("i18n");let _=Y(S,"filters",24,()=>[]),B=Y(S,"selectedFilterIds",28,()=>[]),o=U({});Qe(()=>{f(o,_().reduce((v,x)=>(v[x.id]={...x,selected:B().includes(x.id)},v),{}))}),De();var L=Ee(),H=Me(L);{var R=v=>{var x=xs(),D=r(x),k=r(D),A=r(k,!0);t(k),t(D);var j=m(D,2),T=r(j);we(T,5,()=>(e(o),i(()=>Object.keys(e(o)))),$e,(h,p)=>{var I=bs(),M=r(I),O=r(M);{let C=X(()=>(e(o),e(p),i(()=>e(o)[e(p)].is_global||e(o)[e(p)].selected?"checked":"unchecked")));Re(O,{get state(){return e(C)},get disabled(){return e(o),e(p),i(()=>e(o)[e(p)].is_global)},$$events:{change:N=>{e(o)[e(p)].is_global||($(o,e(o)[e(p)].selected=N.detail==="checked"),B(Object.keys(e(o)).filter(E=>e(o)[E].selected)))}}})}t(M);var J=m(M,2),a=r(J);Je(a,{get content(){return e(o),e(p),i(()=>e(o)[e(p)].meta.description)},children:(C,N)=>{He();var E=Ce();F(()=>w(E,(e(o),e(p),i(()=>e(o)[e(p)].name)))),c(C,E)},$$slots:{default:!0}}),t(J),t(I),c(h,I)}),t(T),t(j),t(x),F(h=>w(A,h),[()=>(u(),i(()=>u().t("Filters")))]),c(v,x)};P(H,v=>{ie(_()),i(()=>_().length>0)&&v(R)})}c(se,L),Te(),G()}var ys=g('<div class=" flex items-center gap-2 mr-3"><div class="self-center flex items-center"><!></div> <div class=" py-0.5 text-sm w-full capitalize font-medium"><!></div></div>'),ws=g('<div><div class="flex w-full justify-between mb-1"><div class=" self-center text-sm font-semibold"> </div></div> <div class="flex flex-col"><div class=" flex items-center flex-wrap"></div></div></div>');function $s(se,S){ze(S,!1);const u=()=>me(Q,"$i18n",d),[d,G]=Oe(),Q=Ae("i18n");let _=Y(S,"actions",24,()=>[]),B=Y(S,"selectedActionIds",28,()=>[]),o=U({});Qe(()=>{f(o,_().reduce((v,x)=>(v[x.id]={...x,selected:B().includes(x.id)},v),{}))}),De();var L=Ee(),H=Me(L);{var R=v=>{var x=ws(),D=r(x),k=r(D),A=r(k,!0);t(k),t(D);var j=m(D,2),T=r(j);we(T,5,()=>(e(o),i(()=>Object.keys(e(o)))),$e,(h,p)=>{var I=ys(),M=r(I),O=r(M);{let C=X(()=>(e(o),e(p),i(()=>e(o)[e(p)].is_global||e(o)[e(p)].selected?"checked":"unchecked")));Re(O,{get state(){return e(C)},get disabled(){return e(o),e(p),i(()=>e(o)[e(p)].is_global)},$$events:{change:N=>{e(o)[e(p)].is_global||($(o,e(o)[e(p)].selected=N.detail==="checked"),B(Object.keys(e(o)).filter(E=>e(o)[E].selected)))}}})}t(M);var J=m(M,2),a=r(J);Je(a,{get content(){return e(o),e(p),i(()=>e(o)[e(p)].meta.description)},children:(C,N)=>{He();var E=Ce();F(()=>w(E,(e(o),e(p),i(()=>e(o)[e(p)].name)))),c(C,E)},$$slots:{default:!0}}),t(J),t(I),c(h,I)}),t(T),t(j),t(x),F(h=>w(A,h),[()=>(u(),i(()=>u().t("Actions")))]),c(v,x)};P(H,v=>{ie(_()),i(()=>_().length>0)&&v(R)})}c(se,L),Te(),G()}var ks=g('<div class=" flex items-center gap-2 mr-3"><!> <div class=" py-0.5 text-sm capitalize"><!></div></div>'),Is=g('<div><div class="flex w-full justify-between mb-1"><div class=" self-center text-sm font-semibold"> </div></div> <div class="flex items-center mt-2 flex-wrap"></div></div>');function Fs(se,S){ze(S,!1);const u=()=>me(Q,"$i18n",d),[d,G]=Oe(),Q=Ae("i18n"),_={vision:{label:u().t("Vision"),description:u().t("Model accepts image inputs")},file_upload:{label:u().t("File Upload"),description:u().t("Model accepts file inputs")},web_search:{label:u().t("Web Search"),description:u().t("Model can search the web for information")},image_generation:{label:u().t("Image Generation"),description:u().t("Model can generate images based on text prompts")},code_interpreter:{label:u().t("Code Interpreter"),description:u().t("Model can execute code and perform calculations")},usage:{label:u().t("Usage"),description:u().t("Sends `stream_options: { include_usage: true }` in the request.\nSupported providers will return token usage information in the response when set.")},citations:{label:u().t("Citations"),description:u().t("Displays citations in the response")},status_updates:{label:u().t("Status Updates"),description:u().t("Displays status updates (e.g., web search progress) in the response")}};let B=Y(S,"capabilities",28,()=>({}));De();var o=Is(),L=r(o),H=r(L),R=r(H,!0);t(H),t(L);var v=m(L,2);we(v,5,()=>i(()=>Object.keys(_)),$e,(x,D)=>{var k=ks(),A=r(k);{let h=X(()=>(ie(B()),e(D),i(()=>B()[e(D)]?"checked":"unchecked")));Re(A,{get state(){return e(h)},$$events:{change:p=>{B(B()[e(D)]=p.detail==="checked",!0)}}})}var j=m(A,2),T=r(j);{let h=X(()=>(ie(rt),e(D),i(()=>rt.parse(_[e(D)].description))));Je(T,{get content(){return e(h)},children:(p,I)=>{He();var M=Ce();F(O=>w(M,O),[()=>(u(),e(D),i(()=>u().t(_[e(D)].label)))]),c(p,M)},$$slots:{default:!0}})}t(j),t(k),c(x,k)}),t(v),t(o),F(x=>w(R,x),[()=>(u(),i(()=>u().t("Capabilities")))]),c(se,o),Te(),G()}var js=g('<div class=" flex items-center gap-2 mr-3"><div class="self-center flex items-center"><!></div> <div class=" py-0.5 text-sm w-full capitalize font-medium"><!></div></div>'),Ss=g('<div class=" flex items-center flex-wrap"></div>'),Ms=g('<div><div class="flex w-full justify-between mb-1"><div class=" self-center text-sm font-semibold"> </div></div> <div class="flex flex-col"><!></div></div>');function Cs(se,S){ze(S,!1);const u=()=>me(Q,"$i18n",d),[d,G]=Oe(),Q=Ae("i18n");let _=Y(S,"filters",24,()=>[]),B=Y(S,"selectedFilterIds",28,()=>[]),o=U({});Qe(()=>{f(o,_().reduce((A,j)=>(A[j.id]={...j,selected:B().includes(j.id)},A),{}))}),De();var L=Ms(),H=r(L),R=r(H),v=r(R,!0);t(R),t(H);var x=m(H,2),D=r(x);{var k=A=>{var j=Ss();we(j,5,()=>(e(o),i(()=>Object.keys(e(o)))),$e,(T,h)=>{var p=js(),I=r(p),M=r(I);{let a=X(()=>(e(o),e(h),i(()=>e(o)[e(h)].selected?"checked":"unchecked")));Re(M,{get state(){return e(a)},$$events:{change:C=>{$(o,e(o)[e(h)].selected=C.detail==="checked"),B(Object.keys(e(o)).filter(N=>e(o)[N].selected))}}})}t(I);var O=m(I,2),J=r(O);Je(J,{get content(){return e(o),e(h),i(()=>e(o)[e(h)].meta.description)},children:(a,C)=>{He();var N=Ce();F(()=>w(N,(e(o),e(h),i(()=>e(o)[e(h)].name)))),c(a,N)},$$slots:{default:!0}}),t(O),t(p),c(T,p)}),t(j),c(A,j)};P(D,A=>{ie(_()),i(()=>_().length>0)&&A(k)})}t(x),t(L),F(A=>w(v,A),[()=>(u(),i(()=>u().t("Default Filters")))]),c(se,L),Te(),G()}var zs=g('<div class=" flex items-center gap-2 mr-3"><!> <div class=" py-0.5 text-sm capitalize"><!></div></div>'),As=g('<div><div class="flex w-full justify-between mb-1"><div class=" self-center text-sm font-semibold"> </div></div> <div class="flex items-center mt-2 flex-wrap"></div></div>');function Ts(se,S){ze(S,!1);const u=()=>me(Q,"$i18n",d),[d,G]=Oe(),Q=Ae("i18n"),_={web_search:{label:u().t("Web Search"),description:u().t("Model can search the web for information")},image_generation:{label:u().t("Image Generation"),description:u().t("Model can generate images based on text prompts")},code_interpreter:{label:u().t("Code Interpreter"),description:u().t("Model can execute code and perform calculations")}};let B=Y(S,"availableFeatures",24,()=>["web_search","image_generation","code_interpreter"]),o=Y(S,"featureIds",28,()=>[]);De();var L=As(),H=r(L),R=r(H),v=r(R,!0);t(R),t(H);var x=m(H,2);we(x,5,B,$e,(D,k)=>{var A=zs(),j=r(A);{let p=X(()=>(ie(o()),e(k),i(()=>o().includes(e(k))?"checked":"unchecked")));Re(j,{get state(){return e(p)},$$events:{change:I=>{I.detail==="checked"?o([...o(),e(k)]):o(o().filter(M=>M!==e(k)))}}})}var T=m(j,2),h=r(T);{let p=X(()=>(ie(rt),e(k),i(()=>rt.parse(_[e(k)].description))));Je(h,{get content(){return e(p)},children:(I,M)=>{He();var O=Ce();F(J=>w(O,J),[()=>(u(),e(k),i(()=>u().t(_[e(k)].label)))]),c(I,O)},$$slots:{default:!0}})}t(T),t(A),c(D,A)}),t(x),t(L),F(D=>w(v,D),[()=>(u(),i(()=>u().t("Default Features")))]),c(se,L),Te(),G()}var Ds=g('<button class="flex space-x-1"><div class=" self-center"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="h-4 w-4"><path fill-rule="evenodd" d="M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z" clip-rule="evenodd"></path></svg></div> <div class=" self-center text-sm font-medium"> </div></button>'),Os=g('<img alt="model profile" class="rounded-xl size-72 md:size-60 object-cover shrink-0"/>'),Ps=g('<img alt="model profile" class=" rounded-xl size-72 md:size-60 object-cover shrink-0"/>'),Bs=g('<option class=" text-gray-900"> </option>'),Ns=g('<div class="my-1"><div class=" text-sm font-semibold mb-1"> </div> <div><select class="text-sm w-full bg-transparent outline-hidden" required><option class=" text-gray-900"> </option><!></select></div></div>'),Us=g('<span class="ml-2 self-center"> </span>'),Ls=g('<span class="ml-2 self-center"> </span>'),qs=g('<span class="ml-2 self-center"> </span>'),Ws=g('<span class="ml-2 self-center"> </span>'),Es=g('<div class="my-2"><!></div>'),Hs=g('<span class="ml-2 self-center"> </span>'),Rs=g('<span class="ml-2 self-center"> </span>'),Js=g('<button class="p-1 px-2 text-xs flex rounded-sm transition" type="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path d="M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"></path></svg></button>'),Vs=g('<div class=" flex rounded-lg"><input class=" text-sm w-full bg-transparent outline-hidden border-r border-gray-100 dark:border-gray-850"/> <button class="px-2" type="button"><!></button></div>'),Xs=g('<div class="text-xs text-center"> </div>'),Zs=g('<div class="flex flex-col space-y-1 mt-1 mb-3"><!></div>'),Ks=g('<div class="my-2"><!></div>'),Ys=g('<div class="my-2"><!></div>'),Gs=g('<span class="ml-2 self-center"> </span>'),Qs=g('<span class="ml-2 self-center"> </span>'),er=g('<div><textarea class="text-sm w-full bg-transparent outline-hidden resize-none" rows="10" disabled readonly=""></textarea></div>'),tr=g('<div class="ml-1.5 self-center"><!></div>'),ar=g('<form class="flex flex-col md:flex-row w-full gap-3 md:gap-6"><div class="self-center md:self-start flex justify-center my-2 shrink-0"><div class="self-center"><button type="button"><!> <div class="absolute bottom-0 right-0 z-10"><div class="m-1.5"><div class="shadow-xl p-1 rounded-full border-2 border-white bg-gray-800 text-white group-hover:bg-gray-600 transition dark:border-black dark:bg-white dark:group-hover:bg-gray-200 dark:text-black"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-5"><path fill-rule="evenodd" d="M2 4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V4Zm10.5 5.707a.5.5 0 0 0-.146-.353l-1-1a.5.5 0 0 0-.708 0L9.354 9.646a.5.5 0 0 1-.708 0L6.354 7.354a.5.5 0 0 0-.708 0l-2 2a.5.5 0 0 0-.146.353V12a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V9.707ZM12 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0Z" clip-rule="evenodd"></path></svg></div></div></div> <div class="absolute top-0 bottom-0 left-0 right-0 bg-white dark:bg-black rounded-lg opacity-0 group-hover:opacity-20 transition"></div></button> <div class="flex w-full mt-1 justify-end"><button class="px-2 py-1 text-gray-500 rounded-lg text-xs" type="button"> </button></div></div></div> <div class="w-full"><div class="mt-2 my-2 flex flex-col"><div class="flex-1"><div><input class="text-3xl font-semibold w-full bg-transparent outline-hidden" required/></div></div> <div class="flex-1"><div><input class="text-xs w-full bg-transparent text-gray-500 outline-hidden" required/></div></div></div> <!> <div class="my-1"><div class="mb-1 flex w-full justify-between items-center"><div class=" self-center text-sm font-semibold"> </div> <button class="p-1 text-xs flex rounded-sm transition" type="button"><!></button></div> <!></div> <div class=" mt-2 my-1"><div><!></div></div> <div class="my-2"><div class="px-4 py-3 bg-gray-50 dark:bg-gray-950 rounded-3xl"><!></div></div> <hr class=" border-gray-100 dark:border-gray-850 my-1.5"/> <div class="my-2"><div class="flex w-full justify-between"><div class=" self-center text-sm font-semibold"> </div></div> <div class="mt-2"><div class="my-1"><div class=" text-xs font-semibold mb-2"> </div> <div><!></div></div> <div class="flex w-full justify-between"><div class=" self-center text-xs font-semibold"> </div> <button class="p-1 px-3 text-xs flex rounded-sm transition" type="button"><!></button></div> <!></div></div> <hr class=" border-gray-100 dark:border-gray-850 my-1"/> <div class="my-2"><div class="flex w-full justify-between items-center"><div class="flex w-full justify-between items-center"><div class=" self-center text-sm font-semibold"> </div> <button class="p-1 text-xs flex rounded-sm transition" type="button"><!></button></div> <!></div> <!></div> <hr class=" border-gray-100 dark:border-gray-850 my-1.5"/> <div class="my-2"><!></div> <div class="my-2"><!></div> <div class="my-2"><!></div> <!> <div class="my-2"><!></div> <div class="my-2"><!></div> <!> <div class="my-2 text-gray-300 dark:text-gray-700"><div class="flex w-full justify-between mb-2"><div class=" self-center text-sm font-semibold"> </div> <button class="p-1 px-3 text-xs flex rounded-sm transition" type="button"><!></button></div> <!></div> <div class="my-2 flex justify-end pb-20"><button type="submit"><div class=" self-center font-medium"><!></div> <!></button></div></div></form>'),sr=g('<!> <div class="w-full max-h-full flex justify-center"><input type="file" hidden="" accept="image/*"/> <!></div>',1);function Cr(se,S){ze(S,!1);const u=()=>me(as,"$models",B),d=()=>me(L,"$i18n",B),G=()=>me(ss,"$user",B),Q=()=>me(Zt,"$tools",B),_=()=>me(Kt,"$functions",B),[B,o]=Oe(),L=Ae("i18n");let H=Y(S,"onSubmit",8),R=Y(S,"onBack",8,null),v=Y(S,"model",12,null),x=Y(S,"edit",8,!1),D=Y(S,"preset",8,!0),k=U(!1),A=U(),j=U(),T=U(!1),h=U(!1),p=U(!1),I=U(""),M=U(""),O=U(!0),J=U(""),a=U({id:"",base_model_id:null,name:"",meta:{profile_image_url:`${Ge}/static/favicon.png`,description:"",suggestion_prompts:null,tags:[]},params:{system:""}}),C=U({system:""}),N=U([]),E=U([]),re=U([]),ke=U([]),ee=U({vision:!0,file_upload:!0,web_search:!0,image_generation:!0,code_interpreter:!0,citations:!0,status_updates:!0,usage:void 0}),Ve=U([]),Xe=U([]),Pe=U({});const Gt=Z=>{var be,Ie;const oe=u().find(Fe=>Fe.id===Z);oe&&(oe.owned_by==="openai"?$(ee,e(ee).usage=((Ie=(be=oe==null?void 0:oe.meta)==null?void 0:be.capabilities)==null?void 0:Ie.usage)??!1):delete e(ee).usage,f(ee,e(ee)))},Qt=async()=>{if(f(k,!0),$(a,e(a).id=e(I)),$(a,e(a).name=e(M)),e(I)===""){Ot.error(d().t("Model ID is required.")),f(k,!1);return}if(e(M)===""){Ot.error(d().t("Model Name is required.")),f(k,!1);return}if(e(N).some(Z=>Z.status==="uploading")){Ot.error(d().t("Please wait until all files are uploaded.")),f(k,!1);return}$(a,e(a).params={...e(a).params,...e(C)}),$(a,e(a).access_control=e(Pe)),$(a,e(a).meta.capabilities=e(ee)),e(O)?$(a,e(a).meta.description=e(a).meta.description.trim()===""?null:e(a).meta.description):$(a,e(a).meta.description=null),e(N).length>0?$(a,e(a).meta.knowledge=e(N)):e(a).meta.knowledge&&delete e(a).meta.knowledge,e(E).length>0?$(a,e(a).meta.toolIds=e(E)):e(a).meta.toolIds&&delete e(a).meta.toolIds,e(re).length>0?$(a,e(a).meta.filterIds=e(re)):e(a).meta.filterIds&&delete e(a).meta.filterIds,e(ke).length>0?$(a,e(a).meta.defaultFilterIds=e(ke)):e(a).meta.defaultFilterIds&&delete e(a).meta.defaultFilterIds,e(Xe).length>0?$(a,e(a).meta.actionIds=e(Xe)):e(a).meta.actionIds&&delete e(a).meta.actionIds,e(Ve).length>0?$(a,e(a).meta.defaultFeatureIds=e(Ve)):e(a).meta.defaultFeatureIds&&delete e(a).meta.defaultFeatureIds,$(a,e(a).params.system=e(J).trim()===""?null:e(J)),$(a,e(a).params.stop=e(C).stop?e(C).stop.split(",").filter(Z=>Z.trim()):null),Object.keys(e(a).params).forEach(Z=>{(e(a).params[Z]===""||e(a).params[Z]===null)&&delete e(a).params[Z]}),await H()(e(a)),f(k,!1)};Qe(async()=>{var oe,be,Ie,Fe,je,et,tt,V,ae,ne,le,te,Be,xe,pe,fe,he,Ne,Se,Ue,Le,Ze;await Zt.set(await rs(localStorage.token)),await Kt.set(await ls(localStorage.token)),await ts.set([...await is(localStorage.token)]);const Z=document.getElementById("workspace-container");if(Z&&(Z.scrollTop=0),v()){if(f(M,v().name),await Ja(),f(I,v().id),f(O,((be=(oe=v())==null?void 0:oe.meta)==null?void 0:be.description)!==null),v().base_model_id){const W=u().filter(ve=>!(ve!=null&&ve.preset)&&!((ve==null?void 0:ve.arena)??!1)).find(ve=>[v().base_model_id,`${v().base_model_id}:latest`].includes(ve.id));v(W?v().base_model_id=W.id:v().base_model_id=null,!0)}f(J,((Fe=(Ie=v())==null?void 0:Ie.params)==null?void 0:Fe.system)??""),f(C,{...e(C),...(je=v())==null?void 0:je.params}),$(C,e(C).stop=(et=e(C))!=null&&et.stop?(typeof e(C).stop=="string"?e(C).stop.split(","):((tt=e(C))==null?void 0:tt.stop)??[]).join(","):null),f(N,(((ae=(V=v())==null?void 0:V.meta)==null?void 0:ae.knowledge)??[]).map(W=>W!=null&&W.collection_name&&(W==null?void 0:W.type)!=="file"?{id:W.collection_name,name:W.name,legacy:!0}:W!=null&&W.collection_names?{name:W.name,type:"collection",collection_names:W.collection_names,legacy:!0}:W)),f(E,((le=(ne=v())==null?void 0:ne.meta)==null?void 0:le.toolIds)??[]),f(re,((Be=(te=v())==null?void 0:te.meta)==null?void 0:Be.filterIds)??[]),f(ke,((pe=(xe=v())==null?void 0:xe.meta)==null?void 0:pe.defaultFilterIds)??[]),f(Xe,((he=(fe=v())==null?void 0:fe.meta)==null?void 0:he.actionIds)??[]),f(ee,{...e(ee),...((Se=(Ne=v())==null?void 0:Ne.meta)==null?void 0:Se.capabilities)??{}}),f(Ve,((Le=(Ue=v())==null?void 0:Ue.meta)==null?void 0:Le.defaultFeatureIds)??[]),"access_control"in v()?f(Pe,v().access_control):f(Pe,{}),(Ze=v())==null||Ze.access_control,e(Pe),f(a,{...e(a),...JSON.parse(JSON.stringify(v()?v():{id:v().id,name:v().name}))}),v()}f(p,!0)}),Va(()=>(ie(x()),e(M)),()=>{x()||e(M)&&f(I,e(M).replace(/\s+/g,"-").replace(/[^a-zA-Z0-9-]/g,"").toLowerCase())}),Xa(),De();var Pt=Ee(),ea=Me(Pt);{var ta=Z=>{var oe=sr(),be=Me(oe);{var Ie=V=>{var ae=Ds(),ne=m(r(ae),2),le=r(ne,!0);t(ne),t(ae),F(te=>w(le,te),[()=>(d(),i(()=>d().t("Back")))]),de("click",ae,()=>{R()()}),c(V,ae)};P(be,V=>{R()&&V(Ie)})}var Fe=m(be,2),je=r(Fe);Qa(je,V=>f(A,V),()=>e(A));var et=m(je,2);{var tt=V=>{var ae=ar(),ne=r(ae),le=r(ne),te=r(le),Be=r(te);{var xe=l=>{var s=Os();F(()=>ye(s,"src",(e(a),i(()=>e(a).meta.profile_image_url)))),c(l,s)},pe=l=>{var s=Ps();F(()=>ye(s,"src",`${Ge}/static/favicon.png`)),c(l,s)};P(Be,l=>{e(a),i(()=>e(a).meta.profile_image_url)?l(xe):l(pe,!1)})}He(4),t(te);var fe=m(te,2),he=r(fe),Ne=r(he,!0);t(he),t(fe),t(le),t(ne);var Se=m(ne,2),Ue=r(Se),Le=r(Ue),Ze=r(Le),W=r(Ze);Tt(W),t(Ze),t(Le);var ve=m(Le,2),Bt=r(ve),at=r(Bt);Tt(at),t(Bt),t(ve),t(Ue);var Nt=m(Ue,2);{var aa=l=>{var s=Ns(),n=r(s),b=r(n,!0);t(n);var K=m(n,2),y=r(K);F(()=>{e(a),Vt(()=>{d(),u(),v()})});var z=r(y),ce=r(z,!0);t(z),z.value=(z.__value=null)??"";var ue=m(z);we(ue,1,()=>(u(),ie(v()),i(()=>u().filter(q=>(v()?q.id!==v().id:!0)&&!(q!=null&&q.preset)&&(q==null?void 0:q.owned_by)!=="arena"&&!((q==null?void 0:q.direct)??!1)))),$e,(q,_e,qe,Ye)=>{var ge=Bs(),At=r(ge,!0);t(ge);var We={};F(()=>{w(At,(e(_e),i(()=>e(_e).name))),We!==(We=(e(_e),i(()=>e(_e).id)))&&(ge.value=(ge.__value=(e(_e),i(()=>e(_e).id)))??"")}),c(q,ge)}),t(y),t(K),t(s),F((q,_e,qe)=>{w(b,q),ye(y,"placeholder",_e),w(ce,qe)},[()=>(d(),i(()=>d().t("Base Model (From)"))),()=>(d(),i(()=>d().t("Select a base model (e.g. llama3, gpt-4o)"))),()=>(d(),i(()=>d().t("Select a base model")))]),Ka(y,()=>e(a).base_model_id,q=>$(a,e(a).base_model_id=q)),de("change",y,q=>{Gt(q.target.value)}),c(l,s)};P(Nt,l=>{D()&&l(aa)})}var lt=m(Nt,2),it=r(lt),dt=r(it),sa=r(dt,!0);t(dt);var Ke=m(dt,2),ra=r(Ke);{var la=l=>{var s=Us(),n=r(s,!0);t(s),F(b=>w(n,b),[()=>(d(),i(()=>d().t("Default")))]),c(l,s)},ia=l=>{var s=Ls(),n=r(s,!0);t(s),F(b=>w(n,b),[()=>(d(),i(()=>d().t("Custom")))]),c(l,s)};P(ra,l=>{e(O)?l(ia,!1):l(la)})}t(Ke),t(it);var da=m(it,2);{var oa=l=>{{let s=X(()=>(d(),i(()=>d().t("Add a short description about what this model does"))));Yt(l,{className:" text-sm w-full bg-transparent outline-hidden resize-none overflow-y-hidden ",get placeholder(){return e(s)},get value(){return e(a).meta.description},set value(n){$(a,e(a).meta.description=n)},$$legacy:!0})}};P(da,l=>{e(O)&&l(oa)})}t(lt);var ot=m(lt,2),Ut=r(ot),na=r(Ut);{let l=X(()=>(e(a),i(()=>{var s,n;return((n=(s=e(a))==null?void 0:s.meta)==null?void 0:n.tags)??[]})));ns(na,{get tags(){return e(l)},$$events:{delete:s=>{const n=s.detail;$(a,e(a).meta.tags=e(a).meta.tags.filter(b=>b.name!==n))},add:s=>{var b,K;const n=s.detail;((K=(b=e(a))==null?void 0:b.meta)==null?void 0:K.tags)??null?$(a,e(a).meta.tags=[...e(a).meta.tags,{name:n}]):$(a,e(a).meta.tags=[{name:n}])}}})}t(Ut),t(ot);var nt=m(ot,2),Lt=r(nt),va=r(Lt);{let l=X(()=>(G(),i(()=>{var s,n,b,K;return((b=(n=(s=G())==null?void 0:s.permissions)==null?void 0:n.sharing)==null?void 0:b.public_models)||((K=G())==null?void 0:K.role)==="admin"})));vs(va,{accessRoles:["read","write"],get allowPublic(){return e(l)},get accessControl(){return e(Pe)},set accessControl(s){f(Pe,s)},$$legacy:!0})}t(Lt),t(nt);var vt=m(nt,4),ct=r(vt),qt=r(ct),ca=r(qt,!0);t(qt),t(ct);var Wt=m(ct,2),ut=r(Wt),mt=r(ut),ua=r(mt,!0);t(mt);var Et=m(mt,2),ma=r(Et);{let l=X(()=>(d(),i(()=>d().t(`Write your model system prompt content here
e.g.) You are Mario from Super Mario Bros, acting as an assistant.`))));Yt(ma,{className:" text-sm w-full bg-transparent outline-hidden resize-none overflow-y-hidden ",get placeholder(){return e(l)},rows:4,get value(){return e(J)},set value(s){f(J,s)},$$legacy:!0})}t(Et),t(ut);var ft=m(ut,2),_t=r(ft),fa=r(_t,!0);t(_t);var pt=m(_t,2),_a=r(pt);{var pa=l=>{var s=qs(),n=r(s,!0);t(s),F(b=>w(n,b),[()=>(d(),i(()=>d().t("Hide")))]),c(l,s)},ga=l=>{var s=Ws(),n=r(s,!0);t(s),F(b=>w(n,b),[()=>(d(),i(()=>d().t("Show")))]),c(l,s)};P(_a,l=>{e(T)?l(pa):l(ga,!1)})}t(pt),t(ft);var ba=m(ft,2);{var xa=l=>{var s=Es(),n=r(s);os(n,{admin:!0,custom:!0,get params(){return e(C)},set params(b){f(C,b)},$$legacy:!0}),t(s),c(l,s)};P(ba,l=>{e(T)&&l(xa)})}t(Wt),t(vt);var gt=m(vt,4),bt=r(gt),xt=r(bt),ht=r(xt),ha=r(ht,!0);t(ht);var yt=m(ht,2),ya=r(yt);{var wa=l=>{var s=Hs(),n=r(s,!0);t(s),F(b=>w(n,b),[()=>(d(),i(()=>d().t("Default")))]),c(l,s)},$a=l=>{var s=Rs(),n=r(s,!0);t(s),F(b=>w(n,b),[()=>(d(),i(()=>d().t("Custom")))]),c(l,s)};P(ya,l=>{e(a),i(()=>{var s,n;return(((n=(s=e(a))==null?void 0:s.meta)==null?void 0:n.suggestion_prompts)??null)===null})?l(wa):l($a,!1)})}t(yt),t(xt);var ka=m(xt,2);{var Ia=l=>{var s=Js();de("click",s,()=>{(e(a).meta.suggestion_prompts.length===0||e(a).meta.suggestion_prompts.at(-1).content!=="")&&$(a,e(a).meta.suggestion_prompts=[...e(a).meta.suggestion_prompts,{content:""}])}),c(l,s)};P(ka,l=>{e(a),i(()=>{var s,n;return(((n=(s=e(a))==null?void 0:s.meta)==null?void 0:n.suggestion_prompts)??null)!==null})&&l(Ia)})}t(bt);var Fa=m(bt,2);{var ja=l=>{var s=Zs(),n=r(s);{var b=y=>{var z=Ee(),ce=Me(z);we(ce,1,()=>(e(a),i(()=>e(a).meta.suggestion_prompts)),$e,(ue,q,_e)=>{var qe=Vs(),Ye=r(qe);Tt(Ye);var ge=m(Ye,2),At=r(ge);us(At,{className:"size-4"}),t(ge),t(qe),F(We=>ye(Ye,"placeholder",We),[()=>(d(),i(()=>d().t("Write a prompt suggestion (e.g. Who are you?)")))]),Dt(Ye,()=>e(q).content,We=>(e(q).content=We,Vt(()=>e(a)))),de("click",ge,()=>{e(a).meta.suggestion_prompts.splice(_e,1),$(a,e(a).meta.suggestion_prompts=e(a).meta.suggestion_prompts)}),c(ue,qe)}),c(y,z)},K=y=>{var z=Xs(),ce=r(z,!0);t(z),F(ue=>w(ce,ue),[()=>(d(),i(()=>d().t("No suggestion prompts")))]),c(y,z)};P(n,y=>{e(a),i(()=>e(a).meta.suggestion_prompts.length>0)?y(b):y(K,!1)})}t(s),c(l,s)};P(Fa,l=>{e(a),i(()=>{var s,n;return(n=(s=e(a))==null?void 0:s.meta)==null?void 0:n.suggestion_prompts})&&l(ja)})}t(gt);var wt=m(gt,4),Sa=r(wt);ds(Sa,{get selectedItems(){return e(N)},set selectedItems(l){f(N,l)},$$legacy:!0}),t(wt);var $t=m(wt,2),Ma=r($t);gs(Ma,{get tools(){return Q()},get selectedToolIds(){return e(E)},set selectedToolIds(l){f(E,l)},$$legacy:!0}),t($t);var kt=m($t,2),Ca=r(kt);{let l=X(()=>(_(),i(()=>_().filter(s=>s.type==="filter"))));hs(Ca,{get filters(){return e(l)},get selectedFilterIds(){return e(re)},set selectedFilterIds(s){f(re,s)},$$legacy:!0})}t(kt);var Ht=m(kt,2);{var za=l=>{const s=X(()=>(_(),e(re),i(()=>_().filter(y=>{var z;return y.type==="filter"&&(e(re).includes(y.id)||(y==null?void 0:y.is_global))&&((z=y==null?void 0:y.meta)==null?void 0:z.toggle)}))));var n=Ee(),b=Me(n);{var K=y=>{var z=Ks(),ce=r(z);Cs(ce,{get filters(){return e(s)},get selectedFilterIds(){return e(ke)},set selectedFilterIds(ue){f(ke,ue)},$$legacy:!0}),t(z),c(y,z)};P(b,y=>{ie(e(s)),i(()=>e(s).length>0)&&y(K)})}c(l,n)};P(Ht,l=>{e(re),i(()=>e(re).length>0)&&l(za)})}var It=m(Ht,2),Aa=r(It);{let l=X(()=>(_(),i(()=>_().filter(s=>s.type==="action"))));$s(Aa,{get actions(){return e(l)},get selectedActionIds(){return e(Xe)},set selectedActionIds(s){f(Xe,s)},$$legacy:!0})}t(It);var Ft=m(It,2),Ta=r(Ft);Fs(Ta,{get capabilities(){return e(ee)},set capabilities(l){f(ee,l)},$$legacy:!0}),t(Ft);var Rt=m(Ft,2);{var Da=l=>{const s=X(()=>(e(ee),i(()=>Object.entries(e(ee)).filter(([y,z])=>z&&["web_search","code_interpreter","image_generation"].includes(y)).map(([y,z])=>y))));var n=Ee(),b=Me(n);{var K=y=>{var z=Ys(),ce=r(z);Ts(ce,{get availableFeatures(){return e(s)},get featureIds(){return e(Ve)},set featureIds(ue){f(Ve,ue)},$$legacy:!0}),t(z),c(y,z)};P(b,y=>{ie(e(s)),i(()=>e(s).length>0)&&y(K)})}c(l,n)};P(Rt,l=>{e(ee),i(()=>Object.keys(e(ee)).filter(s=>e(ee)[s]).length>0)&&l(Da)})}var jt=m(Rt,2),St=r(jt),Mt=r(St),Oa=r(Mt,!0);t(Mt);var Ct=m(Mt,2),Pa=r(Ct);{var Ba=l=>{var s=Gs(),n=r(s,!0);t(s),F(b=>w(n,b),[()=>(d(),i(()=>d().t("Hide")))]),c(l,s)},Na=l=>{var s=Qs(),n=r(s,!0);t(s),F(b=>w(n,b),[()=>(d(),i(()=>d().t("Show")))]),c(l,s)};P(Pa,l=>{e(h)?l(Ba):l(Na,!1)})}t(Ct),t(St);var Ua=m(St,2);{var La=l=>{var s=er(),n=r(s);Za(n),t(s),F(b=>Ya(n,b),[()=>(e(a),i(()=>JSON.stringify(e(a),null,2)))]),c(l,s)};P(Ua,l=>{e(h)&&l(La)})}t(jt);var Jt=m(jt,2),st=r(Jt),zt=r(st),qa=r(zt);{var Wa=l=>{var s=Ce();F(n=>w(s,n),[()=>(d(),i(()=>d().t("Save & Update")))]),c(l,s)},Ea=l=>{var s=Ce();F(n=>w(s,n),[()=>(d(),i(()=>d().t("Save & Create")))]),c(l,s)};P(qa,l=>{x()?l(Wa):l(Ea,!1)})}t(zt);var Ha=m(zt,2);{var Ra=l=>{var s=tr(),n=r(s);cs(n,{}),t(s),c(l,s)};P(Ha,l=>{e(k)&&l(Ra)})}t(st),t(Jt),t(Se),t(ae),F((l,s,n,b,K,y,z,ce,ue,q)=>{Xt(te,1,`rounded-xl flex shrink-0 items-center ${e(a),ie(Ge),i(()=>e(a).meta.profile_image_url!==`${Ge}/static/favicon.png`?"bg-transparent":"bg-white")??""} shadow-xl group relative`),w(Ne,l),ye(W,"placeholder",s),ye(at,"placeholder",n),at.disabled=x(),w(sa,b),ye(Ke,"aria-pressed",e(O)?"true":"false"),ye(Ke,"aria-label",K),w(ca,y),w(ua,z),w(fa,ce),w(ha,ue),w(Oa,q),Xt(st,1,` text-sm px-3 py-2 transition rounded-lg ${e(k)?" cursor-not-allowed bg-black hover:bg-gray-900 text-white dark:bg-white dark:hover:bg-gray-100 dark:text-black":"bg-black hover:bg-gray-900 text-white dark:bg-white dark:hover:bg-gray-100 dark:text-black"} flex w-full justify-center`),st.disabled=e(k)},[()=>(d(),i(()=>d().t("Reset Image"))),()=>(d(),i(()=>d().t("Model Name"))),()=>(d(),i(()=>d().t("Model ID"))),()=>(d(),i(()=>d().t("Description"))),()=>(e(O),d(),i(()=>e(O)?d().t("Custom description enabled"):d().t("Default description enabled"))),()=>(d(),i(()=>d().t("Model Params"))),()=>(d(),i(()=>d().t("System Prompt"))),()=>(d(),i(()=>d().t("Advanced Params"))),()=>(d(),i(()=>d().t("Prompt suggestions"))),()=>(d(),i(()=>d().t("JSON Preview")))]),de("click",te,()=>{e(A).click()}),de("click",he,()=>{$(a,e(a).meta.profile_image_url=`${Ge}/static/favicon.png`)}),Dt(W,()=>e(M),l=>f(M,l)),Dt(at,()=>e(I),l=>f(I,l)),de("click",Ke,()=>{f(O,!e(O))}),de("click",pt,()=>{f(T,!e(T))}),de("click",yt,()=>{var l,s;(((s=(l=e(a))==null?void 0:l.meta)==null?void 0:s.suggestion_prompts)??null)===null?$(a,e(a).meta.suggestion_prompts=[{content:""}]):$(a,e(a).meta.suggestion_prompts=null)}),de("click",Ct,()=>{f(h,!e(h))}),de("submit",ae,es(()=>{Qt()})),c(V,ae)};P(et,V=>{(!x()||x()&&v())&&V(tt)})}t(Fe),Ga(je,()=>e(j),V=>f(j,V)),de("change",je,()=>{let V=new FileReader;V.onload=ae=>{let ne=`${ae.target.result}`;const le=new Image;le.src=ne,le.onload=function(){const te=document.createElement("canvas"),Be=te.getContext("2d"),xe=le.width/le.height;let pe,fe;xe>1?(pe=250*xe,fe=250):(pe=250,fe=250/xe),te.width=250,te.height=250;const he=(250-pe)/2,Ne=(250-fe)/2;Be.drawImage(le,he,Ne,pe,fe);const Se=te.toDataURL();$(a,e(a).meta.profile_image_url=Se),f(j,null),$(A,e(A).value="")}},e(j)&&e(j).length>0&&["image/gif","image/webp","image/jpeg","image/png","image/svg+xml"].includes(e(j)[0].type)?V.readAsDataURL(e(j)[0]):(`${e(j)[0].type}`,f(j,null))}),c(Z,oe)};P(ea,Z=>{e(p)&&Z(ta)})}c(se,Pt),Te(),o()}export{Cr as M};
//# sourceMappingURL=Bk_OkSNc.js.map
